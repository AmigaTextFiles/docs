<html>
<head>
<title>SELFHTML: JavaScript / Anwendungsbeispiele / Taschenrechner</title>
<meta name="description" content="(SELFHTML 7.0) JavaScript, das einen Taschenrechner simuliert.">
<meta name="keywords" content="SELFHTML, JavaScript, Taschenrechner">
<link rel=stylesheet type="text/css" href="wselfhtm.css">
</head>
<body bgcolor=#ffffff text=#000000 link=#aa5522 vlink=#772200 alink=#000000>

<p><nobr><a class="an" name="top"><img src="x2.gif" width=16 height=13 border=0></a> <a href="selfhtml.htm"><b>SELFHTML</b></a>/<a href="tq.htm" target="_parent">Quickbar</a>&#160;
<img src="x2.gif" width=16 height=13 border=0> <a href="te.htm"><b>JavaScript</b></a>&#160;
<img src="x2.gif" width=16 height=13 border=0> <a href="ted.htm"><b>Anwendungsbeispiele</b></a></nobr></p>
<hr noshade size=1>
<table cellpadding=4 cellspacing=1 width=100%>
<tr>
<td bgcolor=#EEEEEE class="doc" width=110><img src="xweb.gif" width=106 height=109></td>
<td bgcolor=#EEEEEE class="doc" valign=bottom width=100%><h2>Taschenrechner</h2></td>
</tr>
<tr>
<td bgcolor=#EEEEEE class="doc" valign=top align=center>
<img src="x5.gif" width=30 height=20 vspace=6 border=0 alt="Diese Seite ist ein Dokument mit Informationstext">
</td>
<td bgcolor=#ffffff valign=top nowrap>

<p>
<img src="xgdown.gif" width=14 height=10 border=0>&nbsp;<a href="#a1"><b>Taschenrechner - das Beispiel</b></a>
</p>

</td>
</tr><tr><td colspan=2 bgcolor=#EEEEEE class="doc"><a href="#bottom"><img src="xgdown.gif" width=14 height=10 border=0></a>&#160;</td></tr>
</table>



<h2 class="Sh2"><a class="an" name="a1"><img src="xnetsi2.gif" width=30 height=30 border=0 alt="Netscape2.0"><img src="xmsie3.gif" width=30 height=30 border=0 alt="MS IE 3.0"> Taschenrechner</a></h2>

<p><img src="xview.gif" width=30 height=20 border=0 alt="Beispiel" align=absmiddle> <a href="tedca.htm"><b>Anzeigebeispiel: So sieht's aus</b></a></p>

<p>Das Beispiel baut mit Hilfe eines HTML-Formulars einen einigerma&szlig;en &quot;echt&quot; aussehenden Taschenrechner auf. Der Anwender kann diesen Taschenrechner wie &uuml;blich bedienen. Dazu kommen noch einige besonders bequeme Eingabemethoden.</p>

<p>Anhand dieses Beispiels k&ouml;nnen Sie studieren, wie man Formulareingaben mit JavaScript zur direkten Interaktion verwenden kann.</p>

<p><b>Hinweis:</b> Zur besseren Orientierung enth&auml;lt das Beispiel Verweise zu den entsprechenden Erl&auml;uterungen, z.B. <a href="#a1a1"><b>1*</b></a>. Diese Verweise geh&ouml;ren nicht zum Quellcode. Falls Sie das Beispiel in einen Editor kopieren, m&uuml;ssen Sie diese Verweise l&ouml;schen. Andernfalls erhalten Sie JavaScript-Fehlermeldungen.</p>

<h3 class="xmp">Beispiel:</h3>
<table width=100% cellpadding=10><tr><td class="xmpcode" bgcolor=#FFFFE0><pre>
  &lt;html&gt;
  &lt;head&gt;
  &lt;title&gt;Taschenrechner&lt;/title&gt;
  &lt;script language=&quot;JavaScript&quot;&gt;
  &lt;!--
  <a name="a1a1" href="#a1b1"><b>1*</b></a> function Ergebnis()
 {
   var x = 0;
   x = eval(window.document.Rechner.Display.value);
   window.document.Rechner.Display.value = x;   
 }

 <a name="a1a2" href="#a1b2"><b>2*</b></a> function Hinzufuegen(Zeichen)
 {
   window.document.Rechner.Display.value = 
   window.document.Rechner.Display.value + Zeichen;   
 }

 <a name="a1a3" href="#a1b3"><b>3*</b></a> function Sonderfunktion(Funktion)
 {
   if(Funktion == &quot;sqrt&quot;)
    {
     var x = 0;
     x = eval(window.document.Rechner.Display.value);
     window.document.Rechner.Display.value = Math.sqrt(x);   
	}
   if(Funktion == &quot;pow&quot;)
    {
     var x = 0;
     x = eval(window.document.Rechner.Display.value);
     window.document.Rechner.Display.value = x * x;   
	}
   if(Funktion == &quot;log&quot;)
    {
     var x = 0;
     x = eval(window.document.Rechner.Display.value);
     window.document.Rechner.Display.value = Math.log(x);   
	}
 }
  //--&gt;
  &lt;/script&gt;
  &lt;/head&gt;
  
  &lt;body bgcolor=#CCCCCC text=#000000 link=#0000CC vlink=#000099 alink=#0000FF&gt;
  &lt;h1&gt;Taschenrechner&lt;/h1&gt;
  &lt;form name=&quot;Rechner&quot;&gt;
  &lt;table border=10 cellpadding=10&gt;
  &lt;tr&gt;
  &lt;td bgcolor=#C0C0C0&gt;&lt;input name=&quot;Display&quot; size=30 maxlength=30&gt;&lt;/td&gt; 
  &lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;&lt;table&gt;
  &lt;tr&gt;
  <a name="a1a4" href="#a1b4"><b>4*</b></a> &lt;td width=50&gt;&lt;input type=button value=&quot;   7   &quot; onClick=&quot;Hinzufuegen('7')&quot;&gt;&lt;/td&gt;   
  &lt;td width=50&gt;&lt;input type=button value=&quot;   8   &quot; onClick=&quot;Hinzufuegen('8')&quot;&gt;&lt;/td&gt;
  &lt;td width=70&gt;&lt;input type=button value=&quot;   9   &quot; onClick=&quot;Hinzufuegen('9')&quot;&gt;&lt;/td&gt;
  &lt;td width=50&gt;&lt;input type=button value=&quot;   +    &quot; onClick=&quot;Hinzufuegen('+')&quot;&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
  &lt;td width=50&gt;&lt;input type=button value=&quot;   4   &quot; onClick=&quot;Hinzufuegen('4')&quot;&gt;&lt;/td&gt;
  &lt;td width=50&gt;&lt;input type=button value=&quot;   5   &quot; onClick=&quot;Hinzufuegen('5')&quot;&gt;&lt;/td&gt;
  &lt;td width=70&gt;&lt;input type=button value=&quot;   6   &quot; onClick=&quot;Hinzufuegen('6')&quot;&gt;&lt;/td&gt;
  &lt;td width=50&gt;&lt;input type=button value=&quot;    -    &quot; onClick=&quot;Hinzufuegen('-')&quot;&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
  &lt;td width=50&gt;&lt;input type=button value=&quot;   1   &quot; onClick=&quot;Hinzufuegen('1')&quot;&gt;&lt;/td&gt;
  &lt;td width=50&gt;&lt;input type=button value=&quot;   2   &quot; onClick=&quot;Hinzufuegen('2')&quot;&gt;&lt;/td&gt;
  &lt;td width=70&gt;&lt;input type=button value=&quot;   3   &quot; onClick=&quot;Hinzufuegen('3')&quot;&gt;&lt;/td&gt;
  &lt;td width=50&gt;&lt;input type=button value=&quot;    *    &quot; onClick=&quot;Hinzufuegen('*')&quot;&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
  &lt;td width=50&gt;&lt;input type=button value=&quot;    =    &quot; onClick=&quot;Ergebnis()&quot;&gt;&lt;/td&gt;
  &lt;td width=50&gt;&lt;input type=button value=&quot;   0   &quot; onClick=&quot;Hinzufuegen('0')&quot;&gt;&lt;/td&gt;
  &lt;td width=70&gt;&lt;input type=button value=&quot;   .    &quot; onClick=&quot;Hinzufuegen('.')&quot;&gt;&lt;/td&gt;
  &lt;td width=50&gt;&lt;input type=button value=&quot;    /    &quot; onClick=&quot;Hinzufuegen('/')&quot;&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
  &lt;tr&gt;
  &lt;td width=50&gt;&lt;input type=button value=&quot;sqrt &quot; onClick=&quot;Sonderfunktion('sqrt')&quot;&gt;&lt;/td&gt;
  &lt;td width=50&gt;&lt;input type=button value=&quot; pow &quot; onClick=&quot;Sonderfunktion('pow')&quot;&gt;&lt;/td&gt;
  &lt;td width=70&gt;&lt;input type=button value=&quot; log &quot; onClick=&quot;Sonderfunktion('log')&quot;&gt;&lt;/td&gt;
  <a name="a1a5" href="#a1b5"><b>5*</b></a> &lt;td width=50&gt;&lt;input type=reset value=&quot;   C   &quot;&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;/tr&gt;
  &lt;/table&gt;
  &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
  &lt;/form&gt;
  &lt;/body&gt;
  &lt;/html&gt;
</pre></td></tr></table>


<h3 class="xpl">Erl&auml;uterung:</h3>

<p>Der HTML-Aufbau des Taschenrechners erscheint etwas kompliziert, da er sich einer Tabelle innerhalb einer Tabelle bedient. Dadurch wird jedoch eine halbwegs saubere Ausrichtung der einzelnen Buttons erreicht, und das Rechen- bzw. Ergebnisfeld erscheint in einem eigenen, andersfarbigen Bereich (die farbliche Abstufung ist jedoch nur bei moderneren WWW-Browsern sichtbar).<br>
Der Taschenrechner funktioniert absichtlich so, da&szlig; Sie sowohl die Buttons als auch direkt das Rechenfeld zur Eingabe benutzen k&ouml;nnen. Das hei&szlig;t, Sie k&ouml;nnen beispielsweise in dem Rechenfeld eine Rechenoperation mit Grundrechenarten direkt eingeben, z.B. <i>5 * 6 + 7 - 4</i>. Wenn Sie dann auf den Button &quot;=&quot; klicken, wird im selben Feld das Ergebnis angezeigt.<br>
Mit dem Button &quot;C&quot; k&ouml;nnen Sie den aktuellen Inhalt des Rechenfeldes jederzeit l&ouml;schen.</p>


<p><img src="xgoup.gif" width=14 height=10 border=0>&nbsp;<a name="a1b1" href="#a1a1"><b>Funktion zur Berechnung des Inhalts des Rechenfelds</b></a><br>
Im Beispiel werden im Kopf der HTML-Datei alle <img src="x3.gif" width=15 height=10 border=0>&nbsp;<a href="tebd.htm"><b>Funktionen</b></a> notiert, die die Funktionalit&auml;t des Taschenrechners erm&ouml;glichen. Die Funktion <tt>Ergebnis()</tt> errechnet den aktuellen Inhalt des Rechenfeldes. Innerhalb der Funktion wird eine <img src="x3.gif" width=15 height=10 border=0>&nbsp;<a href="tebb.htm#a1"><b>Variable</b></a> <tt>x</tt> definiert, in der das Ergebnis der Berechnung gespeichert wird. Um das Ergebnis zu erhalten, wird die Rechenoperation, die in dem &uuml;bergebenen Formularfeld (dem Rechenfeld des Taschenrechners) steht, an die m&auml;chtige <img src="x3.gif" width=15 height=10 border=0>&nbsp;<a href="tecm.htm"><b>objektunabh&auml;ngige JavaScript-Funktion</b></a> <tt>eval()</tt> &uuml;bergeben. Diese Funktion &uuml;bernimmt automatisch die gesamte Berechnung der Rechenoperation. Voraussetzung ist nat&uuml;rlich, da&szlig; die Rechenoperation keine ung&uuml;ltigen Zeichen enth&auml;lt. Ansonsten erzeugt JavaScript eine Fehlermeldung.<br>
Um das errechnete Ergebnis, das in der Variablen <tt>x</tt> gespeichert wird, im Rechenfeld des Taschenrechners anzuzeigen, wird dem entsprechenden Formularfeld einfach der Wert von <tt>x</tt> zugewiesen.</p>

<p><img src="xgoup.gif" width=14 height=10 border=0>&nbsp;<a name="a1b2" href="#a1a2"><b>Funktion zum Hinzuf&uuml;gen eines Zeichens in das Rechenfeld</b></a><br>
Die Funktion <tt>Hinzufuegen()</tt> im Beispiel wird aufgerufen, wenn der Anwender auf einen der Buttons im Taschenrechner-Formular klickt. Das k&ouml;nnen Ziffern (0 bis 9) oder Rechenoperatoren (+,-,*,/) oder ein Dezimalpunkt sein. Um das Zeichen hinzuzuf&uuml;gen, wird dem aktuellen Wert des Rechenfeldes einfach der bisherige Wert plus das neue Zeichen zugewiesen. Das neue Zeichen wird der Funktion als Parameter &uuml;bergeben.</p>

<p><img src="xgoup.gif" width=14 height=10 border=0>&nbsp;<a name="a1b3" href="#a1a3"><b>Funktion zur Berechnung von Sonderfunktionen</b></a><br>
Die Funktion <tt>Sonderfunktion()</tt> im Beispiel ist f&uuml;r die Berechnung von drei mathematischen Funktionen zust&auml;ndig, f&uuml;r die es im Taschenrechner entsprechende Buttons gibt: die Funktionen &quot;sqrt&quot; (Quadratwurzel), &quot;pow&quot; (Quadrat) und &quot;log&quot; (nat&uuml;rlicher Logarithmus &uuml;ber 10). Die Funktion erwartet drei Parameter: den Index des Formulars, in dem sich das Rechenfeld befindet, den Index des Feldes innerhalb dieses Formulars, und eine Zeichenkette, die die auszuf&uuml;hrende mathematische Funktion kennzeichnet. Innerhalb der Funktion wird der dritte Parameter abgefragt. Erlaubt sind die &Uuml;bergabewerte &quot;sqrt&quot;, &quot;pow&quot; und &quot;log&quot;. Falls einer dieser Werte &uuml;bergeben wurde, berechnet die Funktion innerhalb des entsprechenden If-Zweigs den gew&uuml;nschten Wert. Dazu wird die Rechenoperation oder die Zahl, die in dem &uuml;bergebenen Formularfeld (dem Rechenfeld des Taschenrechners) steht, an die JavaScript-Standardfunktion <tt>eval()</tt> &uuml;bergeben. Diese Funktion &uuml;bernimmt automatisch die gesamte Berechnung der Rechenoperation. Das Ergebnis wird in <tt>x</tt> gespeichert. Falls es sich nur um eine einfache Zahl handelt, wird diese Zahl in <tt>x</tt> gespeichert. Mit einer entsprechenden JavaScript-Methode, z.B. der Methode <tt>sqrt()</tt> zur Errechnung der Quadratwurzel, wird das Ergebnis der mathematischen Sonderfunktion berechnet und zugleich dem Rechen-/Ergebnisfeld des Taschenrechner-Formulars zugewiesen.</p>

<p><img src="xgoup.gif" width=14 height=10 border=0>&nbsp;<a name="a1b4" href="#a1a4"><b>Buttoncklick als Zeichen in Rechenfeld eintragen</b></a><br>
Innerhalb des Taschenrechner-Formulars im Beispiel werden die Buttons f&uuml;r Ziffern, Operatoren usw. definiert. Beim Klicken auf einen solchen Button soll nat&uuml;rlich eine entsprechende Reaktion erfolgen. Dies geschieht mit Hilfe des <img src="x3.gif" width=15 height=10 border=0>&nbsp;<a href="tebj.htm"><b>Event-Handlers</b></a> <tt>onClick=</tt>. Der Event-Handler wird aktiv, wenn der entsprechende Button angeklickt wird, und ruft dann eine der im Dateikopf definierten Funktionen auf. Bei einer Ziffer wird beispielsweise die Funktion <tt>Hinzufuegen()</tt> aufgerufen. Dazu wird der Funktion der erwartete Parameter &uuml;bergeben, also das hinzuzuf&uuml;gende Zeichen. Das Taschenrechner-Formular erh&auml;lt bei der Definition einen Namen, im Beispiel den Namen &quot;Rechner&quot;. Auch das Rechen-/Ergebnisfeld, das im JavaScript-Code sehr oft angesprochen wird, erh&auml;lt einen Namen - den Namen &quot;Display&quot;. Das <img src="x3.gif" width=15 height=10 border=0>&nbsp;<a href="tecbbd.htm"><b>Formular-Objekt</b></a> und das <img src="x3.gif" width=15 height=10 border=0>&nbsp;<a href="tecbbda.htm"><b>Formularelement-Objekt</b></a> des Rechen-/Ergebnisfeldes kann deshalb mit <tt>window.document.Rechner.Display</tt> adressiert werden.</p>

<p><img src="xgoup.gif" width=14 height=10 border=0>&nbsp;<a name="a1b5" href="#a1a5"><b>Inhalt des Rechenfelds l&ouml;schen</b></a><br>
Der Button mit der Aufschrift &quot;C&quot; im Beispiel dient zum L&ouml;schen der bisherigen Eingaben. Dazu braucht man kein JavaScript. Stattdessen gen&uuml;gt es, einen Button vom Typ <tt>reset</tt> zu definieren.</p>


<table cellpadding=4 cellspacing=1 width=100%>
<tr><td colspan=2 bgcolor=#EEEEEE class="doc">
<a href="#top"><img src="xgoup.gif" width=14 height=10 border=0></a>
</td></tr>
<tr><td bgcolor=#EEEEEE class="doc" align=right width=110>weiter:<a href="tedd.htm"><img src="xgnext.gif" width=10 height=10 border=0 hspace=10></a></td>
<td bgcolor=#ffffff><img src="x3.gif" width=15 height=10 border=0> <a href="tedd.htm"><b>Monatskalender</b></a>
</td></tr>
<tr>
<td bgcolor=#EEEEEE class="doc" align=right width=110>zur&uuml;ck:<a href="tedb.htm"><img src="xgprev.gif" width=10 height=10 border=0 hspace=10></a></td>
<td bgcolor=#ffffff width=100%><img src="x3.gif" width=15 height=10 border=0> <a href="tedb.htm"><b>Seitenanzeige in Frames verhindern</b></a>
</td>
</tr>
<tr><td colspan=2 bgcolor=#EEEEEE class="doc">&#160;</td></tr>
</table>
<hr noshade size=1>
<p><nobr><img src="x2.gif" width=16 height=13 border=0> <a href="selfhtml.htm"><b>SELFHTML</b></a>/<a href="tq.htm" target="_parent">Quickbar</a>&#160;
<img src="x2.gif" width=16 height=13 border=0> <a href="te.htm"><b>JavaScript</b></a>&#160;
<img src="x2.gif" width=16 height=13 border=0> <a href="ted.htm"><b>Anwendungsbeispiele</b></a></nobr></p>
<p><nobr><a class="an" name="bottom">&copy; 1998</A> <img src="xgmail.gif" width=15 height=10 border=0>&nbsp;<a href="mailto:muenz@csi.com">Stefan M&uuml;nz, muenz@csi.com</a></nobr></p>


</body>
</html>