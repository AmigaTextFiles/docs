<html>
<head>
<title>SELFHTML: CGI/Perl / Perl-Sprachelemente / Mit Zahlen und Zeit arbeiten</title>
<meta name="description" content="(SELFHTML 7.0) Wie Sie in Perl mit Datum, Uhrzeit und mit mathematischen Operationen arbeiten k&ouml;nnen.">
<meta name="keywords" content="SELFHTML, Perl, Datum, Uhrzeit, Zeit, Berechnungen">
<link rel=stylesheet type="text/css" href="wselfhtm.css"> 
</head>
<body bgcolor=#FFFFFF text=#000000 link=#AA5522 vlink=#772200 alink=#000000>

<p><nobr><a class="an" name="top"><img src="x2.gif" width=16 height=13 border=0></a> <a href="selfhtml.htm"><b>SELFHTML</b></a>/<a href="tq.htm" target="_parent">Quickbar</a>&#160;
<img src="x2.gif" width=16 height=13 border=0> <a href="tg.htm"><b>CGI/Perl</b></a>&#160;
<img src="x2.gif" width=16 height=13 border=0> <a href="tgc.htm"><b>Perl-Sprachelemente</b></a></nobr></p>
<hr noshade size=1>
<table cellpadding=4 cellspacing=1 width=100%>
<tr>
<td bgcolor=#EEEEEE class="doc" width=110><img src="xweb.gif" width=106 height=109></td>
<td bgcolor=#EEEEEE class="doc" valign=bottom width=100%><h2>Mit Zahlen und Zeit arbeiten</h2></td>
</tr>
<tr>
<td bgcolor=#EEEEEE class="doc" valign=top align=center>
<img src="x5.gif" width=30 height=20 vspace=6 border=0 alt="Diese Seite ist ein Dokument mit Informationstext">
</td>
<td bgcolor=#FFFFFF valign=top nowrap>

<p>
<img src="xgdown.gif" width=14 height=10 border=0>&nbsp;<a href="#a1"><b>Technisch/wissenschaftliche Berechnungen</b></a> <br>
<img src="xgdown.gif" width=14 height=10 border=0>&nbsp;<a href="#a2"><b>Datum und Uhrzeit</b></a>
</p>

</td>
</tr><tr><td colspan=2 bgcolor=#EEEEEE class="doc"><a href="#bottom"><img src="xgdown.gif" width=14 height=10 border=0></a>&#160;</td></tr>
</table>



<h2 class="Sh2"><a class="an" name="a1">Technisch/wissenschaftliche Berechnungen</a></h2>

<p>In Perl stehen f&uuml;r die wichtigsten h&ouml;heren mathematischen Funktionen entsprechende <img src="x3.gif" width=15 height=10 border=0>&nbsp;<a href="tgci.htm#a4"><b>Perl-Funktionen</b></a> zur Verf&uuml;gung.</p>

<h3 class="xmp">Beispiele:</h3>
<table width=100% cellpadding=10><tr><td class="xmpcode" bgcolor=#FFFFDD>
<pre>
#!/usr/bin/perl

$Abswert = abs(-45683);
print &quot;Absolutwert von -45683 lautet: &quot;, $Abswert, &quot;\n&quot;;   

$Wurzel = sqrt(23876);
print &quot;Die Quadratwurzel von 23876 lautet: &quot;, $Wurzel, &quot;\n&quot;;

$Ganzzahl = int(sqrt(3298476));
print &quot;Der Ganzzahlanteil der Quadratwurzel 3298476 von lautet: &quot;, $Ganzzahl, &quot;\n&quot;;   

$Exp = exp(39);
print &quot;Die Potenz 39 zur Basis e lautet: &quot;, $Exp, &quot;\n&quot;;   

$Log = log(23);
print &quot;Der natuerliche Logarithmus zur Basis e von 23 lautet: &quot;, $Log, &quot;\n&quot;;   

$Sinus = sin(1.2387);
$Cosinus = cos(10.237);
$ArkTangens = atan2(1.389,2.438);
print &quot;Der Sinus von 1.2387 lautet: &quot;, $Sinus, &quot;\n&quot;;   
print &quot;Der Cosinus von 10.237 lautet: &quot;, $Cosinus, &quot;\n&quot;;   
print &quot;Der Arkustangens von 1.389/2.438 lautet: &quot;, $ArkTangens, &quot;\n&quot;;   


@Hexwerte = (10,20,30,40,50,60,70,80,90,A0,B0,C0,D0,E0,F0);
for(@Hexwerte) 
 {  
  $Dezimalwert = hex($_);
  print $_, &quot; ist dezimal: &quot;, $Dezimalwert, &quot;\n&quot;;   
 }
</pre></td></tr></table>

<h3 class="xpl">Erl&auml;uterung:</h3>

<p>Mit der Funktion <tt>abs</tt> k&ouml;nnen Sie erzwingen, da&szlig; eine Zahl in jedem Fall positiv ist. &Uuml;bergeben Sie der Funktion die Zahl, die behandelt werden soll. Die Funktion gibt den behandelten Wert zur&uuml;ck.<br>
Mit <tt>sqrt</tt> k&ouml;nnen Sie die Quadratwurzel einer Zahl berechnen. &Uuml;bergeben Sie der Funktion die Zahl, aus der die Wurzel gezogen werden soll. Die Funktion gibt das Ergebnis zur&uuml;ck.<br>
Mit <tt>int</tt> erzwingen Sie von einer Bruchzahl den ganzzahligen Anteil, also bei 3.1415 etwa die Zahl 3. &Uuml;bergeben Sie der Funktion die Zahl, aus der der Kommawert entfernt werden soll. Die Funktion gibt das Ergebnis zur&uuml;ck. Im obigen Beispiel zu dieser Funktion sehen Sie &uuml;brigens, wie man in Perl einer Funktion eine andere Funktion &uuml;bergeben kann. Die Funktion berechnet in diesem Beispiel den R&uuml;ckgabewert der Funktion f&uuml;r die Quadratwurzel.<br>
Die Funktionen <tt>exp</tt> liefert die Konstante <tt>e</tt> in einer beliebigen Potenz zur&uuml;ck. Die Gew&uuml;nschte Potenz &uuml;bergeben Sie als Parameter. Die Funktion liefert das Ergebnis zur&uuml;ck.<br>
Die Funktion <tt>log</tt> ermittelt den nat&uuml;rlichen Logarithmus einer Zahl zur Basis <B>e</B>. &Uuml;bergeben Sie die gew&uuml;nschte Zahl als Parameter. Die Funktion gibt das Ergebnis zur&uuml;ck.<br>
Als geometrische Funktionen bietet Perl <tt>sin</tt> f&uuml;r Sinus, <tt>cos</tt> f&uuml;r Cosinus und <tt>atan2</tt> f&uuml;r den Arkustangens an. &Uuml;bergeben Sie diesen Funktionen die gew&uuml;nschte Zahl. Arkustangens erwartet zwei Werte: von und bis. Die Funktionen geben das Ergebnis zur&uuml;ck.</p>

<p>Neben diesen Funktionen sind nat&uuml;rlich auch Berechnungen mit <img src="x3.gif" width=15 height=10 border=0>&nbsp;<a href="tgcf.htm#a3"><b>Berechnungsoperatoren</b></a> m&ouml;glich.</p>

<p>Zum Konvertieren von Hexadezimalwerten in Dezimalwerte k&ouml;nnen Sie die Funktion <tt>hex</tt> verwenden. &Uuml;bergeben Sie der Funktion einen Hexadezimalwert (Ziffern 0 bis 9 und Buchstaben A bis F). Die Funktion gibt den Dezimalwert zur&uuml;ck.</p>


<table bgcolor=#EEEEEE class="doc" width=100%><tr><td>
<a href="#top"><img src="xgoup.gif" width=14 height=10 border=0></a><a href="#bottom"><img src="xgdown.gif" width=14 height=10 border=0></a>&#160;
</td></tr></table>
<h2 class="Sh2"><a class="an" name="a2">Datum und Uhrzeit</a></h2>

<p>Perl bietet Funktionen zum Ermitteln von Datum und Uhrzeit an.</p>

<h3 class="xmp">Beispiel:</h3>
<table width=100% cellpadding=10><tr><td class="xmpcode" bgcolor=#FFFFDD>
<pre>
#!/usr/bin/perl

$Jetztwert = time();
$Jetztzeit = localtime($Jetztwert);
&amp;Deutschnamen;
@Zeit = split(/ +/,$Jetztzeit);
@Uhrzeit = split(/:/,$Zeit[3]);

print &quot;Guten Tag!\n&quot;;
print &quot;Heute ist &quot;,$Zeit[0],&quot;, der &quot;,$Zeit[2],&quot;. &quot;,$Zeit[1],&quot; &quot;,$Zeit[4],&quot;\n&quot;;
print &quot;Es ist jetzt &quot;,$Uhrzeit[0],&quot;:&quot;,$Uhrzeit[1],&quot; Uhr\n&quot;;

sub Deutschnamen
{
 $Jetztzeit =~ s/Mon/Montag/;
 $Jetztzeit =~ s/Tue/Dienstag/;
 $Jetztzeit =~ s/Wed/Mittwoch/;
 $Jetztzeit =~ s/Thu/Donnerstag/;
 $Jetztzeit =~ s/Fri/Freitag/;
 $Jetztzeit =~ s/Sat/Samstag/;
 $Jetztzeit =~ s/Sun/Sonntag/;
 $Jetztzeit =~ s/Jan/Januar/;
 $Jetztzeit =~ s/Feb/Februar/;
 $Jetztzeit =~ s/Mar/Maerz/;
 $Jetztzeit =~ s/Apr/April/;
 $Jetztzeit =~ s/May/Mai/;
 $Jetztzeit =~ s/Jun/Juni/;
 $Jetztzeit =~ s/Jul/Juli/;
 $Jetztzeit =~ s/Aug/August/;
 $Jetztzeit =~ s/Sep/September/;
 $Jetztzeit =~ s/Oct/Oktober/;
 $Jetztzeit =~ s/Nov/November/;
 $Jetztzeit =~ s/Dec/Dezember/;
}
</pre></td></tr></table>

<h3 class="xpl">Erl&auml;uterung:</h3>

<p>Das obige Beispiel ermittelt Datum und Uhrzeit und gibt das Ergebnis ordentlich formatiert und deutschsprachig aus.</p>

<p>Mit dem Aufruf der <img src="x3.gif" width=15 height=10 border=0>&nbsp;<a href="tgci.htm#a4"><b>Perl-Funktion</b></a> <tt>time</tt> wird die aktuelle Zeit ermittelt. Die Funktion gibt, wie unter Unix und C &uuml;blich, die Anzahl der Millisekunden zur&uuml;ck, die seit dem 1.1.1970 vergangen sind. Das ist eine ziemlich hohe Zahl, die nichts weiter aussagt, aber sehr exakt ist. Im obigen Beispiel wird diese Zahl in dem <img src="x3.gif" width=15 height=10 border=0>&nbsp;<a href="tgcb.htm#a1"><b>Skalar</b></a> <tt>$Jetztwert</tt> gespeichert. Sie ist Grundlage f&uuml;r den Aufruf der Funktion <tt>localtime</tt>. Diese Funktion erwartet als Parameter eine Zahl, die sie als Anzahl Millisekunden seit 1.1.1970 interpretiert. Die Funktion erzeugt daraus eine Zeichenkette, die Datum und Uhrzeit im internationalen Format enth&auml;lt, z.B. <tt>Fri Jun 13 20:29:11 1997</tt>. Diese Zeichenkette gibt die Funktion zur&uuml;ck. Im obigben Beispiel wird dieser R&uuml;ckgabewert in <tt>$Jetztzeit</tt> gespeichert.<br>
Im Beispiel wird als n&auml;chstes ein <img src="x3.gif" width=15 height=10 border=0>&nbsp;<a href="tgci.htm"><b>Unterprogramm</b></a> mit Namen <tt>Deutschnamen</tt> aufgerufen, das in der Zeichenkette von <tt>$Jetztzeit</tt> alle denkbaren internationalen Tages- und Monatsk&uuml;rzel durch die &uuml;blichen deutschsprachigen Namen <img src="x3.gif" width=15 height=10 border=0>&nbsp;<a href="tgck.htm#a6"><b>ersetzt</b></a>.<br>
Die Datums- und Zeitelemente in <tt>$Jetztzeit</tt> sind durch Leerzeichen voneinander getrennt. Diese Eigenschaft macht sich die Anweisung <tt>@Zeit = split(/ /,$Jetztzeit);</tt> im Beispiel zu eigen. Anschlie&szlig;end sind die einzelnen Elemente wie Tag, Monat, Jahr usw. einzeln als Elemente dieser <img src="x3.gif" width=15 height=10 border=0>&nbsp;<a href="tgcb.htm#a2"><b>Liste</b></a> ansprechbar. Ein Element dieser Liste, ansprechbar &uuml;ber $Zeit[3], stellt die Uhrzeit dar. Die Uhrzeit besteht aus Stunden, Minuten und Sekunden, getrennt durch Doppelpunkt. Auch diese Zeichenkette wird im Beispiel wieder in ihre Bestandteile zerlegt, n&auml;mlich mit der Anweisung <tt>@Uhrzeit = split(/:/,$Zeit[3]);</tt>.<br>
Danach sind alle Elemente einzeln ansprechbar und k&ouml;nnen - wie im Beispiel - mit der <tt>print</tt>-Funktion nach Belieben ausgegeben werden.</p>





<table cellpadding=4 cellspacing=1 width=100%>
<tr><td colspan=2 bgcolor=#eeeeee>
<a href="#top"><img src="xgoup.gif" width=14 height=10 border=0></a>
</td></tr>
<tr><td bgcolor=#EEEEEE class="doc" align=right width=110>weiter:<a href="tgcm.htm"><img src="xgnext.gif" width=10 height=10 border=0 hspace=10></a></td>
<td bgcolor=#FFFFFF><img src="x3.gif" width=15 height=10 border=0> <a href="tgcm.htm"><b>CGI-typische Anweisungen in Perl</b></a>
</td></tr>
<tr>
<td bgcolor=#EEEEEE class="doc" align=right width=110>zur&uuml;ck:<a href="tgck.htm"><img src="xgprev.gif" width=10 height=10 border=0 hspace=10></a></td>
<td bgcolor=#FFFFFF width=100%><img src="x3.gif" width=15 height=10 border=0> <a href="tgck.htm"><b>Zeichenketten und Listen manipulieren</b></a>
</td>
</tr>
<tr><td colspan=2 bgcolor=#EEEEEE>&#160;</td></tr>
</table>
<hr noshade size=1>
<p><nobr><img src="x2.gif" width=16 height=13 border=0> <a href="selfhtml.htm"><b>SELFHTML</b></a>/<a href="tq.htm" target="_parent">Quickbar</a>&#160;
<img src="x2.gif" width=16 height=13 border=0> <a href="tg.htm"><b>CGI/Perl</b></a>&#160;
<img src="x2.gif" width=16 height=13 border=0> <a href="tgc.htm"><b>Perl-Sprachelemente</b></a></nobr><br>
<nobr><a class="an" name="bottom">&copy; 1998</A> <img src="xgmail.gif" width=15 height=10 border=0>&nbsp;<a href="mailto:muenz@csi.com">Stefan M&uuml;nz, muenz@csi.com</a></nobr></p>



</body>
</html>