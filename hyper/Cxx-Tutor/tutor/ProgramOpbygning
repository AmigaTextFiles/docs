@DATABASE CXX-Tutor.guide
@SMARTWRAP
@TAB 4

@node Main "Programopbygning"

	@{B}Programopbygning@{UB}


	For at kunne forstå og overskue et program, er det vigtigt at det er overskueligt opbygget.
Hoved programmet bør i princippet kun bestå af en samling funktionskald, derved er det nemmere at overskue de enkelte programdele.
Det er det samme man forsøger at opnå når man indsætter kommentarer.
Her er to metoder, som begge forsøger at opdele programmet i seperate dele:

@{CODE}
@{u}@{i}Kommentar metoden :@{ui}@{uu}

// Konstanter
const char	MENU_LOAD	= 'l';
const char	MENU_SAVE	= 's';
const char	MENU_QUIT	= 'q';

void main()
{
	char				valg;

	// Skriv Menu
	cout << "Vælg et menupunkt" << endl;
	cout << "(L)oad" << endl;
	cout << "(S)ave" << endl;
	cout << "(Q)uit" << endl;

	// Menu Valg
	cin  >> valg;
	switch (valg)
	{
		case MENU_LOAD:
		....
		....
		@{i}Loadrutine code @{ui}
		....
		....
		break;

		case MENU_SAVE:
		....
		....
		@{i}Saverutine code @{ui}
		....
		....
		break;

		case MENU_QUIT:
		....
		....
		@{i}Quitrutine code @{ui}
		....
		....
		break;
	}
}

@{i}@{u}Funktionskald metoden : @{ui}@{uu}

// Prototyper
void	SkrivMenu();
char	MenuValg();
void	Load();
void	Save();
void	Quit();

// Konstanter
const char	MENU_LOAD	= 'l';
const char	MENU_SAVE	= 's';
const char	MENU_QUIT	= 'q';

void main()
{
	SkrivMenu();
	switch (MenuValg())
	{
		case MENU_LOAD:
		Load();
		break;

		case MENU_SAVE:
		Save();
		break;

		case MENU_QUIT:
		Quit();
		break;
	}
}

void	SkrivMenu()
{
	cout << "Vælg et menupunkt" << endl;
	cout << "(L)oad" << endl;
	cout << "(S)ave" << endl;
	cout << "(Q)uit" << endl;
	
}

char	MenuValg()
{
	char	valg;
	cin  >>	valg;
	return valg;
}

void	Load()
{
	....
	....
	@{i}Loadrutine code @{ui}
	....
	....
}

void	Save()	
{
	....
	....
	@{i}Saverutine code @{ui}
	....
	....
}

void	Quit()
{
	....
	....
	@{i}Quitrutine code @{ui}
	....
	....
}
@{BODY}

	Funktionskald metoden er absolut at foretrække, da den opdeler programmet i mindre og lettere
overskuelige programdele og derfor bliver lettere overskuelig.
Metoden er specielt anvendelig hvis man er flere der programmerer på samme program.
Man kan så fordele funktionerne hos deltagerne, hvorefter de compileres sepperat,
for til sidst at blive linket sammen til det færdige program.
Mere om det senere.

	Nogen ville måske indvende at funktionskald tager for lang tid, og at programmet derfor bliver langsommere.
Dette ville normalt være tilfældet i BASIC og andre programmeringssprog, eftersom computeren laver en del arbejde ved funktionskald.
I C++ kan man derimod bruge et C++ keyword : inline.
Ved brug af inline, kommer underfunktionen til at blive kopieret ind alle de stedder den kaldes,
så den reelt ikke er et funktions kald mere.
Hastigheden bibeholdes, men kræver sædvanligvis mere ram.
Funktioner på et par linier bør altid være inline, da programdelen som udfører funktionskaldet,
sandsynligvis fylder mere end selve funktionen.


@{CODE}
@{i}@{u}Inline funktions metoden : @{ui}@{uu}

// Prototyper
inline void		SkrivMenu();
inline char		MenuValg();
inline void		Load();
inline void		Save();
inline void		Quit();

// Konstanter
const char	MENU_LOAD	= 'l';
const char	MENU_SAVE	= 's';
const char	MENU_QUIT	= 'q';

void main()
{
	SkrivMenu();
	switch (MenuValg())
	{
		case MENU_LOAD:
		Load();
		break;

		case MENU_SAVE:
		Save();
		break;

		case MENU_QUIT:
		Quit();
		break;
	}
}

inline void		SkrivMenu()
{
	cout << "Vælg et menupunkt" << endl;
	cout << "(L)oad" << endl;
	cout << "(S)ave" << endl;
	cout << "(Q)uit" << endl;
	
}

inline char		MenuValg()
{
	char	valg;
	cin  >>	valg;
	return valg;
}

inline void		Load()
{
	....
	....
	@{i}Loadrutine code @{ui}
	....
	....
}

inline void		Save()	
{
	....
	....
	@{i}Saverutine code @{ui}
	....
	....
}

inline void		Quit()
{
	....
	....
	@{i}Quitrutine code @{ui}
	....
	....
}
@{BODY}

	@{B}Kommentarer@{UB}

	Kommentarer er absolut nødvendige for programdele som er mere komplicerede, og nyttige i almindelighed.
Formålet ved kommentarerne er ikke mindst at man skulle kunne forstå ens program,
selvom man ikke har kigget på det i et stykke tid.
Også det at andre har en mulighed for at gennemskue ens program kan være en fordel,
specielt hvis det er meningen at det skal debugges.
Det tager kortere tid at skrive en kommentar, end at skulle finde ud af 6 måneder senere, hvad fanden det var funktionen gjorde.

	Der er to kommentar metoder : // og /* */.
// Betyder at alt efter dette tegn, er en kommentar hvilket gør at kompileren går til næste linie.
/* Betyder at en kommentar begynder og */ at den slutter. Med /* og */ kan man således reservere flere linier til kommentarer.

	Kommentarer bør placeres før program delene, da man så får en ide om hvad programmet gør før man ser på det.
Desuden ser det mere overskueligt ud, hvis man laver linieskift før kommentarerne, så man kan se hvad de hører til.
Eksemplet nedenunder er overdrevet da programmet er så simpelt.

@{CODE}
@{I}@{U}Eksempel:@{UI}@{UU}
/*
SOURCE:Hej.cxx
Dette program udskriver hej
iostream.h er included for at få output strømme.
*/

#include <iostream.h>

void main()
{
	// Udskriv 'Hej '
	cout <<"Hej ";
	
	// Udskriv 'verden'
	cout <<"verden";
	
	// Linieskift
	cout <<endl;
}
@{BODY}

@endnode
