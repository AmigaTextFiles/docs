
   Zamiast wstepu ...


   Pewnego dnia moja wysîuûona Amiga 1200 produkcji Escom-u przestala
czytac dyskietki. W pierwszej chwili padlo na budna gîowicë napëdu. Kiedy
jednak po jej przeczyszczeniu sytuacja nie ulegîa zmianie staîo sië jasne,
ûe muszë rozejrzeê sië za nowym napëdem. Za caîkiem nieduzâ sumke zostaîem
szczëôliwym posiadaczem aû dwóch napëdów FDD przeznaczonych do komputera PC.
Skoro mam juû dwa napëdy oraz obudowë tower /o czym jescze nie wspominaîem/
postanowiîem zamontowaê to wszystko w moim komputerze i to na dodatek
podîâczajâc za pomocâ jednej taômy do portu wewnëtrznego kontrolera FDD.

   I zaczëîy sië schody ...

   Nic prostrzego - siegnij do Aminetu a tam znajdziesz rozwiâzanie
problemu pomyôlaîem. Zajrzaîem, przeglâdnâîem i wiele nie znalazîem. Mój
problem okazaî sië znacznie bardziej wykraczajâcy poza dostëpne rozwiâzania.

   A wiëc do roboty ...

   Po dokîadnym przeanalizowaniu dostëpnej literatury przystâpiîem do
budowy wîasnego interface, który miaî rozwiâzaê nastëpujâce problemy:
1. Oba napedy muszâ korzystaê z jednej taômy podpiëtej do zîâcza dla stacji
wewnëtrznej,
2. Obie stacje muszâ byê wykrywane przez system automatycznie jako napëdy DF0:
oraz DF1:
3. Oba napëdy muszâ prawidîowo generowaê sygnaî _RDY.

Ad.1.
Jako ûe komputer mam w obudowie tower, dla zapewnienia elegancji oba napedy
/jak juû wspomniaîem/ postanowiîem podpiâê poprzez zîâcze wewnëtrzne. Pojawiî
sië jednak problem, skâd wziâê kilka dodatkowych, niedostëpnych na tym zîâczu
sygnaîów /Sel.1, MTRx, Reset/. Okazaîo sië, ûe wszystkie te sygnaîy dostëpne
sâ na wyprowadzeniach ukîadu U8 - VIA 8520. Potrzebna jest tylko podstawka
pod 44-pinowy ukîad PLCC. Podstawkë przylutowaîem do maîej pîytki montaûowej.
Zabieg ten miaî na celu wzmocnienie trwaîoôci podstawki /dwie wczeôniej
rozsypaîy sië wîaônie z powodów mechanicznych - w trakcie zakîadania na U8
oraz dodatkowo zapobiega wypadaniu grzebieni stykowych z podstawki/
Rozmieszczenie nóûek przedstawia RYS.1A

Ad.2 i 3
   Na poczâtek uwaga dla posiadaczy pîyt produkcji Escom /i zapewne
póúniejszych/ - w komputerach tych standardowo montowane sâ pecetowe napëdy.
Dodatkowo /aby zapewniê ich prawidîowâ pracë/ wykonywana jest îâczenie pinu 2
z 34 /sygnaî _CHNG/. Poîâczenie to naleûy zmieniê wg rys.1b i poîâczyê pin 34
portu wewnëtrznego z pinem 1 portu zewnëtrznego. Umoûliwi to podawanie przez
stacjë sygnaîu _RDY, niezbëdnego do wykrycia napëdów w trakcie inicjowania
komputera oraz poprawny odczyty dyskietek z grami NDOS. Uzyskujemy równieû
peînâ zgodnoôê z wczeôniejszymi modelami stacji dysków.
   Do wyjaônienia pozostaje jeszcze kwestia sygnaîu _RDY. Tutaj sprawa
jest nieco bardziej zîoûona.

Przypadek 1.
W trakcie inicjowania komputera przy wysokim stanie sygnaîu _MTRx pojawia sië
niski stan na lini _SEL.x, na co napëd /jeûeli jest zainstalowany/ natychmiast
odpowiada niskim stanem syganîu _RDY.

Przypadek 2.
W trakcie odczytu/zapisu przy niskim stanie sygnaîu _SEL.x ORAZ niskim stanie
sygnaîu _MTRx naped odpowiada sygnaîem gotowoôci _RDY po upîywie 500ms.

Prezentowane rozwiâzanie zapewnia realizacjë odpowiedzi _RDY w obu przypadkach
dla obu napëdów. Ze wzglëdu na maksymalne uporszczenie ukîadu /a co za tym
idzie - liczby bramek/ przyjëto zaîoûenie, ûe odstëp czasu pomiedzy pojawieniem
sië niskiego stanu sygaîu _MTRx a niskim stanem sygîau _SEL.x jest niewielki.

   Zamiast zakoïczenia ...

   Zmontowanie ukîadu ôredniozaawansowanemu posîugiwaczowi lutownicy nie
powinno nastrëczaê ûadnych trudnoôci. Dlatego teû nie zamieszczam opisu
wyprowadzeï poszczególnych ukîadów. Po zmontowaniu ukîadu naleûy go zestroiê.
Chodzi o to, aby tak ustawiê rezystancje potencjometru RP, aby uzyskaê opóúnienie
500ms. Do tego sîuûy oprogramowanie zawarte w doîâczonym archiwum. Nie jest to
pakiet mojego autorstwa. Aby jednak uîatwiê prace postanowiîem go doîâczyê
do mojego archiwu.

I to by chyba byîo na koniec.

Ps.I Nie muszë chyba przypominaê o tym, ûe ukîad pomimo swojej prostoty naleûy
wykonaê bardzo starannie, gdyû bardzo îatwo moûna doprowadziê do ZNISZCZENIA
KOMPUTERA.
Ps.II. Serdecznie pozdrawiam wszystkich tych, którzy przegrzali juû nie jeden
grot w poszukiwaniu rozwiâzaï amigowych problemów.
Ps.III. Pozdrawiam równieû Christiana Sauera, który jest autorem pakietu
A1200FDfix - pozwoliîem sobie wykorzystaê jego ideë generowanie opóúnienia
dla sygnaîu _RDY
Ps.IV. Dziëkujë równieû za opracowanie angielskojëzycznej wersji niniejszej
dokumentacji polskiej sekcji ATO:
 tlumacznie: Kamil Niescioruk (kniescio@biotop.umcs.lublin.pl)
 korekta: Mariusz Danilewicz (mandi@interia.pl)


     ----------------
     !!!! KONIEC !!!!
     ----------------
        Marian Guc
     mguc@poczta.wp.pl
