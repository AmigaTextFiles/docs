                DiskPerf 2             By: Khalid Aldoseri
                ----------             -------------------

This is an updated version of the original DiskPerf by Rick Spanbauer.  The
purpose of this program is to give you a fairly accurate idea of how
fast a particular controller/hard disk combination is.

To use the program just run it from CLI.  It will then start giving you
performance figures on the current drive.  (To test any other drive, just
'DPerf2 YourDriveName:')  You will get the following data:


Create Files:  This is the number of files your drive can create in 1 second.
Delete Files:  Same as above, but for deleting files.

Directory Scan: This is the speed of directory scanning in entries per second.
Seek/Read Test: This is a test of how fast your drive heads move.


Read/Write Speed Tests:
These figures are how fast your drive can read/write data.  The test is
performed with 6 different buffer sizes.  You should see dramatic difference
as the buffer size increases, especially with the Fast Filing System.


Note:  the number of buffers a device has will greatly affect its diskperf
figures.  These are not very realistic increases and you should run DPref2
with as few buffers as possible.  (between 5 - 30 buffers)

The following is a sample output from my hard disk:
(Controller: CBM 2090,  Hard Disk: Conner CP3100 100Meg SCSI)

DiskPerf2.   Testing FAST0:

Create Files:    19 files/sec.    Directory Scan:   236 entries/sec.
Delete Files:    53 files/sec.    Seek/Read Test:   159 seek/sec.

Read/Write Speed Test:  (bytes/sec.)

Buffer:  512     Read:     70,223     Write:     18,978
Buffer:   4k     Read:    181,289     Write:    149,540
Buffer:   8k     Read:    302,706     Write:    237,019
Buffer:  32k     Read:    511,001     Write:    333,516
Buffer:  64k     Read:    624,152     Write:    389,515
Buffer: 256k     Read:    655,360     Write:    418,760


If you get diskperf figure close to these, then your setup is very fast.


25 Feb 1989.

Khalid Aldoseri.
CIS 75166,2531.



This program is placed in the Public Domain.  You can do whatever you want
with it.  The original version of the program was done by Rick Spanbauer.


Differences between Diskperf and DPerf2:

- Bug Fixes:
  1. DPref2 now doesn't leave any locks lying around and will delete the
     test directory before it exits.
  2. DiskPerf didn't close the timer device before it exits.  This is fixed.

- Program optimized in order to speed up its execution.  This means that
  almost all of the time is spend in reading/writing data and not in DPerf2.

- Timing measurement resolution has been increased.  This makes the figures
  for read/write tests much more accurate.

- Output has been improved a lot.

- Added two more tests in the read/write test.

- Read/Write test with a 512 byte buffer has been shortened to be 4 times
  quicker.  This barely affects accuracy but speeds up the tests greatly.

- All in all, the figures by DPref2 can be compard to figures from DiskPerf
  as the difference is around +/- 10% at most.

Notes:

There are many things that can affect the diskperf performance of your
system, including: controller, hard disk, driver software, processor speed,
drive interleave, etc. etc.  With DPref2 you can experiment with these
and see what gives you the best performance.
