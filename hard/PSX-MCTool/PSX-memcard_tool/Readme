Short:    Use Playstation Memcard with Amiga v0.07
Author:   jel@netti.fi
Uploader: jel@netti.fi
Type:     hard/hack


**************************************************
*  USE THIS HARDWARE/SOFTWARE AT YOUR OWN RISK   *
**************************************************

Hardware connects to parallel port, it's very simple & very cheap.


I used this hardware/software successfully with
Amiga 500  - 68000 7.14MHz - 1MB - AmigaOS 1.3
Amiga 4000 - CSPPC 68060 50MHz - 64MB - AmigaOS 3.0

This is third release version, AMOS coded.
It opens only to a NTSC/PAL screen.
Software supports -
  raw binary memcard images - file length 131072 bytes
  .gme files - file length > 128 kbytes (only loading)
  .psx files - only file length 8246 bytes (only loading)

I included source files to this archive, make your own 
software if you want.
My AMOS proggy isn't very good, it is very slow on a plain A500..




USAGE

Press ESC to quit

Download - Downloads whole memorycard via hardware.
Upload - Uploads memory to memorycard via hardware.
Undelete - Marks deleted files active and uploads then.
Format - Fills memorycard with zeros.
Load - Load memorycard file
Save - Save memorycard file
Up/Down - Change active icon, right mousebutton zooms icon
Fast/Slow - Change internal delay, fast for slow machine,
            slow for fast machine.




HARDWARE THINGS

1.pin assign

                * memory card
         ______________________________ 
        |                              |
        | [#][#][#]  [#][#][#]  [#][#] |   (front view)
        |______________________________|
 pin No.   9  7  6    5  4  3    2  1   

                  PAD
        ----------------------- 
       | o o o | o o o | o o o |           (front view)
        \______|_______|______/ 
 pin No. 9 8 7   6 5 4   3 2 1

  pin  signal
  No.   name  direction  logic      function
-----------------------------------------------------------------------
   1    DAT      in      positive   Serial Output data(open drain)
   2    CMD      out     positive   Serial Command data
   3    +7V      -       -          +7.6V CD-ROM Drive Power
   4    GND      -       -          Signal Ground
   5    +3V      -       -          +3.5V System Power
   6    SEL-     out     negative   pad/memory select
   7    CLK-     out     negative   Serial Clock
   8    -        -       -          no use
   9    ACK-     in      negative   Acknowledge(open drain)
-----------------------------------------------------------------------

- Memorycards with lcd/led displays doesn't work ?

External powersupply instead of parallel port +5V pullup may help.
I have two memory cards, bigger is a 12 page lcd-display card (MADCATZ),
it doesn't work with my A4000 (less power form parallelport),
but it works on A500 and A1200 (exactly same interface in all cases).
My 1mb memorycard (JOYTECH) works fine in every Amiga that I've tried.
I noticed that one 24 page JOYTECH card and one 1mb BLAZE card uses 7.6V pin.
To check if your card uses 7.6V line, open it with a proper tool and examine
if there is components connected to pin 3.

If you use external powersupply for this hardware, DO NOT CONNECT it to
pin 14 of parallel port, here is table to make correct voltages if you
use LM317 or LM317LZ. 
External powersupply voltage should be about 9V-18V if you want to get 7.6V.
I don't recommend this, because if something bad happens (short circuit),
you may burn your memorycard.. make it at your own risk..
Using parallel port pin 14 is ´very´ safe because of low current supply <100mA.. 


pinouts            .-----.
                   |LM   |  1 - Adjust
   text side of    |317  |  2 - Out
   LM317           |LZ   |  3 - In
   or              `+-+-+´
   LM317LZ          | | |
                   1 2 3


LM317LZ is meant for small currents (about 100mA or less)


      .-------.               3.6V (pin 5)   |    7.6V (pin 3)
---in-| LM317 |-+-out---      R1    R2       |    R1    R2
      `---+---´ |             270   470      |    270   1370
          |     R1            330   560      |    330   1680
      adj |     |             390   680      |    390   2000
          `-----+             470   820      |    470   2400
                |             560    1k      |    560   2800
                R2                           |
                |                            |
                |                            |
              GROUND

For more information of LM317 check www.national.com and get correct PDF-files.

My advice is 'get a memorycard that uses only little bit 3.6V power.'
Don't ask me which cards combatible, I haven't tried many of them..

               
POSSIBLE PROBLEMS

- Memorycard doesn't accept saves in PlayStation ?
  Sometimes directory block gets in confusion, example when you
  disconnect it while it's saving (in a psx)..
> Format it (with this interface)

>Try slower speed if your uploads aren't good.
>I had to set speed very slow with my 060-50MHz when uploading.






HISTORY

v0.05 - 26-05-1999 - first release

v0.06 - 27-05-1999 - loading .psx files is now possible
                   - slower transferspeeds possible
                     (uploading was too fast with 060 after compiling..)

v0.07 - 31-05-1999 - included AMOS-source, fixed a little bug




For more information, search for 'psx memory card hack hardware' or something

or try following URLs  http://www.ronin.net/~mackys/psxmemcard/
                       http://www.ronin.net/~mackys/psxmemcard/ps-eng2.txt
                       http://www.classicgaming.com/epr/

Thanks for the web site makers




CONVERTING SAVES

I modified a couple of NTSC-saves to PAL-saves using a HEX-editor.
Just change the product code at the directory block and XOR code.
Product code is that BESLES-, BASLUS- or something at savenumber*$80..




FUTURE

- Support for different screenmodes
- More functions, no need to save whole memcard at a time




Janne Lumikanta
jel@netti.fi
