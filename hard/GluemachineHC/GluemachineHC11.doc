
************************************************************
*                            \|/                           *
*                            @ @                           *
*------------------------ooO-(_)-Ooo-----------------------*
*                                                          *
*                      GluemachineHC11                     *
*                                                          *
*----------------------------------------------------------*
*                                                          *
*       a simple controller based on Motorola 68HC11       *
*          © 1995 by Lars 'Gluemaster' Malmborg            *
*                                                          *
*                          FreeWare                        *
*                                                          *
************************************************************



                      Introduction 
                      Features     
                      Construction 
                      Software     
                      Bugs         
                      Author       
                      History      
                      Future       


Introduction
------------

This is a hardware project to build a simple yet usable
single-chip computer. The GluemachineHC11 is not at all as
complex as the other similar controllers around (MiniBoard,
HandyBoard, F1-Board, ...) and is therefor cheaper and
easier to build. It is contained on a 85x85 mm PCB.
The trade off is most significantly the drivers for step
motors. My motivation for this project was to make a small
tool to take with me that could do some neat flashing and
such. Some of the things I've done so far is supplied here.

Further information on programming the 68HC11 can be found
in Motorola's books on the issue and from the 'Introduction
to 6811 Programming' by Fred G. Martin, which I really
recomend you to read. The latter can be found via anonymous
ftp on 'cherupakha.media.mit.edu', where you also can find
loads of other related stuff concerning 68HC11.



Features
--------

 * Simple to build. Single-sided PCB.

 * Easy to use. On board RS-232 interface. The processor
   has RAM and EEPROM built in and is programmable directly
   through the serial port. (Only an assembler and a simple
   download program is necessary.)

 * All the goodies in the Motorola 68HC11 right at your
   fingertips. A/D converter, digital I/O, timers, edge
   counters, SPI and strobed parallel ports.



Building
--------

N.B. I assume you have the knowledge in all steps involved
in making the board.
Therefor I won't get into any details at all.

First of all you will have to make the PCB.
There is a PostScript file included called 'PCB.ps' which
is what you need to make the mask for the PCB.

Then you will have to get the Components.

Solder it together and connect it to the serial port of
your host computer.

The pins of the ports on the board are arranged as follows:

   Port A,B,C            Port D                Port E

   -------                                     -------
  |       |                                   |       |
  |D6  D7 |                                   |D0  D4 |
  |       |              -------              |       |
  |D4  D5 |             |D4  D5 |             |D1  D5 |
  |       |             |       |             |       |
  |D2  D3 |             |D2  D3 |             |D2  D6 |
  |       |             |       |             |       |
  |D0  D1 |             |D0  D1 |             |D3  D7 |
  |       |             |       |             |       |
  |G   V  |             |G   V  |             |G   V  |
  |       |             |       |             |       |
   -------               -------               -------



  Bus extender          RS-232                Analog Ref.

   -------               -------               -------
  |       |             |       |             |       |
  |G   E  |             |G   RxD|             |G   VRL|
  |       |             |       |             |       |
  |R/W AS |             |G   TxD|             |V   VRH|
  |       |             |       |             |       |
   -------               -------               -------

This is all summarized on a small sticker which fits on the
board between the processor and PortB - PortE. It is an
EncapsulatedPostScript file called 'Sticker.eps'.

Remeber to mark where the G and V is on the connector so
you won't screw things up by connecting the wrong way.



Components
----------

I live in Sweden and order from ELFA. I have supplied their order
number where such is motivated.

Article    Component                        Amount

            Resistor 10kOhm..................5
            Resistor 1-20MOhm................1
            Capacitor 25pF...................2
            Capacitor 220mF (Polyester)......1
            Capacitor 1uF (Polyester)........1
            Capacitor 4.7uF..................2
            Capacitor 10uF...................3
 74-504-48  X-tal 8MHz.......................1
 42-054-07  Battery connector 1.3mm..........1
 35-655-04  Button switch (Reset button).....1
 35-214-08  Switch (Mode switches)...........2
            2-pin DIP-switch.................1
 43-708-70  Connector array 2x20 (Cutable)...2
 73-023-26  MAX232CPE (RS232 converter)......1
 73-090-40  7805 (Voltage regulator).........1
            MC68HC11E2FN (Any 52-pin PLCC)...1


You will also need som other stuff to get going...

* All the stuff to make the PCB. These depend on what method you
  choose. Single sided is enough.
* Some connectors to connect to the board.
* (25-pin) connector to connect the board with your computer.
* ...


ELFA (Sweden+rest of the world):
Orders     +46-8-735 35 35
Fax orders +46-8-730 30 88
Telex      104 79 ELFA S   (They really ARE reachable! :)
Mail       ELFA
           171 17 SOLNA
           SWEDEN

ELFA (Norway):
Orders     800-101 35
Fax orders 800-101 36


Computer
--------

You need a host computer with an RS-232 port to program the
board. Furthermore will you need an assembler and a simple
download program.


Assembler
---------

There are several ways to create code for the 68HC11.
For the Amiga I must recommend ADev11 by Stan Burton.
It is a complete development environment for the 68HC11.

Another environment for the Amiga is the HC11Dev by Richard
Karlsson, which contains HitAsm and HitMon11. It is an
assembler and a kind of on-line debugger.

Furthermore there is Motorola's AS11 ported to Amiga by T.
Grover.

For PC-clones there are, among others, AS11, and the same
goes for UNIX-clones and MacDonald's I believe.

You will have to see for yourself what you can find for
your platform. Look for 'Motorola', 'HC11' or '6811'.


Download
--------

The downloader in ADev11 environment is called 'HCLoad'.
Motorola's own is called dlm11 and is ported to Amiga by Henner Bartels.


ADev11
------

ADev11 is a complete development environment containing
C compiler, assembler, linker, librarian, simulator and
downloader for the Amiga. It is maintained and partly
programmed by Stan Burton, with assistance and cooperation
of a number of people and it is freely redistributable.
Just get it! Got it? :)


Software
--------

Here is a little test program which reads the serial port
and writes out the recieved character on a LCD screen on
Port B and write the recieved data on the serial line five
times.
The program uses two link libraries made by me. One
includes setup, read and write of the serial port and the
other is an interface to the LCD display. The LCD display
runs in 4-bit mode with the 68HC11 to avoid hogging more
than one port. All this is done in the ADev11
environment and should be quite easy to port to any other
assembler you might prefer, or at least state an example
of what it might look like when programming assembler for
the 68HC11.


                      Test      
                      SerLib    
                      LCDLib    


Include files used in Test:

                      hc11reg.i 
                      Ser.i     
                      LCD.i     


GluemachineHC11
---------------

The GluemachineHC11's main part is a Motorola 68HC11.
The one I've used is 68HC11E2 which contains 2kbytes EEPROM
and 256 bytes of RAM. The Board is quite handy for most
small projects. The picture contained is of a Board of v1.0,
a battery and a 7-segment display, with suitable driver
electronics, fitted on Port B.
Other expansions are in production right now, so if there
is good response from this release, it might also see the
light.


Future
------

Please let me know if you are interested in expansions for
this piece of hardware. The future is only up to you. If I
won't get any response, I will drop public availability of
further developments.

Right now I have:
 * a simple 7-segment card. (As seen on the Board.)
 * a soldering socket for analog input.
 * a MIDI interface. (IN, OUT, THRU)
 * a Bus extender. (To get the full bus for further
   expansions of addressable periphals such as more RAM,
   EPROM, sound chips and so on.)

Planned in the (near) future is:
 * IR sensor and transmitter.
 * RAM, EPROM and Sound generation through 6581 (SID) on
   the expanded bus.
 * Unwired communication for RC boats. (Not NEAR future but
   nevertheless! :)


Bugs
----

No known bugs...
The circuit has been tested fairly well without any sign of
any fault so there doesn't seem to be anything seriously
wrong.
I take no responsability what so ever for your equipment,
healt or whatever!


Author
------

The GluemachineHC11 is designed by Lars Malmborg using an
Amiga 4000. I would really like (make that 'demand' :) to
hear your comments concerning this piece of hardware and
software.

I can be reached at:

  email: glue@df.lth.se
         dat93lma@ludat.lth.se

         or

  snail: Lars Malmborg
         Nobelvägen 147C
         212 15 MALMÖ
         SWEDEN

I can also be found on www:
         http://www.ludat.lth.se/~dat93lma


History
-------

v1.0 - No public realease. Only for my own testing testing.

v1.1 - This text.

     - Added a switch to disconnect the Rx and Tx from
       MAX232 so it won't interfere with the signal on the
       PortD connector.

     - Cutified the layout for a nicer appearance! :)
