 From: Tom Larson                            Date: 10-06-92  01:18
   To: All                                   Msg#: 10459 -> 11568
Subj.: HST upgrade (pt1)
 Area: Fido - USR HST Modem         

[*]HST Modem Upgrade
"""""""""""""""""""" by Bill Yung
   [W.YUNG1]



          >>> UPGRADING AN HST ONLY MODEM TO DUAL STANDARD <<<
          """"""""""""""""""""""""""""""""""""""""""""""""""""

PLEASE REMEMBER!   You are responsible for any damage or liability
""""""""""""""""   when you make any modifications or upgrades to
your equipment. Also keep in mind that opening your computer may void
your guarantee. If you are unsure of your ability to take on a
hardware project, find someone who isn't.

GIF ILLUSTRATIONS   To help you with this upgrade, you can find a
"""""""""""""""""   series of GIF illustrations by the author in the
GEnieLamp RoundTable on page 515. (Keyword: GENIELAMP)   Download:
HST_GIF.ARC

                               [*][*][*]

A v32.bis SOLUTION!   Times change quickly in the world of high-tech
"""""""""""""""""""   electronics and the world of telecommunications
is certainly no exception. It wasn't long ago v.32bis was conceived.
Now, with the advent of modems supporting this type of modulation at very
affordable prices, new high speed users are coming on-line faster than ever
before. In the past, US Robobtics dominated the high
speed market with their HST modulation. Gradually, the tide seems to be turning
and HST users are finding themselves unable to connect at high speed with the
increasingly popular v32.bis modems. If you've found yourself in this
predicament, read on and you may find an
inexpensive solution to your plight.


The Upgrade  The upgrade about to be described is not possible with
"""""""""""  all HST only modems. The particular upgrade pertains
only to the newer model Courier HST 14.4 modems. The newest 16.8k
modems are quite different from the previous 14.4 models and I have
not had the opportunity to investigate the possibility of performing
a similar upgrade on those nor on any older models.  Refer to the
graphic illustration to determine if you own an HST model suitable
for this upgrade. I have personally performed this upgrade and have
verified it's reliability on my own Courier HST. The largest benefit
of doing this upgrade is the substantial savings involved. The value
of this upgrade is somewhere around $300-$400 (based on the cost of a new
v.32bis unit); however, the cost of required materials is approximately $60. If
you are handy with a soldering iron, the entire
process should take about 8 hours.


    The most difficult part of the operation was finding parts
sources.  I was able to obtain everything required in about 1 week. I was
informed the main DSP (Digital Signal Processor) chip could take up to 12 weeks
to be delivered since it is a "highly allocated" part.
This did not prove to be the case as it showed up a mere 5 days after
I placed the order. Hopefully, everyone else will receive the same
surprisingly fast delivery. I'll include the sources for all
necessary components below for your convenience. Just to clarify
USR's position on the matter of parts procurement: They will not
assist you in any way. They do not sell parts.
In fact, there is no upgrade kit available for the type of modem to
which this procedure is applicable.  USR will upgrade the unit for a fee of
$350according to Mark Eric of HST. This was the only information he was willing
to offer.


How Dey Do Dat?   The HST modulation is asymmetrical. Data travels
"""""""""""""""   at 14.4k bps in one direction while the back channel
proceeds at 450 bps. In order to serve as a v.32bis modem, we must install th
necessary components to provide for 14.4k bps operation in both
directions. There are illustrations to accompany this text and they
do aid in determining if you have an appropriate model and in finding
the correct position to install the new chips. In the event you are
unable to obtain the graphic portions of this article, I will attempt
to give a complete and accurate enough description to facilitate the
successful completion of the project without them.

    The first step is to open the case by removing the rubber feet
at the rear of the case and the two phillips screws beneath them. The case can
now be opened. You are now looking at the guts of one the
best modems in the world. What? You're not impressed? Try removing
the metallic shield that isolates the digital from the analog. There,
that's better. The area you've just revealed is the focal point of
our work and is shown in detail in Figure 4. Immediately noticeable
should be several spaces suitable for mounting the necessary
circuitry. If there are no unused spaces, you don't have the proper
model for upgrading. Welp, it was worth a shot, huh? Thank you for
your patience in bearing with me this far. I bid you farewell. If you do notice
the aforementioned spaces, you're about to become the proud owner of a USR Dual
Standard modem. As you further inspect the unit,
you will notice the pc board is well marked. There will be very
little doubt concerning where the parts are to be mounted. If you
notice empty spaces that do not correspond to the details I'm about
to present, you probably have an older model. Drop me a line on GEnie
and maybe we can come up with a solution.


    Some desoldering is required to clear the holes for mounting our
new parts. This can best be done with a desoldering iron. Radio Shack
carries one for under $10 that does a good job. I would also
recommend the use of desoldering braid for the more stubborn spots.
This too is available at any local electronics shop, Radio Shack
included. The task of clearing the solder out of all the necessary
holes is the most tedious portion of this upgrade as it involves
clearing a couple hundred holes. As desoldering goes, it's a
straightforward operation because there are very few paths on the
bottom side of the pc board. In light of this fact, every effort
should be made to clear the holes from the bottom so as to avoid
damaging traces.

    All of the desoldering having been completed and the pc board
ready for the new parts, refer to the following parts list with
associated pc board silkscreen labels. If you don't have the graphic
portion of this article, refer to these pcb labels to determine the
correct location for parts placement.


A Word Of Caution   Before installing an IC pay special attention
"""""""""""""""""   to it's orientation as marked on the pc board.
Unlike many circuits which have all chips oriented in the same
direction, this circuit follows no such convention. Pay particular
attention to the new DSP which is rotated 90 degrees from the
existing DSP.


PCB label    Description          Source          Part #       Pric
"""""""""    """""""""""          """"""          """"""       """""
             68 pin PLCC socket   Easy Tech        PLC68        2.29
U206         T/I 33MHZ DSP        Arrow       TMS320C25FNL33   25.00
 L8          6.8 uH RF Choke      Easy Tech        CH68         1.29
 U207-U208   8k 25ns Static ram   Easy Tech      6264BP25       8.25
 U209-U210   Octal buss xcvr      Digi-Key       74HCT245        .77
 U211-U212   Octal buffer/drvr    Digi-Key       74HCT541        .74
 R201,2,4    10K resistors        Digi-Key       P10ke-nd       5.99
 Cap Type 1  .01 uF SMD caps      Mouser      140-CC501B103K     .49
 Cap Type 2  .1 uf SMD caps       Mouser      140-CC502B104K     .69
 Cap Type 3  100pf SMD cap        Mouser      140-CC501N101J     .35

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
Capacitors
""""""""""
Type 1 C201,203,211,213,215,217,223

Type 2 C204,212,214,216,218,221,222

Type 3 C224


Some Notes About Suppliers   The most important chip is the DSP. It's
""""""""""""""""""""""""""   by far the most expensive and the
hardest to find. I found a local Texas Instruments dealer who would
order them for me at ten dollars each but I would have to buy 20 of
them. I also found them in stock at Hamilton Avnet but there is a
$100 minimum order. Arrow Electronics is a national distributor with
a $25 minimum and this turned out to be the best source for a single
part. Even though they did not have the part in stock and warned of a long
delay, the chip arrived within a week in a 3X1X1 box. No, not 3 inch by 1 inch
by 1 inch. Three feet by 1 foot by 1 foot! These guys really know how to pack a
chip. The packaging included a large,
military spec desiccant, a humidity indicator, static shielding
barrier film (with label indicating relative humidity when opened), a three
footplastic chip carrier and lots of packing popcorn. Wow! Needless to say,
wheninstalled, the chip worked fine.

     Supplier                    Phone Numbers           Terms

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
   Arrow Electronics            1-800-321-3837        $25 minimum
   Easy Tech                    1-800-582-4044         no minimum
   Digi-Key                     1-800-344-4539        <$25 = $5 fee
   Mouser                       1-800-346-6873        <$20 = $5 fee


Substitutions   The pc board is designed to accept surface mount
"""""""""""""   resistors and capacitors. These are sometimes hard
to obtain in small quantities.  The $5.99 price for the 10k resistors
representsthe price for 200 of them.  Even so the plastic tube they
came in is no bigger than my little finger.  Although they're really
tiny, I had little trouble handling them and mounting them with
conventional equipment.  It might not be a bad idea to substitute
conventional resistors and capacitors of the appropriate values for
the surface mount devices.  Such substitutes can be found at any
local electronics shop. There is no real space restriction to prevent
you from using the more common (albeit much larger) parts. If by
chance you have trouble finding the 6.8 uH rf choke, you may place a jumper
fromL7 to provide the necessary B+ to the IC's.

Finally, The Fun Part   Reassemble the modem and type ATI7 from your
"""""""""""""""""""""   favorite terminal program. The modem should
                        respond with:

ATI7 Configuration Profile...

Product type           External
Options                HST,V32
Clock Freq             16.0Mhz
Eprom                  64k
Ram                    32k

Supervisor date        03/05/91
IOP date               10/11/90
DSP date               03/04/91

Supervisor rev         3.0
IOP rev                1.3
DSP rev                10

OK

     Did it work? Are you leaping with glee? Do I detect a tear of
joy in your eye? I thought so. Congratulations. You've done a fine
job. You may now be able to sell your modem for almost what you paid
for it.  Isn't that an enchanting thought? Thanks for coming along
for the ride and have fun with your new dual standard.


Testing   There's only one command set option needed to enable the
"""""""   v.32bis handshaking. It's ATB0. Change this parameter and
write it to NVRAM.  From now on, your modem will attempt to negotiate
a v.32bis connection with any modem it dials. If you call another
dual standard, you will connect as a v.32bis, NOT HST. Therefore, you may want
to change back to ATB1 when dialing duals. When dialing HST only modems, an HST
connection will be made after a brief attempt at v32.bis.  If you have trouble
making a v32.bis connection, try dialing the GEnie 9600 line in your area. I've
experienced no trouble
connecting with GEnie at high speed.


WHAT? It Doesn't Work?   Here's some things to try if you didn't
""""""""""""""""""""""   achieve immediate success:

     If the modem is completely dead:

     Check the fuse. If it's blown, there's a reason why it blew.
Don't just replace it and try it again. Try and find the cause of the trouble
bylooking for

    1) Shorts across leads of any capacitor.
    2) IC's which may have been installed with incorrect orientation.
    3) Globs of solder left from desoldering which may be shorting.
    4) A broken trace in a part of the modem you shouldn't be
       touching in the first place. Remember, we're adding a new
       circuit, not tampering with the old ones.


     If the modem lights up and echoes back characters but doesn't
show HST,V32 in the second line of the ATI7 response:

    1) Type ATI2 from your terminal program. This checks the ram.
       you now have two banks of ram and should subsequently receive
       two OK's as a response. Like this:
ATI2
OK

OK
       If you receive the correct response, the trouble is not in
       your ram. If you do not receive two OK's, make sure you have
       35ns or faster static rams.

    2) Did you remember to install L8? If you don't have a 6.8uh
       rf choke, did you install the jumper properly? The jumper
       should extend from the lead of L7 that is farthest from the
       edge of the modem to the through hole for L8 that is likewise,
       farthest from the edge.

    3) Did you install the DSP correctly in it's socket? Remember,
       it does not face the same way as the existing DSP.

    4) Did you make a parts substitution other than using
       conventional instead of SMD resistors and capacitors? For
       example:
       Did you use 74LS541's instead of 74HCT541's?
    5) Nearly all connections are made on the top side of the pcb.
       check the legs of the chips on the top side to verify the
       establishment of a good solder joint.
    6) Also check for the items mentioned above in the "Completely
       Dead" section.


    Hopefully, any problems will be resolved using these methods.
If not, have yourself a good long cry because you trashed a $600 modem and your
wife will never let you buy another in a million years.  She may even
confiscateyour tools to prevent you from destroying anything else around the
house. (And we couldn't blame her one bit)
Go ahead, get it out of your system. It's not good to keep that kind
of emotional loss all bottled up. Okay, alright, enough of that. Get
a grip on yourself. Take a couple deep breaths. Chant your mantra.
Relax.....

    Just kidding. In reality, if you've exhausted every other option,
leave me e-mail on GEnie and I'll try to bail you out but I can't be
responsiblefor your actions or the quality of your work. Take your time when
youdo this upgrade.  It's not a race. There is no prize
for he who completes it the fastest. If you absolutely can't live
without a modem for even one day (like me), do the desoldering one
night and the soldering the next. It took me about 6-8 hours to do this, most
ofwhich was spent desoldering.


Performance   I'm a relative novice to v.32bis so I'm not sure how
"""""""""""   the modem should perform but I have noticed some
shortcomings in the v.32bis type modulation. First of all, there is
one bbs with which I have trouble making a connection. The problem is
intermittent. Usually when I DO have the trouble the modem will hang up while
negotiating error correction. As soon as the ARQ light comes
on, I get a NO CARRIER.  This doesn't happen all the time and only
with that one bbs.  (The Woodworks. Thanks, Tim) Secondly, the modem
realizes cps rates around 1300 even though the result string
indicates I'm connected at 14400/V32. With HST modulation, 1650 cps
is typical.  Even so, 1300cps is noticeably faster than
280cps. (To say the least!) Other than that, I'm just ecstatic over
the whole episode.


Acknowledgements   I didn't figure this out without help from others.
""""""""""""""""   Those who contributed know who they are and I wish
to thank them sincerely.  Thanks to Atari for making a computer for
those of us without patience, money or a doctorate. To those who
offered nothing but disinformation and discouragement, I still think
you make the best modem in the world. With that said, I have no
further axe to grind and nothing nice to say either, leaving me with
no alternative but to terminate our little chat....

                                               -Bill Yung


----------------

I haven't tried this (my HST is too old, I believe this will work only for
square LED models). It came from the GENIELAMP online magazine and should be
fairly credible. I wouldn't suggest trying this unless you know what you are
doing however.

