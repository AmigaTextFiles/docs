@database BBSwitch.guide
@master BBSwitch.guide
@$VER: 1.0
@author "Remi Lenoir"
@(c) "(C) Copyright 1995 Remi Lenoir"

@node "Main" "Electronic Monitor Switch"


                               BBSwitch Rev 1.0

           An electronic monitor switch for the A2386SX BridgeBoard

                        (C) Copyright 1995 Remi Lenoir


                               THIS IS @{fg shine}FREEWARE@{fg text}


        Contents 

       @{" Distribution            " link "Distribution" 0}       distribution

       @{" Introduction            " link "Introduction" 0}       about BBSwitch
       @{" Features                " link "Features" 0}       why it is cool
       @{" Requirements            " link "Requirements" 0}       what you need to use it
       @{" How it works            " link "How it works" 0}       the electronic side
       @{" How to build it         " link "How to build it" 0}       advices
       @{" Schematics              " link "vga150.iff/main" 0}       here they are
       @{" SXServ                  " link "SXServ" 0}       a Janus upgrade
       @{" Credits                 " link "Credits" 0}       ;-)
       @{" Author                  " link "Author" 0}       who ?
@endnode

@node "Distribution" "Distribution"
@{b}Distribution@{ub}

BBSwitch is FREEWARE. It is not public domain. The author gives permission for
BBSwitch to be freely distributed providing that copying charges remain in the
same range as Fred Fish and that no modification is made to the original
distribution.

If you want to include BBSwitch in a commercial product, please contact me.
@endnode

@node "Introduction" "Introduction"
@{b}Introduction@{ub}

BBSwitch is an electronic monitor switch designed to allow an A2386SX
BridgeBoard, equiped with a VGA card, and an AMIGA to share the same monitor.
The switch is controlled by the 4 pin mini din connector of the BridgeBoard
that is basically a digital output port whose state is software selectable.

The software provided by Commodore doesn't use this feature of the BridgeBoard
but a software called @{" SXServ " link "SXServ" 0} does.

Although it was designed to be connected to an A2386SX, it can also be used
with other devices if you can provide an interface similar to the A2386SX (a
+5V power supply and a TTL compatible signal) and write the software for it.
@endnode

@node "Features" "Features"
@{b}Features@{ub}

@{u}GENERAL@{uu}

     - 2 VGA inputs (high density 15 pin connectors)
     - 1 VGA ouput (high density 15 pin connector)
     - 1 Power/Control input (4 pin mini-din connector)
     - No external power supply required
     - Fully electronic design, no relays


@{u}VIDEO@{uu}

     - 90 Mhz bandwidth
     - Direct drive of 75 ohm loads
     - +-2V input range
     - +-2V output swing
     - Positive, negative or mixed TTL synchronization signals


@{u}POWER/CONTROL@{uu}

     - Compatible with Commodore A2386SX 4 pin mini din connector


@{u}SOFTWARE@{uu}

     - Compatible with @{" SXServ " link "SXServ" 0}
@endnode

@node "Requirements" "Requirements"
@{b}Requirements@{ub}

A typical BridgeBoard system:

  - Commodore A2386SX BridgeBoard with a VGA card
  - A 23 to 15 pin adapter for the AMIGA video output
  - A monitor that accepts both the AMIGA and the PC video scan rates
  - The @{" SXServ " link "SXServ" 0} software
  - Kickstart 2.04 (required by SXServ)

Note 1:

SXServ is the only software I am aware of that can control the mini-din
connector switch signal, that's why it is part of the requirements.

Note 2:

The only basic requirement is a device with a 4 pin mini din connector similar
to the one of the A2386SX and the software for it. Nothing prevents you from
using BBSwitch to switch other sources with another equipment than an AMIGA.
@endnode

@node "How it works" "How it works"
@{b}How it works@{ub}

The SwitchBox is so simple that it barely needs any comment. Video
multiplexing is done by a chip designed to do just that: select between two
RGB video sources and outputs the result directly to a 75 ohm load. The
synchronisation signals are standard TTL signal that are switched with a TTL
multiplexer. The video multiplexer chip requires a -5V supply so a DC-DC
converter is used to make it from the +5V line so that the SwitchBox doesn't
require anexternal power supply.


@{u}VGA SIGNALS@{uu}

Here is a quick look at the VGA signals.

  Pin   Name     Description

   1    R        Red component
   2    G        Green component
   3    B        Blue component
   4    ID2      Monitor IDentification Bit 2
   5    GND
   6    R GND    Red ground return
   7    G GND    Green ground return
   8    B GND    Blue ground return
   9    Key      Blanked hole
  10    S GND    Sync ground return
  11    ID0      Monitor IDentification Bit 0
  12    ID1      Monitor IDentification Bit 1
  13    HS       Horizontal Synchronization (TTL level)
  14    VS       Vertical Synchronization (TTL level)
  15    NC       Not used


@{u}VIDEO@{uu}

The multiplexing is performed by one chip, a MAX465 video switch from MAXIM.
This chip has two sets of three inputs which you can choose from using the A0
pin. If A0 is low (TTL level) then the outputs will carry out the R1, G1 and
B1 signals otherwise (A0 = TTL high) it will carry out R2, G2 and B2.

The inputs signals are 75 ohm terminated and the SwitchBox expect its outputs
to be 75 ohm terminated too. Note that standard monitors and TV sets are 75
ohm terminated and that some monitors (mainly the ones aimed at professional
users) are not or offer the choice through a switch.


@{u}SYNC@{uu}

The sync signals are switched using a standard TTL multiplexer. As a
consequence there are no restrictions on the type of sync signals (negative or
positive) so any video source that outputs TTL level signals should work. The
47 ohm resistors are here to protect the chip from short circuits. 


@{u}SWITCH SIGNAL@{uu}

This signal comes from the 4 pin mini-din and is pulled-up so that when no
signal is received (no cable or BridgeBoard removed from the computer), the
AMIGA is connected to the monitor.


@{u}MONITOR IDENTIFICATION@{uu}

The VGA connector provides three pins that can be used by the graphics card to
determine what frequencies/scanning method the monitor can accept. ID0 and ID1
must be respectivly grounded and unconnected to avoid the card to switch to
black/white mode. ID2 can be unconnected or grounded.

Some boards (like my ATI VGAWONDER+) use another method to determine the type
of monitor. They look at the R,G and B signals and if they are loaded
(connected to a 75 ohm load) they switch to color mode otherwise they switch
to black/white mode. This happens for example when you have a mechanical
switch box and power-up the machine with the switch in the AMIGA position. The
VGA card doesn't see any load and switch to black/white mode. You have then to
reset the BridgeBoard with the switch in the PC position to get color.


@{u}VARIOUS@{uu}

You might want to add an audio switcher as well, if you use both the AMIGA and
the PC to produce sounds. This, however, can be done by a cheap audio mixer.


@{u}POWER@{uu}

The SwitchBox draws its power from the A2386SX thru the mini din connector.
The BridgeBoard provides a +5V power supply but no negative voltage as
required by the video multiplexer chip. The choice mas made to use a DC-DC
converter to make the -5V so that the SwitchBox is autonomous and doesn't
require any external power that would lead to another connector, another
cable, ... The total power consumption should be around 100mA due to the video
multiplexer chip that draws around 50mA on both of its power supply. Note that
this is an estimation derived from the data sheets, not a measurement.
@endnode

@node "How to build it" "How to build it"
@{b}How to build it@{ub}

The prototype was made on a development board with the components connected
together using wire-wrapping type wire. I didn't -and don't- want to make a
PCB as it is too much time and pain for such a simple board.


@{u}Components:@{uu}

The MAXIM chip is not a very common item but any good electronic store should
be able to order it for you. Regarding the DC-DC converter, the prototype uses
an ASTEC AA7210 found in an electronic surplus store. It is a -12V converter,
so its output had to be regulated to -5V thanks to a 7905. Any other device
that is capable of delivering at least 50ma should do the job. The rest of the
components should not be a problem.


@{u}Box:@{uu}

The prototype fits in a small beige plastic box whose color is very close to
the A4000 case's color. However this box needs to be drilled and if this is
easy for the mini-din round hole, it is a pain for the VGA connectors holes.
Another option would be to use a standard manual switchbox where only the
mini-din connector would have to be added. It is a lot easier but less sexy.


@{u}VGA cables:@{uu}

They are standard high density 15 pin male-male cables.


@{u}MiniDin Cable:@{uu}

It is a 4 pin male-male cable wired straight (pin 1 to pin 1, pin 2 to pin 2,
etc...). You can use a S-Video cable or a MAC keyboard cable extender. Make
sure pins 1..4 are where you think they are before you connect anything to the
BridgeBoard as a bad connection (short circuit, etc...) could damage your
system.

@{u}Precautions:@{uu}

I didn't take any particular precautions other that having the decoupling
capacitors close to the chips and using a correct gauge for the power supply
wires.
@endnode

@node "Schematics" "Schematics"

@endnode

@node "SXServ" "SXServ"
@{b}SXServ@{ub}

SXServ is a "useful commodity that shall expand the capability of Commodore's
janus bridgeboards" by Frank Mariak. It is the only software I know that can
control the 4 pin mini-din connector of the Commodore A2386SX.

SXServ is part of a package called JanusTools that also provides an enhanced
version of DosServ.

The JanusTools archive is available on aminet in the misc/emu directory as
JanusTools.lha. As of this writing, the latest version of SXServ is V1.6 and
is also available in misc/emu as SXServ16.lha.
@endnode

@node "Credits" "Credits"
@{b}Credits@{ub}

I would like to thanks all the people who help and share informations
regarding the BridgeBoard, like on the c.s.a.emulations Usenet group.

 Amiga is a registered trademark of Commodore-Amiga, Inc.
 BridgeBoard and Janus are trademarks of Commodore-Amiga, Inc.
@endnode

@node "Author" "Author"
@{b}Author@{ub}

I regulary check the comp.sys.amiga.emulations newsgroup of Usenet.  Post any
comments/suggestions/questions there and you will hear from me.
@endnode

