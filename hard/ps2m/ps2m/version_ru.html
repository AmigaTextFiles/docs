<html><head><title>Ultimate Amiga PS/2 Wheel Mouse Controller</title></head>
<body bgcolor="ffffff" link="ff4040" vlink="ff4040">

<a href="index_ru.html">Оглавление</a>

<h2>Две версии контроллера колёсных PS/2 мышей</h2>

Начиная с <b>версии 1.4</b>, контроллер имеет новую версию схемы - с поддержкой пяти
кнопок.  Но эта версия лишена одной из предыдущих возможностей - аппаратного сброса мыши
путём коммутации питания.  Это было сделано из-за нехватки контактов PIC'а - я не хочу
использовать 28-контактный PIC вместо 18-контактного только из-за не имеющей ценности для
качественных мышей возможности сброса.  Это значит, что новый контроллер не сможет
сбросить мышь, если она повиснет (хотя, в любом случае, Вы можете её сбросить вручную
путём &laquo;перетыкания на лету&raquo;).  Но тем не менее, если Вы всё-таки намерены и
дальше пользоваться дешёвой китайской мышью безо всяких дополнительных кнопок, Вы можете
по-прежнему использовать старую версию схемы.<p>

Для возможности выбора между новой и старой схемой, эта и все последующие версии
настоящей документации будут сопровождаться двумя прошивками:

<ul>
<li>четырёхкнопочная версия с возможностью аппаратного сброса, и
<li>пятикнопочная версия без возможности аппаратного сброса.
</ul>

<font size="+1"><b>Будьте внимательны с соответствием прошивок: каждая
прошивка<br>может быть использована только с соответствующей схемой!</b></font>

<h2>Новая 5-кнопочная версия контроллера</h2>

5-кнопочная версия (жмите <a href="pic/ps2m_5button.hex">сюда</a> за соответствующей
прошивкой) предназначена для использования с высококачественными, &laquo;навороченными&raquo;
и оптическими мышами.  Эта схема не имеет возможности сбрасывать мышь коммутацией питания.
Все прочие возможности контроллера в этой версии сохраняются.  Впрочем, даже если мышь
вдруг и зависла - Вы можете сбросить её &laquo;передёргиванием&raquo; разъёма
&laquo;на лету&raquo;.  Эта версия может быть использована с любыми мышами, поскольку не
имеет ограничений по току потребления нагрузки.<p>

<center>
<img src="ps2m_5button.png" width="502" height="284" alt="Схема 4-кнопочного контроллера">
</center><p>

Начиная с <b>версии 1.5</b>, Вы можете использовать PIC16F627 (628) вместо более старых
PIC'ов.  Этот PIC оснащён внутренним RC генератором, и соответственно не требует
кварцевого резонатора.  Прошивка <a href="pic/ps2m_5button.hex">та же самая</a>.  В результате
Вы можете упростить схему, а в будущем (за счёт освобождения соответствующих резонатору
контактов PIC'а) использовать &laquo;двухколёсные&raquo; мыши и/или имитацию джойстика на
клавиатуре:<p>
<center>
<img src="ps2m_2wheel.png" width="502" height="284" alt="Схема двухколёсного контроллера">
</center><p>

<h2>Старая (теперь - 4-кнопочная) версия контроллера</h2>

Это старая схема (<b>версии 1.3</b>) - жмите <a href="pic/ps2m_mousepower.hex">сюда</a> за соответствующей
прошивкой.  Нет особых причин собирать её сейчас - даже если Ваша мышь иногда виснет, это
хороший повод купить что-нибудь получше :)&nbsp; Эта версия не может быть использована без
изменений для работы с оптическими мышами из-за слабого выхода PIC'а (25 миллиампер против
80-100 миллампер потребления оптических мышей), и она бесполезна для высококачественных
не-виснущих мышей.  Хотя, безусловно, если Вам очень хочется, Вы можете усилить выход RA4 PIC'а
полевым транзистором и работать даже с оптической мышью :)<p>

Несмотря на старую версию схемы, <a href="pic/ps2m_mousepower.hex">новая прошивка</a> теперь
поддерживает четыре кнопки (вместо трёх в <b>версии 1.3</b>).  Это было сделано благодаря
тому, что выход PIC'а соединён с сигналом Fire-0 порта джойстика - сейчас он используется
не только для отключения сигналов колёсика в игрушках, но и для сигнала четвёртой кнопки.
Если Вы будете использовать пятикнопочную мышь в этом режиме, дополнительные кнопки будут
работать как одна.<p>

<center>
<img src="ps2m_mousepower.png" width="502" height="284" alt="Схема 4-кнопочного контроллера">
</center><p>

<h2>Какую версию делать?</h2>

Если Вы не можете решить, какую версию стоит сделать - делайте <b>пятикнопочную версию</b>.
Если Ваша мышь виснет - как упоминалось выше, это хороший повод купить что-то получше :)<p>

<b>ВНИМАНИЕ!</b> Эти две версии ПО-РАЗНОМУ подключены к порту джойстика!
Так сделано по причине необходимости &laquo;подтягивающего&raquo; резистора для входа
fire-1 порта джойстика, используемого для пятой кнопки мыши - линии RA PIC'а не имеют
&laquo;подтяжки&raquo;, и во избежание введения дополнительного резистора fire-1 был
присоединён на RB5.  Fire-0 же был пересоединён на RA4, ранее использовавшийся для
коммутации питания мыши.<p>

<h2>Как доделать старую версию для 5 кнопок?</h2>

Эта доработка для <b>версии 1.3</b> проста: как описано выше, пересоедините RB5 (10
контакт PIC'а) на 9 контакт джойстикового порта (вместо 6 контакта ранее), соедините RA4
(3 контакт PIC'а) с 6 контактом джой-порта, отсоедините его от мышиного разъёма и
присоедините этот контакт (4'ый у разъёма MiniDIN) к земле (например, 5 контакт PIC'а).<p>

Если Вы не хотите дорабатывать старый контроллер - просто используйте
<a href="pic/ps2m_mousepower.hex">4-кнопочную прошивку</a>.

</body></html>
