1. Анализ структурной схемы модуля расширения памяти

1.3. Описание структурной схемы модуля расширения памяти.

  Схема описывает логику подключения НЖМД, модуля памяти SIMM, ПЗУ к системной
шине ПК "Amiga500" на базе микропроцессора MC68000 .Схема включает в себя
следующие блоки: 

* ПК "Amiga500" на основе микропроцессора MC68000;
* блок дешифрации адресов;
* контроллер НЖМД;
* разъем  для подключения НЖМД;
* контроллер динамической памяти;
* блок управления частотой регенерации;
* блок мультиплексоров;
* блок динамической памяти типа "SIMM";
* блок управления ПЗУ;
* блок ПЗУ;
* Микросхема гибкой логики FX740-68;
* разъем программирования микросхемы гибкой логики типа FX740-68;
	
       ПК "Amiga500" на основе микропроцессора MC68000.
	
  В составе периферии компьютера "Amiga500" имеется системный разъем,
состоящий из шин адреса, данных, управления и питания. На схеме показаны
все шины, принадлежащие системному разъему, кроме шин питания. К этим шинам
подключаются  все устройства, обеспечивающие подключение винчестера, памяти
и ПЗУ к компьютеру "Amiga500".
	
	
       Блок дешифрации адресов.
	
  Блок дешифрации адресов служит для распределения адресных пространств
винчестера памяти ПЗУ. Блок реализован на микросхемах DD1, DD2.1, DD2.2
(КР1533ИД7, КР1533ЛИ1). В этот блок заходят старшие адреса (А23, А22, А21)
и сигнал выборки адреса (/AS). Из этих входных сигналов формируются четыре
управляющих сигнала, которые в дальнейшем используются другими блоками для
более точной дешифрации необходимого адресного пространства:

* два сигнала заходят в контроллер динамической памяти и выбирают адресные
  пространства по 4Мб каждое ($200000-$5FFFFF и $600000-$9FFFFF );
* сигнал (/C0 ) заходит в контроллер винчестера и выбирает адресное
  пространство $С00000-$DFFFFF в котором находятся порты НЖМД;
* сигнал (/Е0 ) заходит в блок управления ПЗУ и выбирает адресное
  пространство $Е00000-$FFFFFF в котором находится системное ПЗУ
  ПК "Amiga500";
	
	
           Контроллер НЖМД.
	
  Контроллер НЖМД служит для формирования управляющих сигналов, которые
затем поступают на разъем НЖМД. Он реализован на микросхемах DD2.4, DD4.3,
DD4.4, DD10-DD13 (КР1533ЛИ1, КР1533ЛЛ1, КР1533ИД7, КР1533ИД14, КР1533ТМ2,
КР1533ЛП8). В этот блок поступают сигналы из блока дешифрации адресов (/C0),
с шины адреса (А12,А15-А20), с шины управления (/RESET, RD_WR), с разъема
НЖМД (IRQ). Из этих входных сигналов формируются четыре управляющих сигнала
для винчестера и один управляющий сигнал (/INT2) для системной шины и сигнал
(D15) системной шины данных. Управляющие сигналы /CS0, /CS1, /IORD, /IOWR
используются винчестером для дешифрации и чтения/записи своих внутренних
регистров. Сигнал /INT2 вызывает аппаратное прерывание второго уровня в
ПК "Amiga500".
	
	
           Разъем для подключения НЖМД.

  Этот разъем служит для подключения винчестера с IDE интерфейсом. Он
представляет собой 40-выводный разъем и на электрической принципиальной схеме
обозначен как Х4. Через этот разъем проходят сигналы:
* с шины данных (D15-D0) для обмена данными между ПК "Amiga500" и винчестером;
* c системной шины адреса (А2-А4) для дешифрации адреса внутреннего регистра
  винчестера;
* с шины управления (/RESET) для инициализации НЖМД при сбросе ПК "Amiga500";
* с контроллера НЖМД (/CS0, /CS1, /IORD, /IOWR) для дешифрации и
  чтения/записи внутренних регистров винчестера;
* в контроллер НЖМД (IRQ) для сообщения о необходимости прерывания;
	
	
           Контроллер динамической памяти
	
  Контроллер динамической памяти служит для формирования сигналов, которые
управляют блоками обеспечивающими работу динамической памяти. Он реализован
на микросхемах DD2.3,DD3.1-DD3.4,DD4.1,DD4.2,DD5.1,DD5.2,DD6-DD9,DD13.1
(КР1533ЛИ1,КР1533ЛН1,КР1533ЛЛ1,КР1533ТМ2,КР1533ЛП8,КР1533ИД14). 
  В контроллер поступают сигналы с шины адреса (А21),с шины управления
(/AS, CDAC, /UDS, /LDS, RD_WR), с блока управления частотой регенерации
(REGCLK) и два сигнала с блока дешифрации адресов, отвечающих за выборку
адресных пространств $200000-$5FFFFF, $600000-$9FFFFF. Из этих входных
сигналов формируются управляющие сигналы, которые в дальнейшем поступают:
* в модуль динамической памяти (/RAS1, /RAS0, /CAS3-/CAS0) для управления
  протоколом выборки динамической памяти;
* в блок управления частотой регенерации (CASREG) для сброса счетчика при
  переполнении;
* в блок мультиплексоров (ADR_SW) для переключения старших и младших адресов,
  отвечающих за строки и столбцы динамической памяти;
	
	
	
           Блок управления частотой регенерации.
	 
  Блок управления частотой регенерации служит для выработки сигнала частоты
регенерации для контроллера динамической памяти. Он реализован на микросхеме
DD20 (КР1533ИЕ19). В этот блок заходит управляющий сигнал (Е) системной шины,
который представляет из себя 1/10 частоты процессора MC68000, и сигнал
(CASREG) с контроллера динамической памяти для сброса счетчика во время
очередного цикла регенерации динамической памяти. Из него выходит сигнал
REGCLK в виде коротких импульсов с частотой 1/128 Е (около 5.5кГц).
	
	
           Блок мультиплексоров.
	 
  Блок мультиплексоров служит для формирования мультиплексных сигналов адреса
строки и столбца памяти. Он реализован на микросхемах DD16-DD18 (КР1533КП11).
Мультиплексирование производится из двух наборов сигналов системной шины
адреса (А1-А10 и А11-А20) в один набор сигналов (МА0-МА9) соответственно.
Оно производится в зависимости от состояния входного сигнала ADR_SW
приходящего из контроллера динамической памяти.
	
	
           Блок динамической памяти типа "SIMM".
	
  Блок динамической памяти типа "SIMM" служит для запоминания информации
объемом 8Мб. Устанавливаемый модуль памяти должен поддерживать два
стандартных протокола управления динамической памятью:
1. выборка в виде записи и чтения (/RAS перед /CAS);
2. регенерация (/CAS перед /RAS );

  Модуль памяти вставляется в 72-выводный разъем, обозначенный на
электрической принципиальной схеме как DD19. Через этот разъем проходят
сигналы:
* с шины данных (D15-D0) для обмена данными между ПК "Amiga500" и винчестером;
* c блока мультиплексора (МА0-МА9) для дешифрации строки или столбца;
* с контроллера динамической памяти (/RAS1, /RAS0, /CAS3-/CAS0 ) для
  управления протоколами выборки и регенерации динамической памяти;
* с системной шины управления (/WE) для для управления протоколами выборки и
  регенерации динамической памяти;
	
	
           Блок управления ПЗУ.
	
  Блок управления ПЗУ служит для формирования сигнала выборки ПЗУ. Он
реализован на микросхемах DD3.5,DD3.6,DD5.3,DD5.4,DD13.3 (КР1533ЛН1,
КР1533ЛИ1, КР1533ЛП8).В блок заходят сигналы с системной шины управления
(/RESET) и из блока дешифрации адресов (/Е0). Формируемый при обращении к
адресам $F80000-$FFFFFF сигнал выборки (/ROM_OE) поступает в блок ПЗУ и
обеспечивает поступление информации из него на шину данных.
	
	
	
           Блок ПЗУ.
	
  Блок ПЗУ служит для постоянного хранения операционной системы AmigaOS
размером 512Кб.Он реализован на двух 8-битных микросхемах DD14,DD15 (272000),
обеспечивающих 16-битный поток данных, требующийся для микропроцессора
MC68000. В блок поступают сигналы с системной шины данных (D15-D8 на
микросхему ПЗУ с четными адресами,D7-D0 на микросхему с нечетными адресами),
с системной шины адреса (А1-А18).


           Микросхема гибкой логики типа FX740-68.

  Микросхема гибкой логики типа FX740-68 служит альтернативной заменой
блока дешифрации адресов, контроллера НЖМД, контроллера динамической памяти,
блока управления ПЗУ. На электрической принципиальной схеме микросхема гибкой
логики FX740-68 обозначена как DD21. Данная микросхема позволяет использовать
более широкие функциональные возможности схемы за счет ее большего уровня
интеграции по сравнению с микросхемами средней степени интеграции.

  В случае установки микросхемы гибкой логики типа FX740-68 все микросхемы
выше обозначенных блоков на ПП не устанавливаются. Все сигналы, которые
подключены к трем вышеперечисленным блокам, подключены к микросхеме гибкой
логики типа FX740-68 и выполняют такие же функции. Чтобы обеспечить
дополнительные функции к микросхеме гибкой логики подводятся дополнительные
сигналы D14, /DTACK и /OVR.


           Разъем программирования микросхемы гибкой логики FX740-68.
	
  Разъем программирования микросхемы гибкой логики типа FX740-68 служит для
программирования микросхемы гибкой логики. На электрической принципиальной
схеме разъем обозначен как Х3. Через этот разъем с помощью программатора,
которым может являться как ПК, так и специальное устройство.
