      Do you want 1024 x 1024 pixel x 4 Colors out of ALL colors
             with max. 65Hz (800 lines) on your screen?

This is the ( german :( ) documentation to the schematic of the A2024-Color-Expansion.

The following Text should have been published in the German AMIGA Magazin, but
due to some difficulties to get the Video-Module of the Monitor from Comodore
the haven't printed it yet. Sorry for all people who can't read it.
It really should work, it is rebuildt twice without my help.  If you have questions, phone
or email me.  Have fun!


8<-------------------------------------------------------------------------------------------------------------------------------------------

Farbgrafikerweiterung mit 1024 x 1024 Pixel für alle Amigas [zum Selberbauen]

                            © Thomas Kobler

AMEGAPIXEL

Sie hätten für DTP oder CAD gerne eine höhere Auflösung?  Sie verlieren den
Überblick über die viele Fenster auf der Workbench?  Der Workbench Bildschirm
Ist Ihnen nicht groß genug?  Sie arbeiten darum mit 'Overscan' und
verschiebbaren Screens?  Wenn dies für Sie zutrifft, dann lesen Sie weiter,
dieser Hardwarezusatz ist genau das Richtige für Sie.

Ein Vergleich der statischen Grafikfähigkeiten der Amigaserie (eingeschlossen
A4000) mit den Daten anderer Computer zeigt einen signifikanten Mangel bei der
maximalen Auflösung und Bildwiederholfrequenz (Vertikalfrequenz) der
Bildschirmdarstellung. Jeder [VOBIS-]PC hat unter Windows Pixeldarstellungen von
800 x 600, 1024 x 768 oder, Geräte die preislich mit A3000 und A4000
vergleichbar sind, sogar 1280 x 1024 bei mindestens 60 oder 70 Hz
Bildwiederholrate. Dies stellt, vorallem bei graphischen Benutzeroberflächen
(GUIs), wie dem Comodore Amiga Operating Sytem 2 (kurz CAOS2) mit
hellem Hintergrund, die untere ergonomische Grenze dar. Zudem erfordert die
Verwendung eines Monitors mit einer Bildschirmdiagonale von mehr als 14" eine
höherere Vertikalfrequenz, da sich hier das Flimmern von 50 Hz sehr viel stärker
bemerkbar macht. Leider gibt es zur Zeit nur sehr wenige 'echte' Grafikkarten,
die sich mit der 'graphics.library' des Amiga-OS vertragen und hier Abhilfe
schaffen könnten. Diese Erweiterungen sind entweder sehr teuer oder nur
eingeschränkt kompatibel. Es gibt jedoch einen speziellen Monitor von Commodore
mit der Bezeichnung A2024, der mit einem technischen Trick eine große
Pixelanzahl bietet, aber wiederum nur monochrom arbeitet und für die hohe
Auflösung eine zu kleine Bildröhre besitzt.

Die hier vorgestellte Erweiterung ermöglicht es, mit Hilfe eines Moduls aus dem
oben genannten A2024-Monitor, auf allen Amigamodellen eine Auflösung von bis zu
1024 x 1024 Punkten, beziehungsweise ohne ECS von 1008 x 1024, auf einem
Farbmonitor zu nutzen.(*1) Es gibt hierbei jedoch eine funktionelle
Einschränkung. Grundsätzlich können in der hohen Auflösung nur vier extern
einstellbare Farben, aus unendlich vielen, dargestellt werden, was für den
3D-Look mit CAOS2 aber optimal ist. Weiterhin ist bei 'nur' PAL-Amigas, die
keinen NTSC/PAL-Jumper auf dem Motherboard haben, auch nur eine
Bildwiederholfrequenz von 50 Hz möglich. Alle anderen Geräte können durch
einfaches Umstecken des Jumpers eine Bildschirmgeometrie von 1024/1008 x 800 bei
65 Hz (nachgemessen!) erreichen. Da ein Gesamtbild nacheinander, in mehrere
Teilstücken zerlegt, übertragen wird, eignet sich diese Darstellungsart nicht
sehr gut für bewegte Bilder wie bei Animationen oder Spielen, aber hervorragend
für Textverarbeitung, CAD, DTP und Programmieren mit vielen Fenstern. Die große
Pixelanzahl schlägt sich allerdings auch in einem erhöhten
Grafikspeicherverbrauch (Chipmem) von 200KByte bei 1024 x 800 anstatt nur
40KByte bei 640 x 256 und jeweils vier Farben nieder. Dies kann beispielsweise
auf einem A1000 mit nur 512KByte Chipmem sehr hinderlich sein.

Eine weitere Hardware-Voraussetzung ist natürlich ein Monitor, der mit den
erhöhten Anforderungen zurecht kommt. Es ist grundsätzlich ein
Mehrfrequenz-Monitor (Multisync, kein VGA-Festfrequenz-Monitor) nötig, dessen
Elektronik auf die Bildwiederholfrequenz von 50Hz oder 65Hz und eine maximale
Horizontalfrequenz (Zeilenfrequenz) von 56KHz synchronisieren kann. Dieser Wert
resultiert aus 1000 Zeilen * 52 Bilder/Sekunde oder 800 Zeilen * 65
Bilder/Sekunde zuzüglich ca. 8% für die Ränder der Darstellung und den
Strahlrücklauf. Dies entspricht 768 Zeilen bei 70Hz zum Vergleich mit den im
PC-Bereich gebräuchlichen Angaben. Um die neue erhöhte Auflösung auch
tatsächlich nutzen zu können, muß die Bildröhre des Monitors eine entsprechend
feine Lockmaske mit max. 0,31mm Farbtripel-Abstand (Dotpitch) bei 17", oder
0,28 mm bei 15" und 16" (Flatscreen!) haben. Den Betrieb mit einem 14"-Monitor,
auch wenn solche bei IBM&Co für 1024x768 angeboten werden, halte ich nur sehr
eingeschränkt für sinnvoll. Es ist bei Farbmonitoren dieser Größe und mit
dieser Auflösung praktisch unmöglich, jedes einzelne Pixel überhaupt abzubilden.
Ein anderer Gesichtspunkt ist die Videobandbreite des Monitors. Sie gibt die
höchste Frequenz an, die bei den analogen Videosignalen (R,G,B) übertragen wird
und ist mit für die Schärfe feiner vertikaler Linien verantwortlich. Ein
Mindestwert bei einer horizontalen Auflösung von 1024 Pixeln stellt 50 Mhz dar,
aber geeignet für z.B. CAD oder bei kleinen Schriften sind erst 80Mhz. Diese
Bandbreite ermöglicht die Übertragung der Grundfrequenz und zweier Oberwellen
des Signals einer abwechselnd weißen und schwarzen Pixelzeile, was für einen
ausreichenden Kontrast zwischen hell und dunkel sorgt. ( 1024 Zeilen * 50
Bilder * 512 Farbwechselgruppen oder 'Farbschwingungen' * 3 Grund- und
Oberwellen = 79 MHz)

Nun zur 'soften' Seite dieser Erweiterung. Unter CAOS2 genügte es, die
A2024-Datei in die Schublade 'Monitors' zu ziehen und entweder zu öffnen oder
einen Reset durchzuführen. Dadurch ist dem System der neuen Monitortyp bekannt
und alle Programme können einen Screen mit der hohen Auflösung öffnen. In der
Workbench erreicht man dies mit dem Prefs-Programm 'ScreenMode'. Auch bei viele
andere Programmen, die es zulassen aus der 'Display-Database' des Systems zu
wählen oder die den Workbench Screenmodus kopieren, gibt es nun völlig neue
Ansichten. Ein weiterer Weg die neue Auflösung unter CAOS2 zu nutzen, ist der
Einsatz eines Programmes wie 'ScreenManager', das es ermöglicht, einen neuen
'Default Publicscreen' belibiegen Typs - eventuell auch im 'Shanghai'-Modus - zu
erzeugen, der dann alle neu geöffneten (Workbench)Windows aufnimmt. Ein kleiner
Wermutstropfen sind die nicht ganz korrekten 'inneren' Werte der
A2024-Monitordatei des Betriebssystems. Die Benutzung der
Voreinstellungs-Bildschirmgröße im Prefs-Programm 'ScreenMode' resultiert
leider auch bei NTSC in einem 1024 x 1024 Punkte großen Screen, der aber nicht
vollständig sichtbar und auch nicht verschiebbar ist. Dies liegt wahrscheinlich
an den falschen Werten, die für Minimal-, Maximal- und Visible Size angezeigt
werden. Dieser Fehler ist mit einer festen Einstellung für Breite und Höhe von
1024 x 800 zu korrigieren. Im A2024-Modus gibt es noch eine Wahlmöglichkeit
zwischen der logischen Bildübertragungsrate von 10Hz und 15Hz. Der Unterschied
liegt dabei in der Anzahl der Teilbilder, die übertragen werden:  4 bei 15Hz und
6 bei 10Hz, wobei interessant ist, daß das Teilbild, indem sich der Mauszeiger
bewegt, bevorzugt übertragen wird. Ein etwas seltsamer, aber vielleicht
durchaus erwünschter Nebeneffekt tritt bei 10Hz zu Tage: der Mauszeiger wird
wesentlich kleiner (und feiner) dargestellt, was das Gesamtbild der
Amigaoberfläche noch aufwertet. Etwas anders geht die Software-Installation mit
Version 1.x des Betriebssystems vonstatten. Hier ist es notwendig die
sogenannte Jumpbench, eine neue Workbench mit veränderter 'graphics.library',
'exec.library' und 'intuitiuon.library' einzusetzten. Sie enthält unter anderem
eine frühe Version des CAOS2 Setmonitor-Befehls, ein geändertes
Preferences-Programm und ein Programm zum Anpassen des Workbench-Screens. Diese
Jumpbench wird normalerweise nur mit dem A2024-Monitor geliefert, ist aber auch
von der Firma DIT erhältlich.

Die eigentliche Erweiterung besteht, wie schon erwähnt, aus dem Video-Buffer
Modul eines A2024 Monitors, das von der Firma DIT oder als Ersatzteil von
Comodore erhältlich ist, und einer Platine zur Farberweiterung. Die beiden
Teile können in ein externes Gehäuse eingebaut und mit einem Steckernetzteil
versorgt werden. Als Monitorausgang bietet die
Zusatzplatine einen 15-poligen VGA-Stecker und zur Verbindung mit dem Amiga ein
Kabel mit Sub-D Stecker an den 23-Video-Anschluß. Wer einen A2024
'ausschlachtet', kann für letzteres gleich dessen Anschlußkabel samt
Dämpfungsinduktivität, Zugentlastung und den beiden Steckern verwenden. Für die
Realisierung des Schaltplans ist es nicht unbedingt notwendig eine spezielle
Platine herzustellen. Die wenigen Bauteile sind auch schnell auf einer
Lochrasterplatine zu verdrahten. Findet anstatt des vielleicht etwas schwer zu
beschaffenden 74F245 einen 74ALS245 oder74LS245 Verwendung, wird sich, wegen der
etwas geringeren Geschwindigkeit und Treibereigenschaft der ALS- und LS-Serie,
eine verminderte Abbildungsschärfe ergeben (s.o., Videobandbreite). Die beiden
Platinen der Erweiterung werden durch vier Signalleitungen verbunden, die
allerdings etwas trickreich anzubringen sind. Wie im Schaltplan gezeigt, müssen
zwei Widerstände auf dem Videobuffer-Modul entfernt oder einseitig durchtrennt,
vier einfache isolierte Leitungen angelötet und diese zur
Farberweiterungsplatine geführt werden. Für einen ersten Test benutzt man
vorzugsweise einen nicht virtuellen Workbench Screen ohne Overscan, weil die
2.04 Monitor-Datei für den A2024 ansonsten Funktionsschwierigkeiten hat.
Programme wie 'Nickprefs' und 'LacePointer' muß man außerdem vermeiden, da sie
sich nicht mit der Mauszeigerdarstellung im A2024-Mode vertragen,
beziehungsweise überflüssig sind. Weiterverwenden kann man aber kritische
Programme wie 'BlackBorder' oder 'TagScreens'. Vor dem Einschalten empfiehlt es
sich, die Potentiometer (einstellbare Widerstände) der Farberweiterungsplatine
in eine mittlere Position zu bringen. Der an der Erweiterung angeschlossenen
Monitor sollte nach dem Einschalten die normale Workbench, bei ungünstiger Wahl
der Farbpalette in drei, ansonsten in vier Graustufen darstellen. Bei Screens
mit mehr Farben müssen auch mehrere, durch Zeilenrasterung erzeugte, Farben zu
erkennen sein. Ist dies nur ungenügend der Fall, kann der Farbseparierung mit
Veränderung der Palette noch etwas nachgeholfen werden. Erst durch die Auswahl
des A2024-Screenmodus in der Workbench oder einem anderen Programm kann man die
volle Auflösung erreichen. Etwaiges Zittern und Flimmern einzelner Pixel der
Darstellung sind dem 'VR1' beschriftenten Einstellknopf auf der Platine des
Videobuffer-Moduls einfach zu beheben. Die anderen beiden Einstellwiderstände,
mit 'VSize' und 'VHold' bezeichnet, kann man - aus Platz- und Montagegründen -
auslöten, da sie ohne den restlichen A2024-Monitor keine Funktion mehr haben.
Zuletzt ist noch die Einstellung der Farben an den Potis der Farberweiterung
vorzunehmen. Es sind immer zwei Potis für einen Farbanteil (R: P1, P2; G: P2,
P3; B: P4, P5) vorhanden, die hauptsächlich die beiden Farben der mittleren
Helligkeit verändern. Unter CAOS2 ist es günstig, ausgehend von den vier
Graustufen, zunächst die 'Highlight-Farbe' von dunkelgrau (z.B Rahmen von
aktivem Fenster) auf ein kräftige Farbe einzustellen (P1, P3, P5) und dann, je
nach Geschmack, den Farbton des hellgrauen Hintergrunds zu verändern (P2, P4,
P6). So ist es möglich die Standard-Farben der Workbench zu erhalten, was bei
mir für alle Programme gut geeignet ist. Am Besten läßt sich diese Einstellung
kontrollieren, wenn man alle möglichen Farbkombinationen mit kleiner Schrift auf
dem Bildschirm darstellt (siehe REXX-Programm). Die einzige Schwierigkeit, die
am Beginn der Entwicklung auftrat, war ein zu unruhiges Bild, da die
Versorgungsspannung für die Schaltung zunächst direkt vom internen
Amiga-Netzgerät geliefert wurde und sich deren Ungleichmäßigkeiten
(Festplattenzugriffe, '50Hz-Pumpen' des Schaltnetzteils) direkt auf die
RGB-Signale koppelten. Mit der zusätzlichen Spannungsstabilisierung auf der
Farberweiterungsplatine ist dies nun jedoch behoben. Dadurch ist es auch
möglich die beiden Platinen intern in den A2000 oder den A3000 einzubauen und
sie dort mit den vorhandenen mit 12V zu versorgen. Hier ist jedoch noch ein
Widestand von ca. 8 Ohm/1W vor den Festspannungsregler eizusetzen, um diesen
nicht zu überlasten.

Noch ein Tip für den eventuellen Monitorkauf: Soll der Monitor auch die
normalen Darstellungsarten des Amiga in allen Farben, ohne die mögliche
Pufferung im A2024-Modul unterstützen, ist auch ein Minimalwert der
Horizontalfrequenz zu beachten. Er liegt bei 15KHz ohne und bei 31KHz mit
Flickerfixer oder 'Productivity-Modus'. Da es aber kaum Monitore gibt, die von
56KHz bis unter 30KHz arbeiten, ist auch ein normaler Flickerfixer notwendig,
der durch 'Doublescan' aus 15Khz Horizontalfrequenz ein Videosignal mit 31KHz
erzeugt. Hat der Monitor zwei Eingänge (SUB-D und BNC) ist es möglich auf den
einen das ungepufferte Signal (auch VDE-Ausgang des A3000) und auf den anderen
das aufbereitete Signal zu geben. Befindet sich der Eingangswahlschalter an der
Frontseite des Monitors, ist es durch Umschalten einfach möglich, auch
Darstellungen mit mehr als vier Farben unverfälscht zu sehen. Sehr von Vorteil
hat sich auch ein 'intelligenter', prozessorgesteuerter Monitor erwiesen, der
sich zu jeder Horizontal- und Vertikalfrequenz eine justierte Bildschirmlage und
-größe 'merkt'. Wechselt man häufig zwischen unterschiedlichen Screens, so ist
nicht jedesmal ein Nachjustieren nötig. [In all diesen Punkten optimal hat sich
der 17"-Monitor F550i von EIZO erwiesen, der zur Zeit ca. 2,2 KDM
Anschaffungswiderstand besitzt. (Ich haben mit der Firma Rein, Nettal keinerlei
Verbindung, außer der eines zufriedenen Kunden)] Viel Spaß beim Nachbau und
Betrieb des Moduls. Für etwaige Fragen stehe ich gerne zur Verfügung (siehe
Telefonbuch München).


*1 Die einzige Ausnahme bilden einige Uralt-A1000 mit NTSC-Motherboard,
Daughterboard und PAL-Agnus. Hier hilft der Austausch des Agnus oder des
Quarzes gegen den NTSC-Typ.

8<-------------------------------------------------------------------------------------------------------------------------------------------

/* use all color-combinations on two bitplanes with a small font: */

ADDRESS COMMAND 'SetFont Courier 11'

CSI = '9B'x
ts = 'abcdefghijklmnopqrstuvwABCDEFGHIJKLMNOPQRSTUVW'

DO fg = 30 TO 33
    DO bg = 40 to 43
        IF fg + 10 ~= bg THEN
            DO
            say CSI"0;"fg";"bg"m"ts||CSI||"0m"
            say CSI"1;"fg";"bg"m"ts||CSI||"0m"
            say CSI"3;"fg";"bg"m"ts||CSI||"0m"
            say
            END
        END
    END

8<-------------------------------------------------------------------------------------------------------------------------------------------

{folgende Liste ist auch auf der Zeichnung:}

 Bauteilliste:

1   8-fach Treiber 74F245
9   Universaldiode 1N4148 
1   Festspannungsregler 7805  5V 1A pos.
6   Potis 100 Ohm
3   Widerstände 180 Ohm
3   Widerstände 150 Ohm
3   Widerstände 82 Ohm
1   Widerstand 470 Ohm
3   Keramikkondensatoren 100 pF
1   Folienkondensator 100nF
1   Elko 2200 uF / 16 V
1   Elko 10 uF / 16 V
1   SubD-Buchse 15-pol. 3-reihig, zum
    Einlöten, abgewinkelt, weiblich

Anschlußkabel:
1m  Abgeschirmte Leitung, 13-pol.
1   SubD Stecker, 23-pol., Kupplung
    mit abgeschirmtem Gehäuse
1   Platinenstecker, Raster 1/10",
15  Pins (oder anlöten)

1   Steckernetzteil
    mit ca. 9V Gleichspannung und 300mA
1   Spannungsversorgungsbuchse
    passend zum Netzteil


8<-------------------------------------------------------------------------------------------------------------------------------------------

Thomas Kobler, München
samson@troja.deg.sub.org
kobler@dmumpiwh.mppmu.mpg.de

