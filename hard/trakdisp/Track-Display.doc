Have you ever wondered what your floppy drive was doing when it seems
to keep reading the same track over and over again?  I decided to add
a track indicator to my disk drive to show exactly what it was doing!

Unlike the software only track indicators, this device requires no
software initialization of any sort, and will therefore always be
ready every time you turn on your computer. This means that it will
even work with non-DOS software.

The basic idea is simple. The Track Display monitors the signals sent
to the floppy drive (as well as a few from the drive), and duplicates
the head motions with the display.  It also indicates the disk side 
being accessed and the state of the R/W line. 

Amiga drives will only accept commands when their drive select pin is
enabled. There are four drive select pins, one for each drive. For the
external drives, the drive select lines are moved over by one for each
drive in the chain. The external drives move their 2nd select line 
(SEL2) to SEL1 on the expansion connector, and SEL3 to SEL2 and so on.
Therefore each drive in the chain only needs to respond to SEL1. The
internal drive selects are not passed to the external drive connector,
so if you wish to monitor an internal drive, you will need to pass those
select lines to the Track Display circuitry.

About the circuit. The drive select line is inverted, and used to enable
an octal latch. This causes the latch to pass the signals fed to it from
the Amiga drive connector. There are two CMOS up/down counter chips 
(CD4510) and two BCD to 7 segment LED display drivers (CD4511) that keep
track of the current head position. The TRK0 signal is buffered and sent 
through a capacitor, which is used to reset the counters to 00 whenever 
the drive steps to track 0, thus syncronizing the counters to the drive.
The capacitor is used to deliver a single reset pulse rather than a
continuous signal. The DIR signal determines whether the counters count 
up or down, and the STEP signal is used as the counter clock.  The SIDE
and Write Enable signals are buffered and sent to the decimal points on
the 7 segment displays to indicate the current side and write status. The
displays are buffered with 330 Ohm resistors to limit current.

Construction is not critical. You can either mount the device internally or
externally. I chose to mount mine inside the voluminous A1010 drive. I cut
a small square hole in the upper right corner, in which I placed some 1/8"
smoked plexiglass. I mounted the displays upside down behind the plexiglass
so that the SIDE and WE points did not look like decimal points. After
compensating for the pin changes, I mounted the resistors and display 
drivers to the back of the 7 segment displays. This limited the number of
wires needed to the rest of the circuit which I mounted on a small piece
of perf-board and placed along side of the 1010 drive. The last connections
were to the Amiga drive connector inside of the A1010. I used short pieces 
of ribbon cable, which were small enough to feed around the edge of the
metal shielding.

The project works great! Instead of making one for every drive, you can 
wire up a selector switch to the other SEL line for the other drives.
This allows you to monitor any drive in the system.  Be careful when wiring
it up. Double check your work. A stray piece of wire could permanently
damage your Amiga! Once you've built one of these devices, you'll be amazed
to find out what your floppy drive has been up to all this time!  Good Luck!

	-Mark Spankus
	(Mark @ Shorty.CS.wisc.edu)

