
<HTML>
 <HEAD>
  <TITLE>WinUAE sound synchronisation</TITLE>
 </HEAD>

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Author" CONTENTS="Anthony Hoffman">
    
<BODY BACKGROUND="Images/Background.jpg">
<CENTER><img src="Images/EncoderLogo.gif" HEIGHT=91 WIDTH=320 ALT="Encoder"></CENTER><BR>
<HR SIZE=3 COLOR="BLACK">
<H2 ALIGN=CENTER><U>Detailed explanation of WinUAE's sound synchronisation</U></H2></CENTER>
<FONT SIZE=4 COLOR=BLACK>

<BR>
<BR>
<CENTER><U>Lag Compensation:</CENTER></U><BR>
<BR>
<BR>
When sound synchronization is turned on, WinUAE tracks the sound playback and slows down the emulation if it is too much 
behind. However, it has been observed that there is an important lag between the time the sound playback is done and its 
actual notification by the driver/OS (that is used to synchronize WinUAE). When this happens, WinUAE tends to slow down too 
much.<BR>
<BR>
<BR>
The purpose of this parameter is to provide a compensation for this lag.<BR>
<BR>
<BR>
To determine the appropriate value, proceed as follows:<BR>
<BR>
1) Set the buffer size to 1, turn sound sync ON and set both the "lag compensation" and "sound speed tweaking" sliders to 0.<BR>
<BR>
2) start the emulation with your favorite game/program/whatever. It is expected to experience slow emulation (low FPS) and 
broken sound at this point.<BR>
<BR>
3) increase the value of the "lag compensation" up to the point where the emulation runs at normal speed (50FPS-PAL or 
60FPS-NTSC) and the sound does not break. If you don't reach this point try to increase the sound buffer size and repeat the 
operation.<BR>
<BR>
<BR>
<BR>
<HR SIZE=2 WIDTH="50%" COLOR=BLACK>
<BR>
<BR>
<BR>
<CENTER><U>Sound Speed Tweaking:</CENTER></U><BR>
<BR>
<BR>
The purpose of this parameter is to tweak the speed of the sound playback so that its speed is closer to the speed of the 
emulation. The idea is to compensate for the fact that the clock in the sound card might not be "accurate" (or at least not 
synchronized with the clock of the CPU).<BR>
<BR>
<BR>
This parameter works by tweaking the frequency of the sound (e.g. 44200Hz instead of 44100Hz). The difference in sound 
frequency should not be perceptible by normal human beings (if it was, I wouldn't expect to see that much difference between 
the clock of different sound cards). Note that some sound cards do not support frequency tweaking.<BR>
<BR>
<BR>
It is important to realize that sound speed tweaking is not intended to be a means of ensuring synchronization (this should be 
done by turning sound sync on and setting the lag to the appropriate value). The benefit of having the speed of the sound 
playback that is close to the speed of the emulation (they do not need to be identical), is that the synchronization mechanism 
becomes less invasive, therefore reducing the choppy scrollings that are sometimes observed when sound sync is turned on.<BR>
<BR>
<BR>
There are two alternatives in order to determine the appropriate value:<BR>
<BR>
<BR>
Alternative 1 (quickest but less precise)<BR>
<BR>
1) Set the buffer size to 1, turn sound sync OFF and set the "sound speed tweaking" slider to the maximum (+800). You can 
leave the "lag compensation" to the value you found above but this has no influence when sound sync is turned off.<BR>
<BR>
2) start the emulation with your favorite game/program/whatever. At this point, the emulation is expected to be at normal speed 
but with crappy sound (sound is played too fast and the emulation does not produce enough of it).<BR>
<BR>
3) decrease the value of the "sound speed tweaking" down to the point where the sound starts to "sound OK". It might not be 
easy to determine when you reached the exact right point. There is a zone where the sound is going slightly too fast and there 
are micro-breaks between frames that are imperceptible. If this works for you, just leave it like this.<BR>
<BR>
<BR>
<BR>
Alternative 2 (more precise but longer)<BR>
<BR>
1) Set the buffer size to 1, turn sound sync OFF and set the "sound speed tweaking" slider to the minimum (-800). You can 
leave the "lag compensation" to the value you found above but this has no influence when sound sync is turned off.<BR>
<BR>
2) start the emulation with your favorite game/program/whatever. At this point, the emulation is expected to be at normal speed 
but the sound goes out of sync very quickly.<BR>
<BR>
3) increase the value of the "sound speed tweaking" up to the point where the sound is just in sync. If you want to be very 
accurate, this might take a long time because you might want to wait a couple of minutes to observe if the sound gets out of 
sync in the long run.<BR>

<BR><BR><BR>

</FONT>
</BODY>
</HTML>