@database "TriplePlay3.guide"
@author "Alfred Faust"
@remark "$VER: TriplePlay3 Guide 1.0 (14. Oktober 1999)"
@remark "Created with GoldED 6.2 (18.9.99)"


@node MAIN "Welcome"


    Welcome to the final TriplePlay project.

    @{"Copyright and Disclaimer" link COPYRIGHT,0} .... it is neccessary !!
    @{"Autor" link AUTOR,0}  who am I ...
    @{"History" link History,0} with some explaination

    @{"Some theoreticals" link SOMETHEORY,0} if you are interested ... :)

    @{"What components we need" link WHATWENEED,0}
    @{"Making the PCB" link MAKINGTHEPCB,0} the core

    @{"Addenum" link TP3NORMALMIDI,0} TP3 as a "normal" MIDI-Interface

    @{"The Triple Play Tools" link Software,0}  The driving Software

@endnode
@node AUTOR "Autor"

    My name is  Alfred  Faust.  I'm  a  german  men,  and  hope  my  english  is
    understandable. I'm 45 years old, and I'm just pensioner of illness.

    I work with an AMIGA since 1991. In the time between I had a A 500 with some
    expansions.

    At this time I use a A1200 with a Blizzard1240/40 accellerator, build  in  a
    tower  with  ZorroII-board. There is a graphics-card "MerlinII", a soundcard
    "Prelude", a 3,2 GB-IDE-harddisk, a 8x ATAPI-CDROM, Fast-Ram 32 MB.

    Since 1993 I work with Bars&Pipes. Since this fantastic program is FREE (not
    PD), I use Bars&Pipes2.5 and also "SuperJAM!1.1".

    With my MIDI-equipment (DX11 and the (at the moment destroyed) DB-50XG  from
    YAMAHA  - that is the real sound...) a made some fine music. For this card I
    wrote some tools to program this card with  all  the  fantastic  sounds  and
    effects. 

    my smail mail address:

    Richbergstr.15
    D-34639 Schwarzenborn
    Germany

    my e-mail addresses:

    j.k.dax@t-online.de  or
    alfred.j.faust@gmx.de


@endnode
@node HISTORY "History"

    TriplePlay 1.Version (27.9.1999)
      This was a new PCB for the TriplePlay from Ryan Osman (osman@sprint.ca).

    TriplePlay 2.Version (30.9.1999)

      As I tested the PCB from R.Osmans projekt MIDI-In won't work, so I altered
      it.  I  think the reason, why it don't work, was, that in the 1.version no
      @{"translation" link SOMETHEORY,0} was made between the TTL-logic and the RS232-logic.

      Also there was no  translation  made  backwards  between  RS232-logic  and
      TTL-logic. The circuitry of R.Osman gives to the MIDI-ports 12V.

      THAT WAS VERY DANGEROS. MY DB-50XG CARD WAS DAMAGED BY THIS HIGH VOLTAGE.
      (But YAMAHA was very accommodating, and helped me with a new DB-50XG :D )

      First I havn't see this. As my card was died, it was to late. ... that was
      my  risk.  Everybody, who build such things for his own use, makes this at
      own risk.

      I have learned ...

      First I put some resistors at the MIDI-Out-ports.

      Then I removed MIDI-Thru (this  port is to find at the most MIDI-devices).

      As above sayed I altered the MIDI-In circuitry  (the  translation  between
      the  TTL-logic  and  the  RS232-logic  was  made  in a primitive way - but
      works).

      This TriplePlay2 projekt works fine. But I warn you:  Don't  use  it  with
      other MIDI-devices than such, that have standard MIDI-ports, see above ...
      I say only: 12V ... .

    Triple Play 3.Version (14.10.1999)

      The main difference to the previous versions  is  the  IC  "MAX  238"(from
      MAXIM)  

      This  circuit  makes  the  translation  save,  fast  and  with  low  power
      consumtion.  It  takes  only 5-8mA current. This is important, because the
      voltages at the serial port are gives only at maximum 20mA.

      The MAX238 makes the translation in both ways from TTL -> RS232 and back.

      In this way the MIDI-Ports are real driven with the right 5V logic of MIDI.

      I  reinsert  the  MIDI-Thru-port.  So  the  TriplePlay-MIDI-Interface   is
      complete.

      This kind of circuitry you see at the TP3Plan.iff is real very save. It is
      also   compatible   to   TTL-inputs   of  other  MIDI-hardware  (like  the
      DB-50XG-card from YAMAHA) without optocouplers at the input.

    Triple Play 3 small Addenum (17.12.1999)

      - added a possibility to switch the TP3-MIDI-Interface to a "normal" MIDI-
        Interface

      - reworked the gif's & guide
        (thanks to Kjetil Svalastog Matheussen, who give me some hints)

      **************************************************************************

      At this place I will also say you a fact, before you try  this  all.  Have
      you  ever  used Bars&Pipes with 16 channels and many notes and other datas
      like PitchBend-data or  SystemExclusive-datas?

      If your AMIGA have had problems with this, it is not probable, that it can
      handle the full possibilities of 3x16 channels with many of this datas.

      If you not often use PitchBend-data or SystemExclusive-datas the Sequencer
      works fine with the TriplePlay-MIDI-Interface and 3x16 channels.

      In the other way I think a 68040 processor with 40 Mhz is the  minimum  of
      the work with this TriplePlay - MIDI - Interface.

      But try it. Bars&Pipes have so much possibilities ...



@endnode
@node SOMETHEORY "Some theory"

  @{fg shine}@{u}The MIDI-standard@{uu}@{fg text}

  The MIDI transmission based at a negtive 5V-logic, serial transmission.

  That means:

  Normaly the TTL (5V) logic is measured against the ground (-pol). So there  is
  a  high level (higher than 3V) and a low level (lower than 1V). This is in the
  language of the computer 1 or 0.

  Serial means that the stream of data are "in a line" - one after one.

  If you are interested in further information about MIDI, have a look at:

  @{fg shine}nuinfo.nwu.edu/musicschool/links/projects/midi/expmidiindex.html@{fg text}
  (without "www.")

  MIDI-signals are measured against the power (+5V).
  If normal (TTL)signal is high (against ground) it is low against power (+5V).

  The MIDI transmission is standardly based at a transmission  via  current  and
  not  voltage. 0 means no current and 1 current flowes. This is realised with a
  optocoupler at MIDI-In. The normal current of an optocoupler is between 5  and
  25mA.  To guarantee this current (not more), in the lines are resistors of 220
  Ohm. There is one at the OUT and one at the IN. Often there is also one at the
  second  line  PIN 4. So is a current of maximal 12mA guaranteed and a security
  against short-circuit.

  You will wonder, because in my projekt is no optocoupler .... ??!!

  I've tested this kind of circuitry.  I'd  made  a  projekt  sometimes  ago  to
  connect  a  DB-50XG-wavetable-card  with the AMIGA. This work's fine without a
  optocoupler for a long time. The main advantage of this kind of circuitry  is,
  that there is near no current at the cable. And so you can use long cables.

  And it is also compatible with TTL-inputs of  other  MIDI-hardware  (like  the
  DB-50XG-wavetable-card from YAMAHA).

  The transmission is done via 5pol-DIN sockets and plugs. MIDI uses PIN 4&5 and
  PIN  2 for the shield. PIN 4 is MIDI-High (power +5V), PIN 5 is MIDI-Low (this
  is the "working line").

  If we will connect MIDI to AMIGA's serial-port we must know, that the logic of
  this port is based at RS232.

  This logic works with a voltage between +12V and -12V. So is between High  and
  Low  a  difference  of  24V  (!!!).  We  must translate it in both directions.
  Another way is not possible.

  The reason: The TTL-logic circuits will be  destroyed  by  RS232-voltages  and
              RS232-logic won't work with TTL-voltages.

  For this reason there are some IC at the market. For our  projekt  I  use  the
  MAX238  from  MAXIM.  



@endnode
@node COPYRIGHT "Copyright and Disclaimer"


A MIDI-Interface Projekt by © @{"Alfred Faust" link AUTOR,0} 1999

*******************************************************************************

DISCLAIMER

FIRST OF ALL:

I AND THE ORIGINAL AUTORS ARE NOT HELD LIABLE IF THERE ARE ANY DAMAGES  OR  HARD
ERRORS WHEN YOU MAKE AND USE THIS TRIPLE-PLAY.

MAKING MONEY WITH THIS PROJEKT IS NOT ALLOWED.

IT IS ADAPTED FROM THE ORIGINAL "TRIPLE-PLAY MIDI-INTERFACE" FROM  "BLUE  RIBBON
INC." AND FROM A PCB BY RYAN OSMAN.

                        !!! USE IT AT YOUR OWN RISK !!!

THAT MUST BE ... I'M A POOR MAN ... ;(

This projekt is freeware. That means you can use it without to pay anything. But
I will be very enjoyed, if you @{"send me a mail" link AUTOR,0}, when you use it.

It comes with NO warranties.

But I've tested it with my MIDI-hardware ... it works fine :)) .

********************************************************************************

@endnode
@node WHATWENEED "What we need"

    Logical IC:

      The label of  the  logical  IC's  are  some  different  by  the  different
      companys. But at all: there is a international standard. The last 4 numers
      in the label are the same everywhere.

      For example:

      The IC "4052" we need : MOTOROLA  MC14052B
                              PHILIPS   HEF4052B
                              TOSHIBA      4052B

      You can see: the last 4 numbers are the same.
      Don't use the 74... types (example 74HC4052).

      We need: 1x  4052 (4 channel Multiplexer/Demultiplexer)

               1x  MAX238 (in 24-DIL package) (RS232<->TTL transceiver)

  Voltage-Controller-IC: 1x 78L05

    Transistors: 2xBC108 (or similar npn) only for switch-function

    Resistors: 5x 220    Ohm
               4x  10   KOhm

    Capacitors: 5x   1 µF/16V (micro Farad) tantal-capacitors
                1x 100 µF/16V (micro Farad) electrolyt-capacitor



    5 DIN-sockets for the MIDI-connections
    1 SUB-D female plug 25 pin
    short piece 9 wire-cable (shielded)
    What kind of connectors at the PCB you are use, is your choice.
    A small @{fg shine}METAL@{fg text} case (100x70X30);
    !!!It is very important for shielding radiation!!!

@endnode
@node MAKINGTHEPCB "MAKINGTHEPCB"

    For making the PCB you need:

        - transparentpaper (for the exposuremask)
        - a piece of 6 x 10 cm fotopositv PCB-material
          (I highly recommend to by more, it is cheap. The first attempt to make
          a PCB in the explained photomechanical way is most a mistake.)
        - a UV-lamp (a normal flourescent lamp does the same)
        - developer for the exposured PCB: NaOH
        - corrosive for the developed PCB: FeCl3 or other

   @{fg shine}First:@{fg text}

    Print out the exposure-mask (@{"TP3PCB.gif" system "run >NIL: Sys:Utilities/Multiview TP3PCB.gif"}) to the  transparent  paper.  It  is
    possible with a normal computerprinter in black/white. Use maximal contrast.
    The best result you get with a laser-printer.

    If you use a inkjet-printer, it is possible, that the  black  color  is  not
    real  black.  It  may be, that than there are some difficulties (@{"see below" link MAKINGTHEPCB,69}).
    You can also make a fotocopy with maximum contrast. The  result  is  like  a
    printout with a laser-printer.

    The #?.ps - files you can print out using "ghostscript" or  "post",  if  you
    have no postscript-printer. Then all will be printed in the right messures.

    The #?.gif - files  you  can  print  out  with  any  graphic  print  program
    ("graphic-publisher"  of  "Turboprint", or "Studio" or other). A DTP-Program
    is also a good coice. You must experiment a little up to  the  measure-lines
    matchs the lenght that shown. A small difference of +/- 1mm doesn't matter.

    NB.: With Multiview you can view the iff-pictures. Printing  with  Multiview
         is not so good.

    I've made the PCB with ProDraw3. If you have this program, I  can  @{"mail" link AUTOR,0}  you
    the file. With this the printig is easier and accurate.

    If you can't make PCB's  by  yourself,  I  can  help  you.  But  I'm  not  a
    electronic concern ... ;-)

    I recommend you  very  much  also  printing  out  the  @{"TP3Plan.gif" system "run >NIL: Sys:Utilities/Multiview TP3Plan.gif"}  and  the
    @{"TP3Comp.gif" system "run >NIL: Sys:Utilities/Multiview TP3Comp.gif"}. So you can always see what you do.

    The plan is a mixed form for people, are not so familiary with circuitry.

   @{fg shine}Second:@{fg text}

    Prepare the developer and the corrosivebath.

                                !!!! CAUTION !!!

              The developer and the corrosive are very corrodive.

                              !!!! USE GLOVES !!!


    NaOH :  50g to 1l water
    FeCl³: 400g to 1l water

    Lay the printed mask down  the  PCB-material.  (remove  the  protectionsfoil
    before).  Use  the mirrored one with the printcoulor to the PCB. That means,
    that it is now unmirrored. Press it down with a glasplate. Than lay it under
    the UV-lamp.

          exposure time with UV-lamp : 3 min
          exposure time with flourecent-lamp : 7-8 min
          (a small distance between lamp and PCB is necessary)

    After the exposure put the PCB immediately in the developer. In a short time
    you  will now see appearing the line wires. When all spaces between the line
    wires are free, immediately take the PCB out of the developer and  bring  it
    under  water. Then let it dry accurate. Don't use a cloth, it wipes the line
    wires.

********************************************************************************

    NB.: I tryed to make the mask with a  inkjet-printer.  The  ink  isn't  real
         black. So the UV-light wasn't exact shielded at the black lines. So the
         developer also destroyed the lines and the PCB was lost.

         So I experimented a little. My result:

         Make a low concentrated developerbath : 20g NaOH to 1l water

         Print the exposure mask at normal @{fg shine}Inkjet@{fg text}-paper.

         Exposure like above explained.


         Lay exposured PCB with the metal side to top  in  the  developer  bath.
         Wait  so  long  up  to  all lines are clearly to see. (the color of the
         parts, that will later cauterized changed to  blue.)  Then  immediately
         put it under flowing water.

         You can put the PCB  again  in  the  developer  if  it  is  not  enough
         developed,  and than again under the water .... and so on. You can also
         hold down the PCB partially in the developer bath.

         Be careful ! In the other way you will lose your work.

         But this is only for that reason if you use a inkjet-printer.

********************************************************************************

    If the PCB is dry, put it in the  corrosivebath  .  The  time  it  takes  to
    cauterize  is  between  10  min and some hours. Look often at the PCB in the
    corrosivebath. If you heat up the corrosivebath to 60°C  the  cauterize-time
    will be very short. Often move your PCB in the bath, that will also minimize
    the time.

    If all line wires clean cauterized, put the PCB under water to wash  up  all
    corrodive thorough.

   @{fg shine}Third:@{fg text}

    Drilling:

    - use a drill 0,8 - 1,0 mm thick.

   @{fg shine}Forth:@{fg text}

    Soldering:

    Print out the TPP3Components.iff. So you can see in the right form,  how  to
    build in the components.

    Also at the PCB you can see how all components shall be connected. Also  you
    will see the connections to the PCB. (MIDI-Output, and serial connection)

    Use a electric soldering iron with no more than 20 W.

    Look accurate before soldering the IC.

    I'm very recommend to use sockets for the IC's. They are very cheap, and  if
    anything is wrong, you must not dissolder the IC - this is very difficult.

                     ___   ___
                 1 =|    O    |= 16
                   =|         |=
                   =|         |=
                   =|   4052  |=   Top View
                   =|         |=
                   =|         |=
                   =|         |=
                 8 =|_________|= 9



                     ___  ____             
                 1 =|    O    |= 24
                   =|         |=
                   =|         |=
                   =|   MAX   |=   Top View
                   =|   238   |=
                   =|         |=
                   =|         |=
                   =|         |=
                   =|         |=  
                   =|         |=  
                   =|         |=
                12 =|_________|= 13




    Use only  so  much  solder  tin  as  necessary.  Use  only  solder  tin  for
    electronics.

    There a long jumper to sold in. At the PCB these are marked  with  "jumper".
    Don't forget these! I recommend to use a isulated wire.



                   For the MIDI-Ports use normal DIN-sockets:

                     View from the back (soldering) - side:

                               ---------------
                               |             |
                               |      2      |
                               |   5     4   |
                               |             |
                               |  3       1  |
                               |             |
                               |             |
                               |      S      |
                               |             |
                               ---------------

              S = Shield of the Plug (must be connected to Pin 2)



    Most there are numbers of the pins at the DIN-sockets. Look accurate please.

    For the connection to  the  DIN-sockets  use  soldering  pins,  or  sold  in
    PCB-plugs.

    The numbers of the pin-connections of the serial-port-plug you  see  at  the
    top of the PCB.


                          3  2  1/7  4  9 20


    CONNECT ONLY THIS PINS. THE  PIN  1  +  PIN  7  MUST  BE  CONNECTED  AT  THE
    SERIAL-PORT-PLUG !!!

    DON'T CONNECT THE SHIELD AND PIN 1+7.

    CONNECT THE SHIELD SEPARATLY BESIDE THE PINS.

    LOOK VERY ACCURATE AND COUNT THE PINS FOR SECURITY THREE TIMES ORE MORE.

    MOST FOR PIN 9 and 10. THE REASON IS: PIN 9 HAVE +12V PIN 10 HAVE -12V !
    IT WILL BE VERY DANGEROS IF YOU EXCHANGE THESE TWO PINS. THE  IC's  WILL  BE
    DAMAGED.


    At last build the PCB and  the  DIN-sockets  in  the  metal  case.  For  the
    connection  to  the serial-port I made a short cable with the female plug at
    the one side.


                 Before you connect or disconnet to your AMIGA:

          !!!!!   S W I T C H     O F    T H E     P O W E R    !!!!!

          IT IS VERY EASY TO DESTROY THE PORT IC's, WHEN YOU MAKE ANY
         CONNECTION OR DISCONNECTION AT YOUR AMIGA, IF THE POWER IS ON.

    The time you loose with a new boot is very good invested in the life of your
                                     AMIGA.

                                 BE WARNED ....


    And now good luck and many fun with the Triple-Play-MIDI-Interface ....  :))


























@endnode
@node SOFTWARE "The Triple Play Tools"

    The "Driver Tools"  I've  also  put  in  this  package.  They  replaces  the
    MIDI-OUT.ptool.
    Before you can use the TriplePlay.ptools you must remove the  MIDI-Out.ptool
    in the Toolbox (in the menu of the Toolbox "Remove Tool").
    After  that  "Install  Tool..."  -  the three TriplePlay.ptools. Use them as
    MIDI-Out-Tools.

    Each of them can handle 16 Channels.

    That means: Each MIDI-OUT-Port has 16 MIDI-Channels. 3x16 = 48

    So you have now real up to 48 MIDI-Channels.

    All other functions the same like in the MIDI-Out-Tool.

    @{fg shine}What are these tool do ?@{fg text}

    To control the TriplePlay-MIDI-Interface these tools use  PIN4  (Request  To
    Send) and PIN20 (Data Terminal Ready).

    If data arrived in the track, where the tool resides, the tool switch PIN4 &
    PIN20.

                       PIN4    PIN20
    ---------------------------------
    Triple Play 1       0        0
    Triple Play 2       1        0
    Triple Play 3       0        1

    The  IC  4052  of  TriplePlay-MIDI-Interface  switches  the  data   to   the
    correspondending MIDI-Out-port.

    Theoretical it is possible to switch PIN4 & PIN20 to 1 and 64  channels  are
    possible. But I think this is far away of that, what a AMIGA is able to do.

    I think, a normal AMIGA has trouble to manage  the  48  channels,  if  there
    datas in all 48 channels at the same time. But try it ...

@endnode
@node TP3NORMALMIDI "TP3 as a "normal" MIDI-Interface"


    If you are made my TP3-project you have noticed that in this form it is
    not   useable   for  other  applications  except  Bars&Pipes  with  the
    TriplePlay-Tools.
    
    It's a pity, you will think. But for this I have a solution:

    You only need a little switch and a thin two-wired cable.

    In this package you will find a picture("TP3Add.gif") that is a  detail
    of  the  picture  "TP3Comp.gif" an shows where the little swich must be
    connected.

    With this switch the multiplexer  IC  4052  will  be  bridged  for  the
    "OUT1".

    So you can switch the OUT1 to a normal MIDI-Out, and you  can  use  the
    TP3-OUT1  as  a normal MIDI-Interface. Switching can be done during the
    computer is on.

    In THIS case you must NOT turn the computer off before switching.

    But I say it again : don't make any connection ore disconnection to the
    ports of your AMIGA when the computer is on. The IC's for the serial or
    parallel ports are very sensitive.

    Don't make more than this one switch to  the  TP3.  It  will  not  work
    proper if more than one OUT of the TP3 will be "bridged".

    With this addenum you can use the TP3 with programs like OctaMED-Sound-
    studio or MIDI-Play or other programs that works with MIDI.

    Good luck !
    Have fun !

    :))


@endnode


    Alfred Faust
    Richbergstr.15
    D-34639 Schwarzenborn
    Germany

    Phone: +49 5686/930276
    email: alfred.j.faust@gmx.de or
           j.k.dax@t-online.de

