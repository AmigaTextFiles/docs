                                 PARdemo v1.5
              Parallel Port Input/Output Routines for C Programs


   This simple, `crude' demo is provided as an example of using the "pario.asm"
routines from a C program.  It allows you to manipulate the parallel port and
related control lines.  It is assumed you are familiar with hardware and have
the Amiga Hardware Reference Manual.  To test the routines you will need to
create a simple breadboard setup for input and output.  Warning!  Please read
the file "Port.txt" which provides an overview of the parallel port as well as
precautions when interfacing external hardware to the parallel port.  Refer to
the file "PARIO.doc" for a complete explanation of the routines.

   The source code should be compatible with the SAS, and DICE, compilers.  The
assembly routines were assembled with CAPE v2.51 and the demo was compiled with
Manx v5.20a.

   To start the demo, enter "PARdemo".  Do not use the AmigaDOS "RUN" command!
This is just a simple demo using stdio on an existing shell window...  You
should now see the following menu:

                                                Displayed as:    Routine:
       0. Quit                                  -------------    --------
       1. Set   Data Port Data Direction --->   Input/Output     portdir()
       2. Set   Data Port Direction Bits --->   $00-$FF          portddr()
       3. Read  Data Port ------------------>   $00-$FF          rdport()
       4. Write Data Port ------------------>   $00-$FF          wrport()
       5. Set   BUSY Direction Bit --------->   Input/Output     busydir()
       6. Read  BUSY State ----------------->   High/Low         rdbusy()
       7. Set   BUSY State ----------------->   High/Low         setbusy()
       8. Set   POUT Direction Bit --------->   Input/Output     poutdir()
       9. Read  POUT State ----------------->   High/Low         rdpout()
      10. Set   POUT State ----------------->   High/Low         setpout()
      11. Set   SEL  Direction Bit --------->   Input/Output     seldir()
      12. Read  SEL  State ----------------->   High/Low         rdsel()
      13. Set   SEL  State ----------------->   High/Low         setsel()
      =======================================
      Choice (0 - 13)?

   To quit, enter "0".  The Data is displayed to the right of the arrows and is
initially blank.  The following is an explanation of the menu items:

 1. This item sets the port data lines to all inputs or all outputs.  Selecting
    this item erases data in items 3 and 4 and then prompts you for a data
    direction.  Entering "0" will set all lines to inputs and entering "1" will
    set all lines to outputs.  If the port is set to all inputs (0), you will
    not be able to write to the port (item 4).

 2. This item sets the individual port data lines to inputs or outputs.
    Selecting this item erases data in items 1, 3, and 4 and then prompts you
    for an 8 Bit data direction mask in Hex format.  A "0" sets the line to an
    input and a "1" sets the line to an output.  For example, entering "F0"
    sets lines 0-3 to inputs and lines 4-7 to outputs.

 3. This item reads the port data.  Note, you can still read the port even
    though it may be set to all outputs.

 4. This item writes data to the port.  Selecting this item prompts you for
    data in Hex format.  If the port is set to all inputs via item 1, you will
    not be able to write to the port.  However, if the port direction was set
    via item 2, you will be able to write to the port regardless of which lines
    were set to inputs or outputs.

 5. This item sets the port BUSY control line to an input or an output.
    Selecting this item erases data in items 6 and 7 and then prompts you for a
    data direction.  Entering "0" will set the line to an input and entering
    "1" will set the line to an output.  If the port is set to an input (0),
    you will not be able to set the BUSY line state (item 7).
    
 6. This item reads the state of the port BUSY control line.  Note, you can
    still read the BUSY state even though it has been set to an output.

 7. This item sets the state of the port BUSY control line to a high or a low
    level.  Selecting this item prompts you for a level.  Entering "0" will set
    the line to a low level and entering "1" will set the line to a high level.
    If the BUSY line is set to an input (item 5) you will not be able to set
    the BUSY line state.

 8. This item sets the port POUT control line to an input or an output.
    Selecting this item erases data in items 9 and 10 and then prompts you for
    a data direction.  Entering "0" will set the line to an input and entering
    "1" will set the line to an output.  If the port is set to an input (0),
    you will not be able to set the POUT line state (item 10).

 9. This item reads the state of the port POUT control line.  Note, you can
    still read the POUT state even though it has been set to an output.

10. This item sets the state of the port POUT control line to a high or a low
    level.  Selecting this item prompts you for a level.  Entering "0" will set
    the line to a low level and entering "1" will set the line to a high level.
    If the POUT line is set to an input (item 8) you will not be able to set
    the POUT line state.

11. This item sets the port SEL control line to an input or an output.
    Selecting this item erases data in items 12 and 13 and then prompts you for
    a data direction.  Entering "0" will set the line to an input and entering
    "1" will set the line to an output.  If the port is set to an input (0),
    you will not be able to set the SEL line state (item 13).

12. This item reads the state of the port SEL control line.  Note, you can
    still read the SEL state even though it has been set to an output.

13. This item sets the state of the port SEL control line to a high or a low
    level.  Selecting this item prompts you for a level.  Entering "0" will set
    the line to a low level and entering "1" will set the line to a high level.
    If the SEL line is set to an input (item 11) you will not be able to set
    the SEL line state.


    Tom Handley / 18 April 93
    BIX     : thandley
    Internet: thandley@bix.com or thandley@nesbbx.rain.com

