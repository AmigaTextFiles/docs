                               A2630 SPEED-UP FIX
                                      V1.1

                                  Sept. 27, 2003
                               By Kevin J. Hoague
                                Madison, Wi USA
                               email: kjh24@tm.net


                                  INTRODUCTION

This is a collection of speed-up modifications and fixes for the CBM A2630
accelerator. This accelerator is used in the Amiga 2000 and 2500 series
computers. In many ways this document picks up where A2630fix (Aminet)
leaves off. I spent many hours working on these modifications and testing
them for reliable operation. This text refers to the schematic files
80NSMOD.iff and 68000STMOD.iff (included). Also, the A2630 users manual has
a quite usefull schematic diagram. I would like to thank every Amiga
enthusiast who has shared their software or hardware knowledge. So, here
is my belated contribution to the shared knowledge of the Amiga community.


                                   DISCLAIMER

THESE MODIFICATIONS SHOULD BE PERFORMED ONLY BY A QUALIFIED ELECTRONICS
TECHNICIAN. YOU MAY USE ANY OF THIS INFORMATION WITH OUT ANY OBLIGATION
TO ME PROVIDED THAT SUCH USE IS AT YOUR OWN RISK. NO WARRANTY OF ANY KIND
IS EXPRESSED OR IMPLIED BY ME.


                             HARDWARE REQUIREMENTS

CBM A2630 Accelerator, 28-35 Mhz TTL clock oscillator, 74LS125 Tri-state
buffer, soldering and desoldering equipment, and some wire for circuit 
connections. NOTE: All of the mods. and fixes described here were tested on 
a REV 9.3 PC board. I don't expect any problems with earlier revisions but 
they can't be ruled out either.   


                                    OPTIONAL

80 ns or faster RAM installed for RAM speed-up mod, 30 to 50 MHZ TTL 
clock oscillator for FPU. 14 pin DIP sockets (as needed). DMM or Ohmeter for 
continuity checks.


                             SOFTWARE RECOMMENDED

AIBB6.5, DiskSpeed or SCSIspeed 4.2, Fmath406, CMQ030, (Aminet)


                               RAM SPEED-UP MOD

My A2630 came with 4 MB of 70 ns RAM from the factory but the board timing 
was set for 100 ns RAM according to the original design. Dave Haynie 
designed a new PAL to support 80 ns RAM (see www.thule.no/haynie) but here 
is a much simpler and less expensive way to do this. Here, we use one 
74LS125 buffer to reduce the MUX signal approx. 10 ns. Then we reduce the 
DELCAS, DSACKDLY, CHARGE and ROFF signals by 20 ns. Please note that MUX
is now generated by the 74LS125 and T2-T5 at U604 are replaced by T1-T4. You 
can remove U604 and reinstall it at a right angle and reroute the timing 
signals with jumper wires. When this modification is complete you should 
test the memory using the A2630 monitor as described in A2630Fix. You can 
significantly speed up the memory test by turning on the instruction cache. 
Then you can use AIBB6.5 to verify that your A2630 memory access speed has 
improved. Note: If you have 70 ns ram you might be able to go even faster 
by connecting DSACKDLY to T1 and ROFF to T3! 


                              CPU OVER-CLOCK FIX

It was generally known that you could over-clock the A2630 by simply 
replacing the original 25 MHZ clock oscillator with a 28 MHZ part. 
However, no one ever addressed the problems you may encounter at the higher 
clock speed. My system would lock up when performing large DMA transfers to 
chip memory (and occasionally fast memory) My A2000 had a rev 6.2 PCB 
inside so the cause was not the DMA problem described in A2630Fix. Also, 
this problem appeared only at the higher clock speed. This fix uses 1 or 2 
of the 74LS125 buffers to add 10 to 20 ns to the ASDELAY signal input to 
the U600 PAL. You can remove the PAL and carefully bend pin 2 slightly 
outward, reinstall it and solder a jumper wire to the 74LS125. You may use 
DiskSpeed or SCSIspeed 4.2 to verify that DMA transfers work reliably by 
reading large files to chip or fast memory. You may need a 2nd buffer for 
higher clock speeds or the optional resistor load modifications described 
below.

                             CPU SUPER-CLOCK MOD

In case your wondering why I did not suggest a higher clock speed than 
28 MHZ for the CPU. Well, I have in fact increased my CPU clock speed 
to 35 MHZ! But I had to design some custom logic to replace the 68000 state 
machine logic. Most of this logic is generated by the PAL at U505. However, 
this requires at least 3 discrete devices to replace the original logic 
(which I assume most of you will want to keep). But... if you really want 
to go faster, and are willing to do the extra work, then see the file
68000STMOD.iff. First, we remove the PAL at U505 and then install the new 
custom logic. Then disconnect pin 5 of U708 from the circuit and connect it 
to the 1K pull up resistor at _S7MDIS. Also disconnect U307 pin 1 from
ground. Note: When operating above 33 MHZ you may need to add an extra
pull up resistor at U300 pin 10. (see A2630Fix). I used one of the spare 3.3K
resistors from RP300 (pin 8). If possible, avoid using lower value
resistors here. The parts needed are as follows:

    1) 74F74 D-type Flip-Flop
    1) 74ALS10 3-Input NAND gate
    1) 74LS125 Quad Tri-state Buffer (also used in 80NSMOD)        
    1) 1K Ohm 1/8 watt resistor
    1) .01 mfd 50 Volt capacitor
    1) Small PC Board (optional) 

                              RESISTOR LOAD FIXES

If you look at the Motorola specs. for the 68030 you will be amazed that 
the A2630 worked as well as it did with the production design. More 
specifically, there is a peculiar configuration of resistance loads on the 
AS signal and current limiting resistors on AS, DS, R/W, DBEN 
signals. This fix removes an extra 3.3K pull up resistor on the AS line at 
RP300 (pin 7). Also, we remove the 47 ohm R-pack at RP202 and install
short jumper wires accross pins 1-2, 3-4,  5-6, and 7-8. (pins 9-10 should
be left open since the ECS signal is not used by the A2630 or DKB2632). We
really don't need any current limit effect of RP202 if we keep our pull up
resistors and loads at least close to the output low current specs. The
assertion times of all these signals will improve considerably with these
fixes.The moral of the story here is that the simultaneous over-clocking and
improper loading of a CPU is a recipe for failure. I also found a factory
installed 470 ohm pull up resistor on the DS line near RP202. Of course, that
bug was exterminated as soon my soldering iron could generate enough heat!


                              FPU OVER-CLOCK MOD

My A2630 came from the factory with a 25 Mhz CPU & FPU. The CPU was the 
plastic PGA chip indicating that this was in fact a 25 Mhz part. However, 
the FPU was the ceramic PGA chip usually used on the 33 Mhz and up parts. 
Since I was able run the FPU reliably at 50 Mhz, it appears that the FPU 
was in fact a higher speed part. Some individuals have reported the 
ability to run their CPU's or FPU's at much higher clock speeds than they 
were rated for. In any case, the FPU runs much cooler than the CPU so you 
could expect to use a 30 Mhz crystal here at a minimum. See the A2630 
manual for instructions to clock the FPU separately. Of course, you could 
leave the FPU run from the CPU clock if you wish.             


                              PAL SPEED UP MODS

The PAL's at U504, U505, U506 and U600 use 2.2K pull down resistors to 
permanently enable their outputs. Why bother with any resistors when we can 
simply jumper the OE signals to ground? Here we simply install short jumper 
wires across R504, R505, R506 and R600. This will slightly improve the 
signal assertion times and noise immunity of these PAL's.      


                               POWER SAVER FIX

My A2630 came from the factory with 10 pin R-packs installed in RP100-107. 
These are the 1K pull downs for the address & data buses. The A2630 manual 
indicates that these should be 9 pin parts. For this fix we remove the
R-packs, bend over (or remove) the 10th pin, install a small piece of
electrical tape to insulate the 10th hole and reinstall the R-packs. This
removes eight extra 1K resistors connected from VCC to ground saving about
40 ma of wasted current.


                                DKB 2632 FIXES

If you own a DKB 2632 memory board you may experiance problems when the
board is clocked above 25 MHZ as I did. This is a synchronous memory board
which runs off the CPU clock. Apparently, the multiplexed address bus and
collumn address strobes generated by the DRAM controller chip are not
buffered sufficiently to protect them from RF noise. For this fix we install
2.2K pull down resisitors (R-packs) at A0-A11 on the multiplexed address bus.
This should be pins 12-19, 28-29, 31-32 and 40-43 of any SIMM socket. Pins
1, 39 and 72 should be a ground reference. The second fix corrects excessive
power draw on a REV C PC board. Here, we remove 4 of the 330/470 ohm
(Dual-term) R-packs located near the SIMM sockets and replace them with
2.2K (Bussed) pull downs. Pull down orientation for the R-packs is 180
degrees from the the standard orientation (i.e. pin 1 is Ground but DO NOT
connect pin10 to VCC). The third fix is ONLY needed when the CPU is clocked
above 30 MHZ. This fix eliminates approx. 7 ns of extra propagation delay
from double buffering the DKB's clock signal. On the A2630 PCB, we remove one
leg (near U204) of the 68 ohm resistor at R208 from the PC Board and install
a short jumper wire to one leg (near the RF shield) of the 68 ohm resistor at
R204. Note well that at 35Mhz I had to change R208 to 47 ohms! Suggested
A2630 resistor load fixes: change RP200 to 4.7K ohm and R300 to 1.5K ohm.


                                    P.S.

For all the critics and skeptics on the subject of over-clocking I have a 
few comments for you. First, you never really know how much faster you can 
go unless you actually try to go faster! Second, just because a 
manufacturer rates a device at a certain clock speed that doesn't mean it 
can't go faster than that. This is simply a rating at which the 
manufacturer will guarantee all the operational specs. for that particular 
device. Third, the most practical concern for any one operating any such 
over-clocked device is over heating that device. However, there are also 
practical remedies available to address this concern. (i.e. extra 
ventilation, heat sinks, cooling fans, etc.) In the case of the A2630 I 
would suggest leaving the RF shield cover off. Finally, If you still feel
uncomfortable with over-clocking then rest assured that Motorola and your
local Amiga Dealer will be delighted to sell you higher speed versions of
their products.