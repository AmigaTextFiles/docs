
PREFACE
=======

The following text has been written in 1998 by Stephan Rupprecht
and explains how to modify a serial mice to work on the Amiga.

IMPORTANT: If this modification causes any damage to your
computer, mice or any other pet;), I am NOT responsible. And 
don't forget: if you have a new mouse, you'll loose warranty!

Being sick of the "good" old C= mouse and having a serial mice
"flying around", I decided to modify this mouse to work on
my Amiga. So I took a look at several texts found on the Aminet
which described the modification of such a mouse. Unfortunely
this didn't work for my mouse as it is a bit different to those
described.

WHAT YOU NEED FOR THE MODIFICATION
==================================

Some experiences in soldering and the tools to do it ;)

1x LM339 Quad Voltage Comparator IC (= TDB0139 = LM239)
1x 150Ohm Resistor (1/4 or 1/10 Watt)
1x 5+1 10k Resistor Network (or 4+1 10k and a single 10k one)
1x 5+1 2.7k Resistor Network (or 4+1 2.7k and a single 2.7k one)
and some 9pin cord with a female db9 plug.

COSTS: about US$ 5.-

NOTE: Please read the following text before you buy anything, you 
might need different resistors!

HOW IT WORKS
============

First disassemble the mouse and disconnect the mouse cord.
Second remove the 16pin integrated circuit and clean out
the holes as we need them to solder in the new mouse cable.
Now follow the trace that is connected to the negative terminal
of the small electrolytic (C1) capacitor, the trace should end at 
the cable socket (CN1). This is GND. Connect line 8 of your new
mouse cord to it. Go back to C1 and follow the trace that is 
connected to the positive lead of C1, it should also end at CN1.
This VCC (+5V), connect line 7 of your mouse cord to it. 
(Alternatively, you can use a voltmeter to find the correct lines,
for this purpose your mouse must be connected to the serial port).
After doing this, take a look at the switches for the mouse-buttons, 
and check if they're connected to VCC or GND. In case that 
they're connected to VCC, you've to disconnect them from VCC and
connect them to GND. Now follow each trace that goes from a switch
to one of the holes where we removed the IC before and solder in
the appropiate line of your mouse cord to it: line 6 of the 
mouse cord must be connected to left button, line 5 to the
middle one and line 9 to the right one. As your mouse might 
differ from my one (BTW: it's a Genius EasyMouse), you've to
check the following: pin 1 and 3 of each ir-detector should be
connected to GND via a resistor (normally named RP1). If not, 
connect the input line of your 5+1 (or 4+1) 2.7k resistor (marked
by a point) to GND and the output lines of the ir-detectors
(pin 1+3) to the resistor (watch out for a group of five holes
named RP1 - this is the right place for the resistor). Please note
that we'll also connect these lines to the LM339 IC! If you're a 
lucky one because the output lines are already connected to GND,
just remove the old resistor (RP1) and replace it by the new 
(2.7k) one (you'll probably need a 4+1 instead, but don't forget 
to buy an additional 2.7k resistor then).

 +-----------+
 |ir-detector|
 1     2     3	+---------------+
 +-----+-----+  |2.7k resistor °|
 |     |     |  +--+--+--+--+---+
 |     |     |  |  |  |  |  |   |
 |     |     |  |  |  |  |  |   |
 |     |     +--+  |  |  |  |   |
 |     °        |  |	       GND
 |    VCC       |  |          
 +-----------------+
	        |  |
		|  |
		to LM339

Next we've to connect the following lines to the LM339: Connect
pin 1 of the vertical ir-detector to pin 5 of the LM339 and pin 3
to pin 11 of the IC. Pin 1 of the horizontal ir-detector must
be connected to pin 7 and pin 3 to pin 9 of the LM339 (simply
solder a wire from the IC's holes [the holes that are connected
to the detectors] to the LM339).

Now connect pin 3 to VCC and pin 12 to GND. Pin 4,6,8 and 10 
must be connected to +1V: Connect one (free) line of the 5+1 2.7k
resistor to one (free) line of the 5+1 10k resistor (which must
be connected to +5V). This new line, just created, will give you
the +1V needed for the comparator.

      °VCC °VCC
      /	   /
      \10k \10k 	  +---------+--------+
      /	   / 		  |         |	     |
      |    |    - VQ-Pulse|HQ-Pulse |        |
 Line3+ L.4+   ---   IN   |    IN   |        |
   OUT| OUT|    |    |    |    |    |        |  VCC
 +----|----|----|----|----|----|----|----+   |   °
 |   14	  13   12   11   10    9    8	 |   |	 /
 |					 |   |   \ 10k
 +-				 	 |   |	 /
 | |    LM 339			 	 |   +---+
 +-				 	 |   |	 \ 
 |					 |   |	 / 2.7k
 |    1	   2    3    4    5    6    7	 |   |	 \
 +----|----|----|----|----|----|----|----+   |	---
      |    |    |    |    |    |    |        |   -
 Line1+ L.2+    °    | V-Pulse | H-Pulse     |
   OUT| OUT|   VCC   |   IN    |   IN        |
      \	   \         |         |	     |
      /10k /10k      +---------+-------------+
      \	   \					
      °VCC °VCC
		
Finally, pin 1,2,13 and 14 (LM339) must be connected to 
VCC through the 5+1 10K resistor. When you've done this, 
connect pin 1 to line 1 of the mouse cord, pin 2 to line 2,
pin 14 to line 3 and pin 13 to line 4. That's all,
almost;) Replace R1 (this should be the limiting
resistor for ir-light emitters) through the new 150Ohm
one. IMPORTANT: The leds of your mouse might differ, so
better try a stronger one before using the 150Ohm one!

TROUBLE SHOOTING
================

The mouse buttons don't work:
You've forgotten to disconnect them from VCC and connect
them to GND. Check the lines!!!

The mousepointer is moving into the wrong direction:
you've swapped the horizontal or vertical lines.

The mousepointer doesn't want to move:
1) Check for around 0.5V at pin 5,7,9,11 of the LM339.
2) Pin 4,6,8,10 of the IC should get +1V. Pin 3 is VCC and
   must get +5V. 
3) The limiting resistor for the leds is too strong, use
   a smaller one.

The mousepointer moves only up/down or left/right:
The resistor for the leds is still too strong, try a smaller
one.

FINAL NOTE
==========

Normally, the V and H pulses that are produced by the ir
detectors should be around 0.5V. As this wasn't enough
to work with my mouse (I used a 330Ohm resistor for R1), 
I powered up the ir-leds by using an 150Ohm resistor. Now
the ir-detectors output up to 2V for a movement, this works
for me but it doesn't mean that works for you! You should 
also try different resistor combinations, eg. use a 330Ohm 
resistor for R1 and lower the voltage of the comparator 
circuit from 1V to 0.3V (= used by the original C= mouse). 
You could also try to powerup the ir-detectors, so that 
they output upto 5V for a movement. This way you won't 
need the LM339 and the 10k resisitor!

CREDITS
=======

I would like to thank the following people

Gene Heskett (genes_pc_mouse.lha),
J. Edward Hanway (optmouse12.lha),
Jeff Easton (mousehack.txt)

for writing down their serial mouse hacks.

AUTHOR	
======

Stephan Rupprecht
Apfeldweg 1
44359 Dortmund
Germany

stephan.rupprecht@primus-online.de
