@database mails
@node main
                          3D World Mailing List Archive

                                 September 2001

             Compiled by Paul Qureshi (paul.qureshi@btinternet.com)

For more information on the 3D World Mailing List please read the FAQ. It is available at various sites:

Aminet: docs/misc/3DWorldFAQ.lha
http://mc68k.btinternet.com/faq/
The 3D World ML, monthly post

@{"Inverse matrix?      " link 08653.001} Tim Hanson <msinister@connectfree.co.uk>
@{"flightgear           " link 08652.001} Dirk Baeyens <dirk.baeyens@skynet.be>
@{"Textures.            " link 08653.003} Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
@{"Re: flightgear       " link 08653.002} Alan Buxey <almb@mssl.ucl.ac.uk>
@{"Re: Inverse matrix?  " link 08659.003} Thomas Frieden <ThomasF@hyperion-software.de>
@{"Re: Textures.        " link 08659.002} Thomas Frieden <ThomasF@hyperion-software.de>
@{"Re: Textures.        " link 08659.001} Tim Hanson <msinister@connectfree.co.uk>
@{"Re: Textures.        " link 08664.001} Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
@{"Re: Re: Textures.    " link 08664.002} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Re: Textures.    " link 08666.001} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Textures.        " link 08665.001} Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
@{"Re: Textures.        " link 08666.003} Robert Kihl <robert@snarl-up.com>
@{"Re: Textures.        " link 08666.002} DJNick <djnick@ptt.yu>
@endnode
@node 08653.001
Subject: Inverse matrix?
From: Tim Hanson <msinister@connectfree.co.uk>
Date: Sun, 09 Sep 2001 18:47:03 +0100

Hi All,

I know it`s not practicle to calculate the inverse of a matrix but I need the
inverse matrix every loop. Is there a way of keeping a running copy of the
inverse? ie Every time I change the first matrix I change the inverse so that
it remains the inverse.


I`ve run up against this problem before and have always used a hack around to
solve it but this time I cant see a solution so any help would be apreciated.
-- 
any persons, living or dead, are entirely coincidental.    
Tim Hanson,
by the River,Canterbury, Kent.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
8.4GB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K



@endnode
@node 08652.001
Subject: flightgear
From: Dirk Baeyens <dirk.baeyens@skynet.be>
Date: Sun, 09 Sep 2001 11:20:17 +0100

Hello, 

Is there a possibility that this game comes to the Amiga?

http://flightgear.org/


De groetjes, Dirk

-- 

I am part of the Amiga Family!

http://users.skynet.be/dirbae/nieuws/amiga-nieuws.html

@endnode
@node 08653.003
Subject: Textures.
From: Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
Date: Mon, 10 Sep 2001 19:53:58 +0200

Hi,

    Some question about textures. I have noticed that they
 eat some memory when they are first used. Why?
 I thought it's about conversion and stuff, but
 I checked and R5G5B5 textures are directly supported
 by hardware.

Regards.
-- 

// Michal  "Kierownik" Wozniak
// e-mail: wozniak_m@interia.pl
// Graphics Programming


---------------------------------------------------------------
Marcin Daniec, artysta kabaretowy, wzial slub! Wiecej info:
http://rozrywka.interia.pl/id/wdnia/plotki/www/artykul&w=173086

@endnode
@node 08653.002
Subject: Re: flightgear
From: Alan Buxey <almb@mssl.ucl.ac.uk>
Date: Mon, 10 Sep 2001 11:43:22 +0100 (BST)

hi,

On Sun, 9 Sep 2001, Dirk Baeyens wrote:

> Hello, 
> 
> Is there a possibility that this game comes to the Amiga?
> 
> http://flightgear.org/

please read the mailing list archives. that question was first asked 3
years ago ;-)
 
alan

@endnode
@node 08659.003
Subject: Re: Inverse matrix?
From: Thomas Frieden <ThomasF@hyperion-software.de>
Date: Sun, 16 Sep 2001 15:12:47 +0200

Hi,

Tim Hanson wrote:

 >I know it`s not practicle to calculate the inverse of a matrix but I 
need the
 >inverse matrix every loop. Is there a way of keeping a running copy of the
 >inverse? ie Every time I change the first matrix I change the inverse 
so that
 >it remains the inverse.
 >
 >
 >I`ve run up against this problem before and have always used a hack 
around to
 >solve it but this time I cant see a solution so any help would be 
apreciated.
 >

It depends on the matrix. If it's a 3x3 matrix, this is quite easy to
invert. Just calculate the determinant (a 3x3 matrix has a relatively
simple determinant), and divide each elemtent by that.

If the matrix is a rotation matrix (no matter if it's 3x3 or 4x4), the
inverse is it's transpose, i.e. the matrix obtianed by swapping column
and row numbers, because a rotation matrix is orthonormal (all columns
are orthogonal, unit length vectors).

I'm not 100% sure about this: If you only use "normal" transformations,
like rotation, translation, and scale, it should be possible to keep an
inverse by applying the "negative" operations to the second matrix.

Regards,

-- 
  Thomas Frieden
  Senior Developer, Hyperion Entertainment
  ThomasF@hyperion-entertainment.com
  http://www.hyperion-entertainment.com


@endnode
@node 08659.002
Subject: Re: Textures.
From: Thomas Frieden <ThomasF@hyperion-software.de>
Date: Sun, 16 Sep 2001 14:55:03 +0200

Hi,


Sorry, I'm just now catching up with the postings here. I couldn't post 
because I was still subscribed with my old address...

Michal Wozniak wrote:

>    Some question about textures. I have noticed that they
> eat some memory when they are first used. Why?
> I thought it's about conversion and stuff, but
> I checked and R5G5B5 textures are directly supported
> by hardware.
>

The first time a texture is used, memory of it is allocated *on the 
graphics board*. Graphcs board memory is normally allocated as bitmaps 
through the underlying graphics board software, so the first time a 
texture is used, there might be a bitmap allocated, which accounts for 
the additional memory. Additional textures should not allocated 
additional bitmaps as long as they still fit into the bitmap that's 
already been allocated.

Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com




@endnode
@node 08659.001
Subject: Re: Textures.
From: Tim Hanson <msinister@connectfree.co.uk>
Date: Sun, 16 Sep 2001 10:25:27 +0100

Hi Michal 
Michal Wozniak wrote this on 10-Sep-01 at 18:53:58
> Hi,
> 
>    Some question about textures. I have noticed that they
> eat some memory when they are first used. Why?
> I thought it's about conversion and stuff, but
> I checked and R5G5B5 textures are directly supported
> by hardware.

How much memory are you talking about? The original image data has to stay in
memory all the time the texture is active. Also there is a small struct
Texture allocated by W3D_AllocTexObj().

-- 
any persons, living or dead, are entirely coincidental.    
Tim Hanson,
by the River,Canterbury, Kent.
Amiga A1200T,`040/25,603e/160,32MB Fast,BVisionPPC,
8.4GB IDE HD,ZIP SCSI,RENO x2CD SCSI,Pace 56K



@endnode
@node 08664.001
Subject: Re: Textures.
From: Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
Date: Thu, 20 Sep 2001 15:47:19 +0200


> Hi,

    Hi,

>>    Some question about textures. I have noticed that they
>> eat some memory when they are first used. Why?
>> I thought it's about conversion and stuff, but
>> I checked and R5G5B5 textures are directly supported
>> by hardware.
>> 

> The first time a texture is used, memory of it is allocated *on the 
> graphics board*. Graphcs board memory is normally allocated as bitmaps 
> through the underlying graphics board software, so the first time a 
> texture is used, there might be a bitmap allocated, which accounts for 
> the additional memory. Additional textures should not allocated 
> additional bitmaps as long as they still fit into the bitmap that's 
> already been allocated.

    But, why then I need to keep original texture memory, if it's
 copied into a bitmap? Why not allocating a bitmap at the begining,
 and then allow programmer to release memory. I know that when bitmap
 is allocated then graphics board software allocates a piece of fastram
 for it (to be stored in case of gfxram shortage), and tries to place it
into
 gfxram. So why do we need this original buffer?

> Regards,

Regards


---------------------------------------------------
http://POCZTA.interia.pl/ - sa powody by korzystac!

@endnode
@node 08664.002
Subject: Re: Re: Textures.
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Fri, 21 Sep 2001 18:36:08 +0200

Hi,

Michal Wozniak wrote:

>But, why then I need to keep original texture memory, if it's
> copied into a bitmap? Why not allocating a bitmap at the begining,
> and then allow programmer to release memory. I know that when bitmap
> is allocated then graphics board software allocates a piece of fastram
> for it (to be stored in case of gfxram shortage), and tries to place it
>into
> gfxram. So why do we need this original buffer?
>

The original images are needed again as soon as a texture is removed 
from the graphics board.

Remember that the memory on the graphics board is rather limited, so 
when new textures are uploaded, other textures are removed from the 
graphics board. But if you need the old ones again, it has to be 
uploaded again. This is done automatically by Warp3D, so the original 
images must still be present.

If the format is directly supported, there's only one copy in main memory.

Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08666.001
Subject: Re: Re: Textures.
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Sat, 22 Sep 2001 22:34:14 +0200

Hi,

Michal Wozniak wrote:

>It required some thinking, but now its obwious to me too;))
>
Sorry, couldn't explain it better :/

>I thought it works like this:
>  I load a texture
>  pass it to the W3D
>  W3D allocates a bitmap for it (is it only a struct, ar a whole new
>bitmap?)
>  CGX allocates a piece of mem to store it in case there is not enough
>  free mem on board. (1)
>  At first use it tries to place it into GFX mem.
>  If it needs to be flushed it is copied into this temp mem (1)
>
>    In this case there would be no need for original image. But also 
> every texture would need twice it's memory.
>

Yes. That's how OpenGL handles it... But you might need to retain the 
original image, anyway, for example for hit tests, or modifications... 
So I think it's sensible to keep the original image. If push comes to 
shove, just dispose of the memory when you free the texture object...

Regarding the allocation on the graphics board: We allocate large 
bitmaps, and use the memory of these bitmaps as "free memory pools" with 
our own allocation scheme. Everything is allocated through this, 
textures, zbuffer, even the Voodoo 3 fifo buffer.

>
>    The way it's handled no is a bit better, but IMHO, with better
> cooperation with CGX/P96 the amount of needed memory could be
> limited a bit more. But it would require some changes in CGX.
>

Yes, what I always wanted to have is a function to allocate memory from 
the graphics system, without the need to allocate (and lock) bitmaps. 
This is always a bit kludgy..

>>Remember that the memory on the graphics board is rather limited, so 
>>when new textures are uploaded, other textures are removed from the 
>>graphics board. But if you need the old ones again, it has to be 
>>uploaded again. This is done automatically by Warp3D, so the original 
>>images must still be present.
>>
>
>    So if texture is flushed from gfx board memory (by other texture)
> it's memory is also dealocated? If not it would be better to do it the
> way I thought it's done. At least I think so;)
>

The bitmaps are reused when a texture is swapped out of graphics memory. 
Think of the graphics board memory as a giant cache: The textures on the 
graphics board are, just like the entries in the CPU cache, just copies 
of the original in main memory.
So when a texture is removed from the graphics board, the appropriate 
memory handle is returned to Warp3D's internal memory list, and the new 
texture is allocated. Warp3D also does free block "compression" (i.e. 
adjacent free memory regions are merged back into one block), and free 
blocks matching the size of an allocation are reused...

>>If the format is directly supported, there's only one copy in main memory.
>>
>
>    Are you keeping converted texture also? On PPC texture conversion should
> be as fast as pure copying.
>
Currently, textures are converted when allocated, and a copy is kept in 
main memory. But we want to change that in a future release so that the 
conversion is done when the copy to the graphics board is made. You're 
completely right, the PPC can do that fast enough. After all, reads from 
system memory are much faster than writes to the graphics board, so the 
speed of the conversion should be nearly the same as a plain copy...

Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08665.001
Subject: Re: Textures.
From: Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
Date: Sat, 22 Sep 2001 19:41:55 +0200

On 21-Wrz-01 Thomas Frieden wrote:

> Hi,

> Michal Wozniak wrote:

>> But, why then I need to keep original texture memory, if it's
>> copied into a bitmap? Why not allocating a bitmap at the begining,
>> and then allow programmer to release memory. I know that when bitmap
>> is allocated then graphics board software allocates a piece of fastram
>> for it (to be stored in case of gfxram shortage), and tries to place it
>> into
>> gfxram. So why do we need this original buffer?
>> 

> The original images are needed again as soon as a texture is removed 
> from the graphics board.

    It required some thinking, but now its obwious to me too;))

 I thought it works like this:
  I load a texture
  pass it to the W3D
  W3D allocates a bitmap for it (is it only a struct, ar a whole new
bitmap?)
  CGX allocates a piece of mem to store it in case there is not enough
  free mem on board. (1)
  At first use it tries to place it into GFX mem.
  If it needs to be flushed it is copied into this temp mem (1)

    In this case there would be no need for original image. But also 
 every texture would need twice it's memory.

    The way it's handled no is a bit better, but IMHO, with better
 cooperation with CGX/P96 the amount of needed memory could be
 limited a bit more. But it would require some changes in CGX.

> Remember that the memory on the graphics board is rather limited, so 
> when new textures are uploaded, other textures are removed from the 
> graphics board. But if you need the old ones again, it has to be 
> uploaded again. This is done automatically by Warp3D, so the original 
> images must still be present.

    So if texture is flushed from gfx board memory (by other texture)
 it's memory is also dealocated? If not it would be better to do it the
 way I thought it's done. At least I think so;)

> If the format is directly supported, there's only one copy in main memory.

    Are you keeping converted texture also? On PPC texture conversion should
 be as fast as pure copying.

> Regards,

BTW. If someone is interseted, You could download our new demo from:
  ftp.klosz.art.pl/incoming/!!!!!! symphony stuff
!!!!!!!/amiga_demo/MWI-CKF.lzx.000
  ftp.klosz.art.pl/incoming/!!!!!! symphony stuff
!!!!!!!/amiga_demo/MWI-CKF.lzx.001


Regards


---------------------------------------------------
http://POCZTA.interia.pl/ - sa powody by korzystac!

@endnode
@node 08666.003
Subject: Re: Textures.
From: Robert Kihl <robert@snarl-up.com>
Date: Sun, 23 Sep 2001 16:27:23 +0100

On 23-Sep-01, DJNick wrote:

> Hello Michal
> 
> On 22-Sep-01, Michal Wozniak wrote:
>> BTW. If someone is interseted, You could download our new demo from:
>>  ftp.klosz.art.pl/incoming/!!!!!! symphony stuff
>> !!!!!!!/amiga_demo/MWI-CKF.lzx.000
>>  ftp.klosz.art.pl/incoming/!!!!!! symphony stuff
>> !!!!!!!/amiga_demo/MWI-CKF.lzx.001
> 
> Really worth downloading! I was enjoying watching it! Excellent design &
> music. Congratulations & keep up with great work :))

Yeah agree, that was a really nice demo. We need more cool stuff like that
:)


Cya
-- 
Robert Kihl

@endnode
@node 08666.002
Subject: Re: Textures.
From: DJNick <djnick@ptt.yu>
Date: Sun, 23 Sep 2001 03:51:31 +0100

Hello Michal

On 22-Sep-01, Michal Wozniak wrote:
> BTW. If someone is interseted, You could download our new demo from:
>  ftp.klosz.art.pl/incoming/!!!!!! symphony stuff
> !!!!!!!/amiga_demo/MWI-CKF.lzx.000
>  ftp.klosz.art.pl/incoming/!!!!!! symphony stuff
> !!!!!!!/amiga_demo/MWI-CKF.lzx.001

Really worth downloading! I was enjoying watching it! Excellent design & music. Congratulations & keep up with great work :))

Regards
-- 
<tsb>d.j.nick [d-tronic] / icq: 13794052
<tsb>URLs: http://www.djnick.com & http://www.d-tronic.com
<tsb>amiga1260T ppc 603e/166mhz; b-vision & 160mb ram; prelude1200; 17" DTK;
<tsb>32xCDrom & CDRW; zip100; 56K US-Robotic; hplj4MPlus & mustek 600 CU
@endnode
