@database 14&mp3.guide
@author "Pedro Duarte"
@$VER: 14bit + Full Quality mp3 Sound on the AMIGA v1.00
@wordwrap

@Node Main "Table Of Contents"

----------------------------------------------------------------------------
                  14 bit sound and Full Quality mp3 Sound
                         on an modest AMIGA  v1.00
----------------------------------------------------------------------------


                             @{B}-- CONTENTS --@{UB}


          *   @{" Introduction       " link intro}  Why did I do this
          *   @{" Requirements       " link req}  of it.

          *   @{"   T H E  D O C     " link doc}  itself ...

          *   @{" Distribution       " link dis}  Guess what
          *   @{" Author             " link Adress}  of this file



@EndNode
@Node intro " Introduction"



    This is a doc on about getting better sound from the AMIGA and full quality audio from MPEG3 files on slow CPUs.

    Have a reading 8)

@endnode
@node req " Hard-and-Soft-ware requirements "


    * For getting 14 bit audio
    ***************************

        - 14Bit_CDPlayer.lha (Aminet: disk/cdrom)

        - Play16             (Aminet:mus/play/)     - recommended

        - Any CPU     (i'm not really sure if a 68000 can fed data quickly
                         enough for 44Khz audio ... report me it, please)

        - OS2.0              (required for mounting Monitor drivers needed
                                   to audio output frequencies > 28khz)
        - ECS

        - A HD is handy ...


    * For mp3 decoding
    *******************

        - mpega.lha           (Aminet:mus/play)

        - at least a 68020 CPU (for the above ...)

        - Consider seriously to get an HD 8)


@endnode

@node dis " Bla Bla Bla "


    This file is freely distributable, but here's a NOTE TO MAGAZINES and CD COMPILATIONS :


      If you decided to include my program on a Coverdisk you'll you have to send me your magazine completely free, *with no* extra postal costs for me. The same for CD publishers (exception goes to the Aminet collections).
@Endnode
@Node doc " Here it goes ... "




       I've decided to split the doc on two topics. These are:


                         @{"   14 Bits Sound   " link 14}
 
                         @{"   The mp3 Stuff   " link mp3}
@EndNode

@Node 14 " Pure sound 8) "


    If you really doesn't know yet, it *is* possible to get more quality from the (until who knows?) standard @{" 8 bits hardware sound "  link 16}!

    All you need if to get hold on the Aminet file "14Bit_CDPlayer.lha" on disk/cdrom by Christian Buchner. This nice fellow discovered a very clever way of getting more "bits" - therefore quality - from the Paula chip. No need for expensive sound cards, just plain software. If you're interested to know more about, click @{" here " link jargon}.

    Well, to say the truth, the quality of it is not truly 14 bits ... It's really difficult to do the right calibration of the driver in order to archive that, and the AMIGA sound output is not linear, that is, the volume of the high frequencies is always lower than the low ones; Anyway, the quality jump is great, belive me !


PLEASE NOTE :
************
 Although the requested file is named "14Bit_CDPlayer.lha" you don't need at all to own a CD-ROM drive to have the 14 bit sound ... You simply will find the necessary files for it there.


    I think the more interesting part comes here: if you read the explanation of how the driver works, you'll get the (true) idea that this sound output depends on the video mode you're using while playing. So, if you have a plain C= 1085S PAL monitor like me, you'll find that's not possible to hear without loss of quality sounds that were sampled in more than 28 khz !  In fact, you'll need a Multisync of a VGA monitor to get at least 44 khz (CD quality) ...

But is *really* true ? Yes.  But can you fool the machine ?   Y E S !!!

    @{" I've found " link news} that you can have 44Khz (and higher) sound on a simple PAL (or NTSC) monitor !!!  All you have to do is getting your WorkBench disks and seek for a drawer called "Monitors" : There, you'll find the "Multiscan" file driver - drag it to your Sys:Devs/Monitors, so when booting the OS will mount this driver automatically (do a reboot now).

    If you run the preferences program "ScreenMode" you'll notice that a new list of MULTISCAN screen modes are now available ... Don't select any if you don't have a Multisync capable monitor - you will only get weird stripes on the screen and if you let it running too long, you might >damage< your monitor ! Be warned and don't blame me !

    The last piece of software needed is the excellent sound player "Play16" (Aminet:mus/play/): it has support for the 14 sound driver.

    To play the desired sound, read the its docs or simply type on a CLI window the following :

 Play16 Verbosity 1 Filter=off OUTPUT=Paula14c SCREENMODE 0 <sample_name>

    After this (and if you have the Multiscan monitor correctly mounted) the screen will go wild since play16 it will open a promoted screen mode, so turn your monitor off NOW ! (or better, before running Play16) - Don't let it too long or you might damage your monitor/TV set !!!

    And then the sound will be played now gracefully 8).  To stop it, just press Ctrl + C. (Play16 will close the nasty screen after it).

    Of course, if you want to hear quality samples, choose 16 bit ones ;)


    Nice, isn't it?
    Now, go and read also the mp3 section ...

@EndNode

@node 16 " The truth, at last "


    Surprising enough the hardware audio of the AMIGA is a two channels
16 bit(!) thing, but it was configured into 4 channels 8 bits.


    Interesting, don't you think ?

@EndNode
@node news " The power of the word ..."



    A fine day, I had the idea of posing the question on the comp.sys.amiga.programmer newsgroup : "since the maximum sound output is dependent on the screenmode, in theory by opening a promoted screen it would be possible then to play samples at higher rates than 28khz - the only disavantage would be no display on PAL/NTSC monitors ..."

    I has susprised to know that it was possible to mount the monitor drivers >without< having to own a real monitor !!! And some people who replied me already knew and used this trick !

    Then I decided to spread this nice hack to all of the people (like me) who didn't knew, by typing this .guide.


@endnode

@node  jargon "About the 14 Bit Driver"


    This is the explanation I've taken from the documentation of GMPlay :


                          About the 14 Bit Driver
                          -----------------------

My  14  bit  driver  allows  the Amiga to play one Stereo channel in 14 bit
dynamic  resolution.   This is almost as good as a CD player!  Depending on
the screen mode, you can play at 28khz, 56 or 78 khz.  You will have to use
a 30khz screen mode for using 44.1 kHz CD quality.

The  14  Bit  Driver  is  part of a project called "CyberSound", which will
probably  be  never  completed  (unfortunately).   It  is supposed to allow
device  independent  audio output.  A similar sound driver will probably be
created for the Toccata audio board.

The  14 bit quality is created by using a cute trick.  Two 8 bit resolution
channels  are  added  for gaining 14 bits.  The second channel is played at
1/64  of  the volume of the first channel and gives 6 additional bits.  The
low  pass  audio  filter  (coupled  with  the computer's power led) will be
turned off in order to achieve a more brilliant sound.

The  14  Bit Driver can be calibrated for minimizing noise distortion.  Use
the  14Bit_Calibration  program  for this purpose.  The calibration process
will take approximately 15-30 minutes and requires a good HIFI equipment or
headphones.   By  calibrating,  you will measure out the non-linearities of
your  computer's  D/A  converters.   My software then take respect of these
settings and can improve its sound quality.

The  14  Bit  Driver  is  still under development.  You can find an earlier
version    on    Aminet   (including   Source)   in   an   archive   called
"14Bit_CDPlayer.lha".

@endnode
@Node req " Requirements "


    This program requires at least OS2.xx. Anyway, it would not be of any use to users of OS1.3, since this OS don't have the WBStartup thing.

Also the DOS comms:

    - Setpatch
    - Rename
    - Wait
    - LoadWB

@EndNode

@Node Adress " Address "


My home address:

      Pedro Duarte
      R. Palmira Bastos, 17 R/C DTO
      Bons-Dias
      2675 Ramada
      Portugal


My electronic address:

      l21893@alunos.cc.fc.ul.pt               (try this first ...)
or
      df21893@einstein.cc.fc.ul.pt

@EndNode

@node mp3 " MPEG Audio Layer 3 "


    My AMIGA gives only 4.45 Mips on Sysinfo 3.24 and I have full quality mpeg audio. Even users with fewer CPU power can *always* have full quality 44khz mpeg audio output ... What's the trick ?

    Simple, instead of realtime decoding (which fast CPUs are mandatory) I decode the .mp3 files into my HD! Then, I play it from it!

    All you have to do is get the excellent "mpega" (Aminet:mus/play) by Stéphane TAVENARD, have a '020 or better CPU to use it (sorry 68000 users ...) and some free @{" space " link space} on you HD to do the job. It'll decode the mp3 and output the sound into a AIFF file. Have a reading of its documentation or take this shortcut :


             mpega -s -T <.mp3 filename> -A <output filename>


    When it finishes the hard work, just hear the obtained file with Play16 (see the "14 Bits Sound" section)

 
@endnode

@node space " Some math "


    An easy way of estimate the required free space needed for the output file of "mpega" when the frequency used is 44khz (for maximum quality) is the following formula :

               ( (60 x minutes) + seconds ) x 44100 x 4 (bytes)

    This could be a lot !

Please note that "minutes" and "seconds" refers to the song's duration which can be obtained by running mpega <.mp3 file> and pressing Ctrl + C to stop it.

@endnode
