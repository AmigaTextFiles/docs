@database mails
@node main
                          3D World Mailing List Archive

                                   March 2002

             Compiled by Paul Qureshi (paul.qureshi@btinternet.com)

For more information on the 3D World Mailing List please read the FAQ. It is available at various sites:

Aminet: docs/misc/3DWorldFAQ.lha
http://mc68k.btinternet.com/faq/
The 3D World ML, monthly post

@{"Re: Re: Compilers for 3D                             " link 08826.004} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Re: Compilers for 3D                             " link 08826.003} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Compilers for 3D                                 " link 08825.004} Wolfgang Krause <wkrause@vossnet.de>
@{"Re: Compilers for 3D                                 " link 08826.002} Paul Qureshi <paul@world3.net>
@{"Re: Compilers for 3D                                 " link 08826.001} Paul Qureshi <paul@world3.net>
@{"Re: Re: Compilers for 3D                             " link 08825.003} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Re: Compilers for 3D                             " link 08825.002} Hans-Joerg Frieden <Hans-JoergF@hyperion-entertainment.com>
@{"Re: Compilers for 3D                                 " link 08825.001} Paul Qureshi <paul@world3.net>
@{"StormC3 problem                                      " link 08826.005} Alessandro Braccini <alex_dran@libero.it>
@{"Re: C stubs and lib for Warp3D 4                     " link 08828.003} Olivier Fabre <off@free.fr>
@{"Texture mapping problem                              " link 08828.002} Paul Qureshi <paul@world3.net>
@{"C stubs and lib for Warp3D 4                         " link 08828.001} Paul Qureshi <paul@world3.net>
@{"Re: Texture mapping problem                          " link 08830.002} Paul Qureshi <paul@world3.net>
@{"Re: Texture mapping problem                          " link 08830.001} Paul Qureshi <paul@world3.net>
@{"Re: Texture mapping problem                          " link 08829.001} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Re: Texture mapping problem                      " link 08830.007} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Re: Texture mapping problem                      " link 08830.006} Hans-Joerg Frieden <Hans-JoergF@hyperion-entertainment.com>
@{"Re: Texture mapping problem                          " link 08830.005} Paul Qureshi <paul@world3.net>
@{"Re: Texture mapping problem                          " link 08830.004} Paul Qureshi <paul@world3.net>
@{"Re: Re: Texture mapping problem                      " link 08830.003} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"zbuffer accuracy and triangle intersecting.          " link 08832.001} Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
@{"Re: zbuffer accuracy and triangle intersecting.      " link 08834.001} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Re: zbuffer accuracy and triangle intersecting.  " link 08836.001} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: zbuffer accuracy and triangle intersecting.      " link 08835.001} Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
@{"RE: Re: zbuffer accuracy and triangle intersecting.  " link 08838.003} Barry Paterson <Barry.Paterson@warthog.co.uk>
@{"Re: Re: zbuffer accuracy and triangle intersecting.  " link 08838.002} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: zbuffer accuracy and triangle intersecting.      " link 08838.001} Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
@{"Re: zbuffer accuracy and triangle intersecting.      " link 08839.001} Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
@{"minigl                                               " link 08839.002} Jan-Erik Karlsson <trg@privat.utfors.se>
@{"Support                                              " link 08842.009} Johan Forsberg <graak@telia.com>
@{"Re: Re: Z buffering and lines in StormMESA           " link 08842.008} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Z buffering and lines in StormMESA               " link 08842.007} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Z buffering and lines in StormMESA               " link 08842.006} Hans-Joerg Frieden <Hans-JoergF@hyperion-entertainment.com>
@{"Re: Z buffering and lines in StormMESA               " link 08842.005} Alan Buxey <almb@mssl.ucl.ac.uk>
@{"Re: Z buffering and lines in StormMESA               " link 08842.004} Paul Qureshi <paul@world3.net>
@{"Re: Z buffering and lines in StormMESA               " link 08842.003} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: minigl                                           " link 08842.002} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Re: zbuffer accuracy and triangle intersecting.  " link 08842.001} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Re: Z buffering and lines in StormMESA           " link 08844.002} Alan Buxey <almb@mssl.ucl.ac.uk>
@{"Re: Z buffering and lines in StormMESA               " link 08843.003} Paul Qureshi <paul@world3.net>
@{"Re: zbuffer accuracy and triangle intersecting.      " link 08844.001} Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
@{"Re: Z buffering and lines in StormMESA               " link 08843.002} Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
@{"Re: Support                                          " link 08843.001} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Re: Z buffering and lines in StormMESA           " link 08845.003} "Alkis Tsapanidis" <dial@otenet.gr>
@{"RE: Re: Z buffering and lines in StormMESA           " link 08845.002} Barry Paterson <Barry.Paterson@warthog.co.uk>
@{"Re: Z buffering and lines in StormMESA               " link 08845.001} Paul Qureshi <paul@world3.net>
@{"Re: Re: zbuffer accuracy and triangle intersecting.  " link 08844.004} Hans-Joerg Frieden <Hans-JoergF@hyperion-entertainment.com>
@{"Re: Z buffering and lines in StormMESA               " link 08844.003} Paul Qureshi <paul@world3.net>
@{"Re: Re: zbuffer accuracy and triangle intersecting.  " link 08846.004} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Z buffering and lines in StormMESA               " link 08846.003} Christopher Kossa <abattoir@optonline.net>
@{"Re: Z buffering and lines in StormMESA (getting OT)  " link 08846.002} Christopher Kossa <abattoir@optonline.net>
@{"Re: Z buffering and lines in StormMESA               " link 08845.005} Paul Qureshi <paul@world3.net>
@{"Re: Z buffering and lines in StormMESA               " link 08845.004} Paul Qureshi <paul@world3.net>
@{"unsubscribe                                          " link 08846.001} Mike Dempster <mikedempster@loop.com>
@{"Re: Re: zbuffer accuracy and triangle intersecting.  " link 08846.009} Hans-Joerg Frieden <Hans-JoergF@hyperion-entertainment.com>
@{"Re: Re: zbuffer accuracy and triangle intersecting.  " link 08846.008} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"RE: Re: Z buffering and lines in StormMESA           " link 08846.007} Yoris Benjamin <byoris@fr.infogrames.com>
@{"Re: zbuffer accuracy and triangle intersecting.      " link 08846.006} Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
@{"Re: Z buffering and lines in StormMESA               " link 08846.005} Paul Qureshi <paul@world3.net>
@{"Re: StormMESA really sucks                           " link 08849.005} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Re: zbuffer accuracy and triangle intersecting.  " link 08849.004} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: StormMESA really sucks                           " link 08849.003} Paul Qureshi <paul@world3.net>
@{"StormMESA really sucks                               " link 08849.002} Paul Qureshi <paul@world3.net>
@{"Re: zbuffer accuracy and triangle intersecting.      " link 08849.001} Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
@{"Re: Re: StormMESA really sucks                       " link 08851.001} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Re: StormMESA really sucks                       " link 08850.004} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: W3D hardware/bitmap locking                      " link 08850.003} Hans-Joerg Frieden <Hans-JoergF@hyperion-entertainment.com>
@{"Re: StormMESA really sucks                           " link 08850.002} Paul Qureshi <paul@world3.net>
@{"W3D hardware/bitmap locking                          " link 08850.001} Olivier Fabre <off@free.fr>
@{"Re: Warp3D doesn't work anymore                      " link 08852.003} Christopher Kossa <abattoir@optonline.net>
@{"Re: Warp3D doesn't work anymore                      " link 08852.002} Alexander Weber <alexwe@alexwe.de>
@{"Re: Warp3D doesn't work anymore                      " link 08852.001} Alexander Weber <alexwe@alexwe.de>
@{"Re: Warp3D doesn't work anymore                      " link 08851.007} Shaun Brown <shaunbrown@madasafish.com>
@{"Re: Warp3D doesn't work anymore                      " link 08851.006} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Warp3D doesn't work anymore                      " link 08851.005} Johan Forsberg <graak@telia.com>
@{"Re: Warp3D doesn't work anymore                      " link 08851.004} Alexander Weber <alexwe@alexwe.de>
@{"Re: Warp3D doesn't work anymore                      " link 08851.003} Shaun Brown <shaunbrown@madasafish.com>
@{"Warp3D doesn't work anymore                          " link 08851.002} Alexander Weber <alexwe@alexwe.de>
@{"Re: Warp3D doesn't work anymore                      " link 08853.001} Alexander Weber <alexwe@alexwe.de>
@{"Re: Re: Warp3D doesn't work anymore                  " link 08852.004} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Alpha testing without texturing                  " link 08855.001} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Alpha testing without texturing                      " link 08854.001} Olivier Fabre <off@free.fr>
@{"Re: MiniGL: StormC or my code?                       " link 08856.002} Olivier Fabre <off@free.fr>
@{"Re: MiniGL: StormC or my code?                       " link 08856.001} Paul Qureshi <paul@world3.net>
@{"Re: MiniGL: StormC or my code?                       " link 08855.006} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: Re: Alpha testing without texturing              " link 08855.005} Thomas Frieden <ThomasF@hyperion-entertainment.com>
@{"Re: MiniGL: StormC or my code?                       " link 08855.004} Olivier Fabre <off@free.fr>
@{"Re: Alpha testing without texturing                  " link 08855.003} Olivier Fabre <off@free.fr>
@{"MiniGL: StormC or my code?                           " link 08855.002} Paul Qureshi <paul@world3.net>
@endnode
@node 08826.004
Subject: Re: Re: Compilers for 3D
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Fri, 01 Mar 2002 23:38:18 +0100

Hi,

Paul Qureshi wrote:

>I was really looking foreward to studying compiler design, but it was
>canceled this year :(
>
I had 4 lectures on compiler design... I still don't get around in gcc :(

>I suppose the best way to make use of Altivec is just to use something
>like OpenGL and rely on it's pipeline being optimised as much as
>possible. That way you don't have to do any special code.
>

Yes, but you could also use it in your own code...

>>It can do 4 float operations in parallel. When you think of a
>>matrix-vector multiplication, this is basically a sum of products. You
>>"multiply" every line of the matrix with the vector to get one element
>>of the target vector. That's basically 4 mults that will be
>>accumulated. So, without actually knowing how it looks like, I would
>>guess that you do these 4 mults in parallel, and add the results...
>>
>
>Perhaps the add is somehow given for 'free' two, then just four
>instructions could do a an entire vector-matrix multiplication!
>

The normal PPC instruction set includes a "mult and add floating point" 
instruction, i.e. multiply two registers and add it to a third. I would 
bet that something similar is in Altivec....


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08826.003
Subject: Re: Re: Compilers for 3D
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Fri, 01 Mar 2002 23:18:39 +0100

Hi,

Wolfgang Krause wrote:

>>ehh Warp3D, sleep, quake2, real 4d (or whatever it's called now), soldier
>>of fortune (have I forgotten something? probably)
>>
>
>Worms Armageddon? Don't know for sure but what about Alien Nations? Is it
>you, Hyperion, doing the port?
>

No, it's not us, but Titan.


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08825.004
Subject: Re: Compilers for 3D
From: Wolfgang Krause <wkrause@vossnet.de>
Date: 01 Mar 2002 22:41:16 +0100

Hello Jan-Erik!

You wrote:

[...snip...]

> ehh Warp3D, sleep, quake2, real 4d (or whatever it's called now), soldier
> of fortune (have I forgotten something? probably)

Worms Armageddon? Don't know for sure but what about Alien Nations? Is it
you, Hyperion, doing the port?


> have you guys invented something that gives you more than 24hrs in a day?
> :-)

They have - 48hrs in two days ;)

> btw, great job on just about everything you lot at hyperion have done.


I subscribe to that.


Regards,
Wolfgang

@endnode
@node 08826.002
Subject: Re: Compilers for 3D
From: Paul Qureshi <paul@world3.net>
Date: Fri, 01 Mar 2002 22:16:01 +0100

Hi Thomas.

>> I guess there is still plenty of room for hand optimisation then :)

> Sure... How could a compiler even decide what to do vectored, and what
> not... I rmember a lecture about that...

I was really looking foreward to studying compiler design, but it was
canceled this year :(

I suppose the best way to make use of Altivec is just to use something
like OpenGL and rely on it's pipeline being optimised as much as
possible. That way you don't have to do any special code.

>> So how would you use it? Set up a matrix and just pump vectors into
>> it?

> It can do 4 float operations in parallel. When you think of a
> matrix-vector multiplication, this is basically a sum of products. You
> "multiply" every line of the matrix with the vector to get one element
> of the target vector. That's basically 4 mults that will be
> accumulated. So, without actually knowing how it looks like, I would
> guess that you do these 4 mults in parallel, and add the results...

Perhaps the add is somehow given for 'free' two, then just four
instructions could do a an entire vector-matrix multiplication!

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08826.001
Subject: Re: Compilers for 3D
From: Paul Qureshi <paul@world3.net>
Date: Fri, 01 Mar 2002 22:12:52 +0100

Hi Hans-Joerg.

>> So how would you use it? Set up a matrix and just pump vectors into
>> it?

> No. I don't know the details, but it basically has a set of registers
> that you need to load, and then you have a set of parallel
> instructions that can operate on them. One of the advantages over e.g.
> 3Dnow! is that it has enough registers to do a full matrix-vector
> multiplication *and* leave the matrix untouched, so that you only need
> to load the next vector and repeat the steps. Most others have barely
> enough registers, so you need to reload the matrix too.

That's kind of what I was thinking of. It's interesting what you say
about the greater number of registers available, becuase that should
really help even without Altivec.

> To the best of my knowledge both IBM and Motorola have inhouse
> compilers for PowerPC, and Motorola will probably also have their own
> 68k compiler.

I will have a look around, perhaps they are publicly available? I think
I read that the Intel one was free... the article compared it to GCC,
and of course it was much better at optimisation but not as compatable
as GCC.

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08825.003
Subject: Re: Re: Compilers for 3D
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Fri, 01 Mar 2002 21:38:43 +0100

Hi,

Paul Qureshi wrote:

>>There is a patch available for gcc to support altivec. It works by 
>>providing a new __attribute__ tag for inlining altivec stuff. I don't 
>>think that it does it automatically.
>>
>
>I guess there is still plenty of room for hand optimisation then :)
>

Sure... How could a compiler even decide what to do vectored, and what 
not...  I rmember a lecture about that...

>>Yes, Altivec is a vector processing unit. IIRC it can operate on 16 
>>bytes at a time, either as 16 bytes, 8 words, 4 longs or 4 floats.
>>
>
>So how would you use it? Set up a matrix and just pump vectors into it?
>

It can do 4 float operations in parallel. When you think of a 
matrix-vector multiplication, this is basically a sum of products. You 
"multiply" every line of the matrix with the vector to get one element 
of the target vector. That's basically 4 mults that will be accumulated. 
So, without actually knowing how it looks like, I would guess that you 
do these 4 mults in parallel, and add the results...

>>The -O3 optimization does not work. It is supposed to work for -O2 but
>>I had problems even with that. Sometimes the compiler optimizes more
>>than he should, the result is disappearing code. Add a printf,
>>suddenly it works. Remove it again, crash.
>>
>
>Sounds bad... but I suppose the motivation to update the 68k stuff just
>isn't there. I'm a little surprised Motorola have not done anything
>about it though, especially for things like Coldfire. I hear the Intel
>x86 compiler is very good, but then again it should be!
>

The PPC part is also quite good. I don't know about the V 3, though. But 
I just saw that a 3.0.4 is out, I'll have a look at it...


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08825.002
Subject: Re: Re: Compilers for 3D
From: Hans-Joerg Frieden <Hans-JoergF@hyperion-entertainment.com>
Date: Fri, 01 Mar 2002 21:17:14 +0100

Paul Qureshi wrote:

>I guess there is still plenty of room for hand optimisation then :)
>
Definately. I don't think that the compiler generates or uses altivec by 
itself.

>So how would you use it? Set up a matrix and just pump vectors into it?
>
No. I don't know the details, but it basically has a set of registers 
that you need to load, and then you have a set of parallel instructions 
that can operate on them. One of the advantages over e.g. 3Dnow! is that 
it has enough registers to do a full matrix-vector multiplication *and* 
leave the matrix untouched, so that you only need to load the next 
vector and repeat the steps. Most others have barely enough registers, 
so you need to reload the matrix too.

>Sounds bad... but I suppose the motivation to update the 68k stuff just
>isn't there. I'm a little surprised Motorola have not done anything
>about it though, especially for things like Coldfire. I hear the Intel
>x86 compiler is very good, but then again it should be!
>
To the best of my knowledge both IBM and Motorola have inhouse compilers 
for PowerPC, and Motorola will probably also have their own 68k compiler.

Regards,

-- 
Hans-Joerg Frieden
Senior Software Developer, Hyperion Entertainment
Mail: Hans-JoergF@hyperion-software.de
Web: http://www.hyperion-entertainment.com



@endnode
@node 08825.001
Subject: Re: Compilers for 3D
From: Paul Qureshi <paul@world3.net>
Date: Fri, 01 Mar 2002 12:07:44 +0100

Hi Hans-Joerg.

On 28-Feb-02, Hans-Joerg Frieden wrote:

> There is a patch available for gcc to support altivec. It works by 
> providing a new __attribute__ tag for inlining altivec stuff. I don't 
> think that it does it automatically.

I guess there is still plenty of room for hand optimisation then :)

> Yes, Altivec is a vector processing unit. IIRC it can operate on 16 
> bytes at a time, either as 16 bytes, 8 words, 4 longs or 4 floats.

So how would you use it? Set up a matrix and just pump vectors into it?

>> You mean the code does not work? That's interesting, and well worth
>> knowing as I'm sure many people would simply set all optimisations to
>> maximum when compiling a final release version of their code.
 
> The -O3 optimization does not work. It is supposed to work for -O2 but
> I had problems even with that. Sometimes the compiler optimizes more
> than he should, the result is disappearing code. Add a printf,
> suddenly it works. Remove it again, crash.

Sounds bad... but I suppose the motivation to update the 68k stuff just
isn't there. I'm a little surprised Motorola have not done anything
about it though, especially for things like Coldfire. I hear the Intel
x86 compiler is very good, but then again it should be!

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08826.005
Subject: StormC3 problem
From: Alessandro Braccini <alex_dran@libero.it>
Date: Sat, 02 Mar 2002 13:05:16 +0200


Hi all,

I have a lot of problem using warp3d with stormc3.

Anyone experienced this??

Thank you.
Alessandro Braccini.

@endnode
@node 08828.003
Subject: Re: C stubs and lib for Warp3D 4
From: Olivier Fabre <off@free.fr>
Date: Mon, 04 Mar 2002 17:43:32 +0100

On 04-mars-02, Paul Qureshi, you wrote:

> I have managed to compile everything I need to use Warp3D V4 with
> StormC, and probably most other compilers.

BTW, I have fixed W3D includes (the FD and protos) for VBCC/WOS. The
protos contained only W3D v3 functions, and the FD had a bug for one
function (one parameter/register was missing).

If someone's interested... I can mail the includes and w3d.lib stub lib
for WOS (stub lib untested though - I'm using inlines).

(I *hope* I didn't make any mistake... because I didn't manage to
display something using vertex arrays yet)

@endnode
@node 08828.002
Subject: Texture mapping problem
From: Paul Qureshi <paul@world3.net>
Date: Mon, 04 Mar 2002 17:28:32 +0100

Hi.

I am having trouble getting texture mapping to work in Warp3D. I have
enabled W3D_TEXMAPPING, but it seems like nothing is drawn. When I
disable texture mapping, I see the triangle I was trying to draw. Any
ideas what could cause this? Here is a relevant sample of my code:



    W3D_SetState(context, W3D_AUTOTEXMANAGEMENT, W3D_ENABLE);

    tex = W3D_AllocTexObjTags(context, &CError,
                W3D_ATO_IMAGE, &texdata,
                W3D_ATO_FORMAT, W3D_R8G8B8,
                W3D_ATO_WIDTH, 32,
                W3D_ATO_HEIGHT, 32,
                TAG_DONE);

    if (tex = NULL)
    {
        printf("Could not allocate texture object!\n");
        cleanexit();
    }

    W3D_SetState(context, W3D_TEXMAPPING, W3D_ENABLE);
    W3D_SetTexEnv(context, tex, W3D_REPLACE, NULL);
    W3D_SetWrapMode(context, tex, W3D_REPEAT, W3D_REPEAT, NULL);
    W3D_SetState(context, W3D_GOURAUD, W3D_ENABLE);
    W3D_SetState(context, W3D_BLENDING, W3D_DISABLE);
    W3D_SetState(context, W3D_DITHERING, W3D_ENABLE);

    col.r = 1;
    col.g = 1;
    col.b = 1;
    W3D_SetCurrentColor(context, &col);

    if (W3D_SetDrawRegion(context, bm, 0, NULL) != W3D_SUCCESS)
    {
        printf("Could not set up drawing region!\n");
        cleanexit();
    }
    
    if (W3D_LockHardware(context) != W3D_SUCCESS)
    {
        printf("Could not lock hardware!\n");
        cleanexit();
    }

    tri.v1.x = 10;
    tri.v1.y = 10;
    tri.v1.z = 0;
    tri.v1.w = 0 - tri.v1.z;
    tri.v1.u = 0;
    tri.v1.v = 0;
    tri.v1.color.r = 1;
    tri.v3.color.g = 0;
    tri.v3.color.b = 0;

    tri.v2.x = 700;
    tri.v2.y = 700;
    tri.v2.z = 0;
    tri.v2.w = 0 - tri.v1.z;
    tri.v2.u = 10;
    tri.v2.v = 10;
    tri.v3.color.r = 0;
    tri.v2.color.g = 1;
    tri.v3.color.b = 0;

    tri.v3.x = 10;
    tri.v3.y = 700;
    tri.v3.z = 0;
    tri.v3.w = 0 - tri.v1.z;
    tri.v3.u = 0;
    tri.v3.v = 10;
    tri.v3.color.r = 0;
    tri.v3.color.g = 0;
    tri.v3.color.b = 1;

    tri.tex = tex;

    W3D_DrawTriangle(context, &tri);

    W3D_UnLockHardware(context);



Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08828.001
Subject: C stubs and lib for Warp3D 4
From: Paul Qureshi <paul@world3.net>
Date: Mon, 04 Mar 2002 15:23:40 +0100

Hi all.

I have managed to compile everything I need to use Warp3D V4 with
StormC, and probably most other compilers. Firstly, I have some C stub
functions to provide some tag functions. At the moment I only have three
functions supported (W3D_CreateContextTags, W3D_BestModeIDTags, and
W3D_RequestModeTags) so far. I have also created the warp3d.lib needed
for compilation.

I thought some people might find these useful. Perhaps someone could
create a complete set of c stubs? For some reason FD2Pragma won't create
all the needed functions, perhaps because they pass more than just the
tags. Alternativly, maybe I'm just too dumb to use it :)

Anyway, mail me if you want the files.

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08830.002
Subject: Re: Texture mapping problem
From: Paul Qureshi <paul@world3.net>
Date: Tue, 05 Mar 2002 23:32:05 +0100

Hi Thomas.

> Paul, you might want to check the return value of the W3D_DrawTriangle
> call, maybe it reports an error ...

Good idea, I'll try it.

> i.e. you could also disable gouraud
> shading...

> Plus, I noticed that you mix up the vertex numbering when setting the 
> colors:

<snip>

Hmm... I really should not try to code when I'm tired, I can hardly read
what I'm typing now :)

> You also have a funny way of setting the w coordinate ;)

To be honest, I have no idea what to do with it, when I read the docs my
brain just sort of melted... as I'm not planning to use the Z buffer, I
decided to just leave it at something that worked ;)

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08830.001
Subject: Re: Texture mapping problem
From: Paul Qureshi <paul@world3.net>
Date: Tue, 05 Mar 2002 23:28:02 +0100

Hi Robert.

> I couldn't see anything wrong with the code. I have couple of ideas
> what could be wrong, but they might not be too good :o)

Any help would be much appreciated :)

> Maybe you should set the alpha value of each vertex to 1? ...don't
> think it should matter here though since you don't do blending.

That's what I figured, but I tried it anyway and it didn't help.

> Might need to disable backface culling, or set it to the order that
> you draw the triangle. But I think that should remove the triangle
> when not doing texturemapping also...?

Good point, I'll try that. I didn't think I enabled it, and the docs say
it's not on my default, but worth a try.

> Try to diable perspective mapping.

Good idea, my w coordinate is fudged anyway.

Thanks a lot, I'll give your ideas a go...

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08829.001
Subject: Re: Texture mapping problem
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Tue, 05 Mar 2002 23:27:50 +0100

Hi,

Robert Kihl wrote:

>Not much help eh? :) ...I bet the Friedens have better ideas.
>

Not really, that's why I didn't answer yet...

Paul, you might want to check the return value of the W3D_DrawTriangle 
call, maybe it reports an error ...

BTW, you enable gouraud shading, but set the texture environment to 
REPLACE. This doesn't do anything, as REPLACE will replace the fragment 
with the texture, i.e. you could also disable gouraud shading...

Plus, I noticed that you mix up the vertex numbering when setting the 
colors:

...
tri.v1.color.r = 1;
tri.v3.color.g = 0;
tri.v3.color.b = 0;
...
tri.v3.color.r = 0;
tri.v2.color.g = 1;
tri.v3.color.b = 0;
...
tri.v3.color.r = 0;
tri.v3.color.g = 0;
tri.v3.color.b = 1;

This will of course not cause the texture map to dissappear, but still 
might be trouble later...

You also have a funny way of setting the w coordinate ;)


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08830.007
Subject: Re: Re: Texture mapping problem
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Wed, 06 Mar 2002 18:52:46 +0100

Hi,

Paul Qureshi wrote:

>>Just use something that's a reciprocal of z, for example 1/z will do,
>>as well as something like 10/z...
>>
>
>That's what I figured, and in fact I had it that way until I realised
>that at z=0 a black hole would appear :)
>
>I guess in practical terms I should limit my values of Z between 1 and
>0.01 or something.
>

Exactly.  In a real application, you would clip on the front/back 
planes, anyway...


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com




@endnode
@node 08830.006
Subject: Re: Re: Texture mapping problem
From: Hans-Joerg Frieden <Hans-JoergF@hyperion-entertainment.com>
Date: Wed, 06 Mar 2002 16:22:32 +0100

Paul Qureshi wrote:

>That's what I figured, and in fact I had it that way until I realised
>that at z=0 a black hole would appear :)
>
>I guess in practical terms I should limit my values of Z between 1 and
>0.01 or something.
>
That depends on the compare function. You should use one of the "... or 
equal" functions to include the z=0 case.

Regards,

-- 
Hans-Joerg Frieden
Senior Software Developer, Hyperion Entertainment
Mail: Hans-JoergF@hyperion-software.de
Web: http://www.hyperion-entertainment.com



@endnode
@node 08830.005
Subject: Re: Texture mapping problem
From: Paul Qureshi <paul@world3.net>
Date: Wed, 06 Mar 2002 15:10:04 +0100

Hi guys.

I fixed the problem... checking the return from DrawTriangle() revealed
that the texture was missing, and a quick scan of the code found the
error. You guessed it, I made the oldest mistake in the book and just
could not spot it: I wrote "=" instead of "==" ;)

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08830.004
Subject: Re: Texture mapping problem
From: Paul Qureshi <paul@world3.net>
Date: Wed, 06 Mar 2002 12:29:05 +0100

Hi Thomas.

>> To be honest, I have no idea what to do with it, when I read the docs
>> my brain just sort of melted... as I'm not planning to use the Z
>> buffer, I decided to just leave it at something that worked ;)

> Just use something that's a reciprocal of z, for example 1/z will do,
> as well as something like 10/z...

That's what I figured, and in fact I had it that way until I realised
that at z=0 a black hole would appear :)

I guess in practical terms I should limit my values of Z between 1 and
0.01 or something.

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08830.003
Subject: Re: Re: Texture mapping problem
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Wed, 06 Mar 2002 02:35:03 +0100

Hi,

Paul Qureshi wrote:

>>Plus, I noticed that you mix up the vertex numbering when setting the 
>>colors:
>>
>
><snip>
>
>Hmm... I really should not try to code when I'm tired, I can hardly read
>what I'm typing now :)
>

Tell me about it :)

>>You also have a funny way of setting the w coordinate ;)
>>
>
>To be honest, I have no idea what to do with it, when I read the docs my
>brain just sort of melted... as I'm not planning to use the Z buffer, I
>decided to just leave it at something that worked ;)
>

Just use something that's a reciprocal of z, for example 1/z will do, as 
well as something like 10/z...



Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08832.001
Subject: zbuffer accuracy and triangle intersecting.
From: Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
Date: Thu, 07 Mar 2002 22:59:23 +0200

Yellow,

part one.

    one thing about z buffer accuracy. does supplying
zbuffer value as double instead of float improve accuracy
on 16bit zbuffer (it's 16bit on permedia?). And if yes, is
it visible?

    and what zbuffer depth voodoo have?

part two.

    i'm implementing some kind of projected shadows, and i
need to find texture coordinates at certain triangle point.
this point is for sure inside triangle and lies on it's
plane. i can project this triangle into 2d and check it
there, but maybe there is a faster way of doing it?


Regards.
-- 

// Michal "kiero" Wozniak
// Graphics programming


----------------------------------------------------------------------
Wejdz do gry! Pilkarska Ruletka! >>> http://ruletka.interia.pl/


@endnode
@node 08834.001
Subject: Re: zbuffer accuracy and triangle intersecting.
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Sun, 10 Mar 2002 13:34:34 +0100

Hi,

Michal Wozniak wrote:

>one thing about z buffer accuracy. does supplying
>zbuffer value as double instead of float improve accuracy
>on 16bit zbuffer (it's 16bit on permedia?). And if yes, is
>it visible?
>
>    and what zbuffer depth voodoo have?
>

The Voodoo is 16 bit, and unfortunately, this might show. The problem 
can be compensated somewhat by the appropriate projection of the Z 
coordinates, i.e. if you can somehow ensure that the Z coordinates are 
distributed "evenly" (they aren't linear of course, but I guess you know 
what I mean) in the Z range. Unfortunately, this is also a very 
problematic issue, as this can't always be done that way.

>i'm implementing some kind of projected shadows, and i
>need to find texture coordinates at certain triangle point.
>this point is for sure inside triangle and lies on it's
>plane. i can project this triangle into 2d and check it
>there, but maybe there is a faster way of doing it?
>

I think you could look up something on "barycentric coordinates". IIRC, 
this is a way of expressing coordinates on the inisde of a triangle.


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08836.001
Subject: Re: Re: zbuffer accuracy and triangle intersecting.
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Mon, 11 Mar 2002 21:45:57 +0100

Hi,

Michal Wozniak wrote:

>
>    ok, this sounds reasonable, but i thought that the
> difference won't be that much visible.
> 
>
I know that a lot of games under Windows have problems with 16 bit 
zbuffering. Window's OpenGL by default opens the zbuffer with the same 
bit depth as the color buffer (on my old GeForce), and in this case, I 
get lots of artifacts, especially with stuff like decals on walls...

>>I think you could look up something on "barycentric
>>coordinates". IIRC, this is a way of expressing
>>coordinates on the inisde of a triangle.
>>
>
>    thanks, this is something I was looking for. this
> is a great solution for my problem (lots of computations
> can be saved or reused).
>

Good :)

>BTW. Some time ago i was writing about strange shading
> erors with UBYTE colors. Fot all that time i was using
> floats and the forgot about the problem, but recently
> i thought to try it again, and the problem seem to be
> still there. i mean shading errors (gouraud) under some
> circumstances. I will try to investigate this a bit
> more when i will have some more time, and will let You
> know.
>

Uh, that reminds me that I wanted to fix this bug :( I'll try to get on 
it this week...


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08835.001
Subject: Re: zbuffer accuracy and triangle intersecting.
From: Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
Date: Mon, 11 Mar 2002 15:45:00 +0200

On 10-Mar-02 Thomas Frieden wrote:

> Hi,

    Yellow,

> Michal Wozniak wrote:

> The Voodoo is 16 bit, and unfortunately, this might show.
> The problem can be compensated somewhat by the appropriate
> projection of the Z coordinates, i.e. if you can somehow
> ensure that the Z coordinates are distributed "evenly"
> (they aren't linear of course, but I guess you know what I
> mean) in the Z range. Unfortunately, this is also a very
> problematic issue, as this can't always be done that way.

    ok, this sounds reasonable, but i thought that the
 difference won't be that much visible.
 
 

>> i'm implementing some kind of projected shadows, and i
>> need to find texture coordinates at certain triangle
>> point. this point is for sure inside triangle and lies on
>> it's plane. i can project this triangle into 2d and check
>> it there, but maybe there is a faster way of doing it?


> I think you could look up something on "barycentric
> coordinates". IIRC, this is a way of expressing
> coordinates on the inisde of a triangle.

    thanks, this is something I was looking for. this
 is a great solution for my problem (lots of computations
 can be saved or reused).

BTW. Some time ago i was writing about strange shading
 erors with UBYTE colors. Fot all that time i was using
 floats and the forgot about the problem, but recently
 i thought to try it again, and the problem seem to be
 still there. i mean shading errors (gouraud) under some
 circumstances. I will try to investigate this a bit
 more when i will have some more time, and will let You
 know.

> Regards,

Regards

// Michal Wozniak


----------------------------------------------------------------------
Wyroznij sie dzwiekiem! >>> http://sms.interia.pl/


@endnode
@node 08838.003
Subject: RE: Re: zbuffer accuracy and triangle intersecting.
From: Barry Paterson <Barry.Paterson@warthog.co.uk>
Date: Wed, 13 Mar 2002 20:58:07 -0000

> But after MS2k2 (computer party) I will investigate
> it a bit further.

Aha I realised who you are now :) I have heard very exciting things on IRC
about Mawi's demo for Mekka^Symp, I'm really looking forward to seeing it!
Unfortunately I can't make it to the party because of work, but I'm going to
Assembly later this year instead (hoping that another Amiga demo can win
this year).  Good luck in the competition :)

Barry
@endnode
@node 08838.002
Subject: Re: Re: zbuffer accuracy and triangle intersecting.
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Wed, 13 Mar 2002 21:05:09 +0100

Hi,

Michal Wozniak wrote:

>And in general zbuffer sucks;)
>

Yes. Brute force applied as a principle...

>If someone wants a hint how to make a shadows without stencil, mail me;))
>
Let me guess : Either project them on lightmaps, or use some weird 
z-buffer trick... ?

>>Uh, that reminds me that I wanted to fix this bug :( I'll
>>try to get on it this week...
>>
>
>    HA, so there IS a bug? I knew it. 
>

I think it's a bug. I'm not sure, just that if you tell me it doesn't 
work, I believe you ;)


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08838.001
Subject: Re: zbuffer accuracy and triangle intersecting.
From: Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
Date: Wed, 13 Mar 2002 20:22:42 +0200

On 11-Mar-02 Thomas Frieden wrote:

> Hi,

    Yellow,

> I know that a lot of games under Windows have problems
> with 16 bit zbuffering. Window's OpenGL by default opens
> the zbuffer with the same bit depth as the color buffer
> (on my old GeForce), and in this case, I get lots of
> artifacts, especially with stuff like decals on walls...

   And in general zbuffer sucks;) when i was writing
shadows, I had to use some stupid tricks to make it look
properly. even using double precision during calculations
wasn't enough, and it looke like crap. but now, my shadows
are great (although a bit slow);)) If someone wants a hint
how to make a shadows without stencil, mail me;))


>> BTW. Some time ago i was writing about strange shading
>> erors with UBYTE colors. Fot all that time i was using
>> floats and the forgot about the problem, but recently
>> i thought to try it again, and the problem seem to be
>> still there. i mean shading errors (gouraud) under some
>> circumstances. I will try to investigate this a bit
>> more when i will have some more time, and will let You
>> know.
>> 

> Uh, that reminds me that I wanted to fix this bug :( I'll
> try to get on it this week...

    HA, so there IS a bug? I knew it. it couldn't be my
engine, because only thing i have changed was FLOAT to
UBYTE (and some of clipping code) and it simply started to
f**k. For now i will return to float, because i have no
time to experiment (time is running out, and i have lot's of
work). But after MS2k2 (computer party) I will investigate
it a bit further.

> Regards,

Regards


----------------------------------------------------------------------
Face-lifting komorki? >>> http://sms.interia.pl/


@endnode
@node 08839.001
Subject: Re: zbuffer accuracy and triangle intersecting.
From: Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
Date: Thu, 14 Mar 2002 22:10:56 +0200

On 13-Mar-02 Thomas Frieden wrote:

> Hi,

    Yellow,

>> If someone wants a hint how to make a shadows without
>> stencil, mail me;))

> Let me guess : Either project them on lightmaps, or use
> some weird z-buffer trick... ?

    What do you mean by projecting them on lightmaps?
    And no weird tricks;)i'm doing shadows by clipping every
polygon of shaded object to the frustum credted from
shadowcasting face, and then simply for every vertex of
shadow polygon I calculate vector to the light source,
normalize it, and move the vertex along it a bit towards
the light, so it's something like second layer a bit
infront of the shaded surface. this eliminates zbuffer
artifacts, and this distance can be tweaked to look good
(not too far from the original face). I tried to change
zbuffer by adding some small value but it didn't worked
well (it sometimes worked, but sometimes not;)

>>> Uh, that reminds me that I wanted to fix this bug :(
>>> I'll try to get on it this week...

>> 
>>    HA, so there IS a bug? I knew it. 
>> 

> I think it's a bug. I'm not sure, just that if you tell me
> it doesn't work, I believe you ;)

    ;)

> Regards,

Regards


----------------------------------------------------------------------
Face-lifting komorki? >>> http://sms.interia.pl/


@endnode
@node 08839.002
Subject: minigl
From: Jan-Erik Karlsson <trg@privat.utfors.se>
Date: Fri, 15 Mar 2002 19:37:02 +0100

Hello,

is there a newer version of minigl than the old miniglr1.lha which I've got?
and if so is there StormC4 link libs there?

With kind Regards,
Jan-Erik Karlsson
-- 
Email: trg@privat.utfors.se
WWW: #http://hem.fyristorg.com/TRG/#
UIN (ICQ): 151354237 *NEW*

System:
A1200 Infinitiv Tower, 128 MB RAM, Blizzard PPC 603p@240/060@50,
SCSI-2Fast, Mediator 1200 PCI 8MB/No-MMU (Voodoo5 5500, SoundBlaster LiVE 5.1,
<Ultra SCSI PCI>) 40GB SCSIDE, 9GB SCSI-3, DVD-ROM, CD-ROM, JAZ-2, Syquest
230, ScanExpress 12000SP, AmigaOS 3.9+DOpus Magellan II

---
There's never enough time to do all the nothing you want.
-- Bill Watterson

@endnode
@node 08842.009
Subject: Support
From: Johan Forsberg <graak@telia.com>
Date: Mon, 18 Mar 2002 22:21:52 +0200

Hi Thomas and Hans-J=F6rg!
I see you're still here on this list, so I wonder, will you still be
answering questions on the OS4 list? =3D)

--=20

Johan "Graak" Forsberg

A1200 rev 1D1, Elbox Tower, Blizzard PPC 603e 175@210 MHz 68040 25@30 MHz
(60 MHz bus), 64 MB RAM, Power Flyer 1200, Mediator PCI 1200 (MMCD chips)=
,
Voodoo3 3000 (SGRAM), SoundBlaster 128, Planet 100MBit, PixelView PlayTV
Pro, 13.5 GB Seagate Barracuda, 48x Sony, 17" Hansol, AmigaOS 3.9

@endnode
@node 08842.008
Subject: Re: Re: Z buffering and lines in StormMESA
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Mon, 18 Mar 2002 20:07:22 +0100

Hi,

Paul Qureshi wrote:

>>I should warn you that no chip up to now can display thick lines,
>>which means it will fall back to software for lines with a width
>>higher than 1 pixel. This is because the Permedia 2 can only display
>>1-pixel lines, and the Voodoo 3 can't even display *any* lines (it's
>>simulated by two thin triangles).
>>
>
>Wow, I didn't know that... I notice that the Elbox Voodoo drivers seem
>to be using accelerated lines though, so are they drawing polygons or is
>there some kind of hardware cludge on the chip itself?
>

Probably no line acceleration whatsoever....

>Actually, thinking about it, surely drawing thick lines could be
>implimented by just drawing two triangles as well? I suppose I could try
>and do it in code, but it's not exactly trivial when the OGL pipeline is
>between your code and the rendered output.
>

It *could* be done, but not in an OpenGL compliant way. The bevel type 
(i.e. how the lines meet) can't be adequately simulated with that...

Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08842.007
Subject: Re: Z buffering and lines in StormMESA
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Mon, 18 Mar 2002 20:05:22 +0100

Hi,

Alan Buxey wrote:

>>I should warn you that no chip up to now can display thick lines, which 
>>
>
>PowerVR 2 and 3 ?
>

This should be read as "No chip supported by Warp3D", of course.

The Radeons and GeForces do support thick lines..


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08842.006
Subject: Re: Z buffering and lines in StormMESA
From: Hans-Joerg Frieden <Hans-JoergF@hyperion-entertainment.com>
Date: Mon, 18 Mar 2002 19:50:27 +0100

Alan Buxey wrote:

>PowerVR 2 and 3 ?
>
We don't have drivers for them, do we? :-)

Regards,

-- 
Hans-Joerg Frieden
Senior Software Developer, Hyperion Entertainment
Mail: Hans-JoergF@hyperion-software.de
Web: http://www.hyperion-entertainment.com



@endnode
@node 08842.005
Subject: Re: Z buffering and lines in StormMESA
From: Alan Buxey <almb@mssl.ucl.ac.uk>
Date: Mon, 18 Mar 2002 12:59:30 +0000

hi,

> I should warn you that no chip up to now can display thick lines, which 

PowerVR 2 and 3 ?


alan
@endnode
@node 08842.004
Subject: Re: Z buffering and lines in StormMESA
From: Paul Qureshi <paul@world3.net>
Date: Mon, 18 Mar 2002 13:48:06 +0100

Hi Thomas.

>> I am trying to use lines with a z buffer in StormMESA. Basically, I
>> draw all my front facing polygons filled, and the draw all the back
>> facing ones with glPolygonMode(GL_BACK, GL_LINES) so I only get their
>> outline. Because the lines are thick, they should show up as an
>> outline around the object.

> I should warn you that no chip up to now can display thick lines,
> which means it will fall back to software for lines with a width
> higher than 1 pixel. This is because the Permedia 2 can only display
> 1-pixel lines, and the Voodoo 3 can't even display *any* lines (it's
> simulated by two thin triangles).

Wow, I didn't know that... I notice that the Elbox Voodoo drivers seem
to be using accelerated lines though, so are they drawing polygons or is
there some kind of hardware cludge on the chip itself?

Actually, thinking about it, surely drawing thick lines could be
implimented by just drawing two triangles as well? I suppose I could try
and do it in code, but it's not exactly trivial when the OGL pipeline is
between your code and the rendered output.

> It might of course be a problem with StormMesa. Do you have the 
> possibility to test your code on another platform to check that it's 
> really a bug ?

Good idea, I'll try and compile it for Win32. I have done some other
tests though, and it does look like lines are being drawn without any
depth testing at all :(

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08842.003
Subject: Re: Z buffering and lines in StormMESA
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Mon, 18 Mar 2002 12:09:43 +0100

Hi,

Paul Qureshi wrote:

>I am trying to use lines with a z buffer in StormMESA. Basically, I draw
>all my front facing polygons filled, and the draw all the back facing
>ones with glPolygonMode(GL_BACK, GL_LINES) so I only get their outline.
>Because the lines are thick, they should show up as an outline around
>the object.
>

I should warn you that no chip up to now can display thick lines, which 
means it will fall back to software for lines with a width higher than 1 
pixel. This is because the Permedia 2 can only display 1-pixel lines, 
and the Voodoo 3 can't even display *any* lines (it's simulated by two 
thin triangles).

>The problem I am having is that the lines don't seem to be testing the z
>buffer. No matter what I do, even using GL_NEVER as the depth test, they
>are always drawn. Is this a problem with StormMESA? I guess I could just
>draw the lines first, and then the polygons, but it looks nicer with
>proper depth testing.
>

It might of course be a problem with StormMesa. Do you have the 
possibility to test your code on another platform to check that it's 
really a bug ?


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08842.002
Subject: Re: minigl
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Mon, 18 Mar 2002 12:06:04 +0100

Hi,

Jan-Erik Karlsson wrote:

>is there a newer version of minigl than the old miniglr1.lha which I've got?
>and if so is there StormC4 link libs there?
>

There is a newer version, but we haven't put it up for download yet. 
I'll see that I get the time to just throw the thing on our web page.


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08842.001
Subject: Re: Re: zbuffer accuracy and triangle intersecting.
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Mon, 18 Mar 2002 12:04:28 +0100

Hi,

Michal Wozniak wrote:

>What do you mean by projecting them on lightmaps?
>

You could use a similar approach to dynamic lightmaps. Instead of just 
computing dynamic light, you can also project shadows onto the lightmap, 
i.e. intersect rays from the light source to the lightmap texel with 
your objects. I think a lot of newer games do that. For example, if you 
look at movies of Dungeon Siege, you'll notice that at close range, the 
shadows look blocky.

>And no weird tricks;)i'm doing shadows by clipping every
>polygon of shaded object to the frustum credted from
>shadowcasting face, and then simply for every vertex of
>shadow polygon I calculate vector to the light source,
>normalize it, and move the vertex along it a bit towards
>the light, so it's something like second layer a bit
>infront of the shaded surface. this eliminates zbuffer
>artifacts, and this distance can be tweaked to look good
>(not too far from the original face). I tried to change
>zbuffer by adding some small value but it didn't worked
>well (it sometimes worked, but sometimes not;)
>

Hmm, sounds computationally expensive, but of course, every sort of 
projected shadow is expensive. Nice idea, though :)

Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08844.002
Subject: Re: Re: Z buffering and lines in StormMESA
From: Alan Buxey <almb@mssl.ucl.ac.uk>
Date: Tue, 19 Mar 2002 21:36:31 +0000

hi,

> Oddly enough, this actually looks kind of correct for my application. I
> am implimenting a cartoon rendering system with OpenGL for a university
> project, with an eye on performance for games. As the aim is to emulate
> the way a human draws objects, the inaccurate joins serve to give the
> image a sketched look, as if it were drawn quickly with a large tip pen.
> I use smaller lines (usually 1 pixel wide) for details (basically where
> polygons 'fold' or 'crease'), and it looks fine.

have you seen the NPR_Quake ?

alan
@endnode
@node 08843.003
Subject: Re: Z buffering and lines in StormMESA
From: Paul Qureshi <paul@world3.net>
Date: Tue, 19 Mar 2002 18:27:39 +0100

Hi guys.

First thing, I have compiled my source for Win32 (after much westling
with Visual C) and it correctly draws lines with accurate depth testing.
I don't know if it accelerates the lines at all.

>    Simulating thick lines is a bit problematic. easiest
> solution is to calculate line normal and create beveled
> (don't know how to call it) shape, but for single lines
> this will cause "bugs" at the joints. 

Oddly enough, this actually looks kind of correct for my application. I
am implimenting a cartoon rendering system with OpenGL for a university
project, with an eye on performance for games. As the aim is to emulate
the way a human draws objects, the inaccurate joins serve to give the
image a sketched look, as if it were drawn quickly with a large tip pen.
I use smaller lines (usually 1 pixel wide) for details (basically where
polygons 'fold' or 'crease'), and it looks fine.

> faster). best solution (which i have tried) is to calculate
> intersection with lines credted from polygon edges moved
> along edge normal. this will provide equal distance from
> each edge and will look ok.

A quick and dirty way I have found is to draw either a circle or a
square at the join. The circle will have the same radius as the lines
width. Of course, this isn't possible to do in any accelerated way for
small circles in OpenGL, so a square can be used instead. Simply take
the angle of each line in relation to their shared end-point, average
them and rotate the square by that much. Alternativly, for better visual
accuracy, you could calculate the 'corners' of the line (which is
relality a rectangle) and join them with a four sided polygon.

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08844.001
Subject: Re: zbuffer accuracy and triangle intersecting.
From: Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
Date: Tue, 19 Mar 2002 12:49:39 +0200

On 18-Mar-02 Thomas Frieden wrote:

> Hi,

    Yellow,

> Michal Wozniak wrote:

>> What do you mean by projecting them on lightmaps?
>> 

> You could use a similar approach to dynamic lightmaps.
> Instead of just computing dynamic light, you can also
> project shadows onto the lightmap, i.e. intersect rays
> from the light source to the lightmap texel with your
> objects. I think a lot of newer games do that. For
> example, if you look at movies of Dungeon Siege, you'll
> notice that at close range, the shadows look blocky.

    but it requires drawing into texture, doesn't it? of
course drawing on lightmap can be done with software
rasterizer (simple), but texture uploading would kill it.

[...]

> Hmm, sounds computationally expensive, but of course,
> every sort of projected shadow is expensive. Nice idea,
> though :)

    This is *ucking slow;) but since i'm doing it only for
demonstration purposes, I can optimize it for special
cases, like no every object have to cast shadows, and not
everyone have to recieve them. also there is lots of ways
of eliminating computations only to faces that are actualy
shadowed. rest is done by "normal" lighting. I have one
scene with quite a lots of polygons and it runs quite
smoothly, so...

> Regards,

Regards


----------------------------------------------------------------------
Doniesienia z ostatniej chwili >>> http://newsroom.interia.pl/


@endnode
@node 08843.002
Subject: Re: Z buffering and lines in StormMESA
From: Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
Date: Tue, 19 Mar 2002 12:07:14 +0200

On 18-Mar-02 Thomas Frieden wrote:

> Hi,

    Yellow,

    Simulating thick lines is a bit problematic. easiest
 solution is to calculate line normal and create beveled
(don't know how to call it) shape, but for single lines
this will cause "bugs" at the joints. i think that good way
is to draw whole polygon outline at once, because this will
allow you to create strip and extrude it properly (there
are also at least 2 ways of doing this). You could
calculate only normals at the vertices and join them, but
this will give errors with some triangles (but is a bit
faster). best solution (which i have tried) is to calculate
intersection with lines credted from polygon edges moved
along edge normal. this will provide equal distance from
each edge and will look ok.

> Regards,

Regards


----------------------------------------------------------------------
Doniesienia z ostatniej chwili >>> http://newsroom.interia.pl/


@endnode
@node 08843.001
Subject: Re: Support
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Tue, 19 Mar 2002 01:33:25 +0100

Hi,

Johan Forsberg wrote:

>I see you're still here on this list, so I wonder, will you still be
>answering questions on the OS4 list? =)
>

No. I'm still here (Warp3D is our "baby", after all), and on out support 
list. I'm not on any other Amiga related mailing list anymore.


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08845.003
Subject: Re: Re: Z buffering and lines in StormMESA
From: "Alkis Tsapanidis" <dial@otenet.gr>
Date: Wed, 20 Mar 2002 23:39:01 -0800

Hello!

> Yep, only with one helluva gfx card.  Im saving my money for Gamecube
though

Not really... The RadeON 8500 beats it EASILLY :)

@endnode
@node 08845.002
Subject: RE: Re: Z buffering and lines in StormMESA
From: Barry Paterson <Barry.Paterson@warthog.co.uk>
Date: Wed, 20 Mar 2002 19:44:13 -0000

> I really wish the DC had done better. I have been messing 
> around with a
> coders cable and it seems like a nit bit of kit. Soul Calibur is still
> impressive, years after launch...

Yeah I agree.  It certainly didnt deserve to die as quickly as it did.
Developers loved it.  But the publishers just werent willing to commit the
funds required to develop titles that did the DC justice.  So, we ended up
with a handful of triple-a titles all written by Sega themselves, and a
bunch of half-arsed PSX ports from third party developers.  Consumers were
taken in by the hype surrounding the PS2 so I guess they were happy playing
their PSOnes and saving their money until it arrived.
 
> I am beginning to wonder if we are now seeing the last line of real
> games consoles though. The XBox is really a cut down PC, it even has a
> hard drive. 

Yep, only with one helluva gfx card.  Im saving my money for Gamecube though
:)

> I can see things going more that way in the 
> future, which is
> in many ways a shame, especially if like me you love coding at a low
> level for dedicated systems. Even a PIC based vending machine is more
> interesting to me than Windows programming...

I think the GBA has taken over as the low-level coder's console of choice :)
There were people coding GBA demos using emulators before the console was
even released.  It's very popular among bedroom coders since the tools (both
hardware and software) are easily available on the net.  And its a nice bit
of hardware.  Its especially popular amongst ex-Acorn coders since it has
the familiar ARM cpu inside.  I suppose it's be like having a new console
with a 68060 inside it for Amiga coders.
@endnode
@node 08845.001
Subject: Re: Z buffering and lines in StormMESA
From: Paul Qureshi <paul@world3.net>
Date: Wed, 20 Mar 2002 18:14:42 +0100

Hi Johan.

>> Yeah, it's nice... the sketch mode is cool, and something I probably
>> won't get to impliment. I am looking at doing something more like Jet
>> Set Radio though... man, that damned X-Box is expensive, but I need
>> one for JSR Future and Crazy Taxi Next... Damned Microsoft! :)

> What? You're going to buy an X-Box? Then I have no choice but to
> despise you for the rest of my life =)

Maybe, only if Sega don't release their games for the Gamecube :)

I really wish the DC had done better. I have been messing around with a
coders cable and it seems like a nit bit of kit. Soul Calibur is still
impressive, years after launch...

I am beginning to wonder if we are now seeing the last line of real
games consoles though. The XBox is really a cut down PC, it even has a
hard drive. I can see things going more that way in the future, which is
in many ways a shame, especially if like me you love coding at a low
level for dedicated systems. Even a PIC based vending machine is more
interesting to me than Windows programming...

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08844.004
Subject: Re: Re: zbuffer accuracy and triangle intersecting.
From: Hans-Joerg Frieden <Hans-JoergF@hyperion-entertainment.com>
Date: Wed, 20 Mar 2002 12:49:06 +0100

Michal Wozniak wrote:

>     but it requires drawing into texture, doesn't it? of
>course drawing on lightmap can be done with software
>rasterizer (simple), but texture uploading would kill it.
>

Actually, this is the way it is done in e.g. Quake 2. It keeps textures 
as lightmap pages and draws the dynamic lightmaps directly into these 
pages and re-uploads. We are planning a direct access feature for 
textures in NOVA, but this will always be a problem since some chips 
simply expect the most exotic texture layouts.

>     This is *ucking slow;) but since i'm doing it only for
>demonstration purposes, I can optimize it for special
>cases, like no every object have to cast shadows, and not
>everyone have to recieve them. also there is lots of ways
>of eliminating computations only to faces that are actualy
>shadowed. rest is done by "normal" lighting. I have one
>scene with quite a lots of polygons and it runs quite
>smoothly, so...
>
You might want to use low-poly approximations for shadow calculations. 
If you look at e.g. the replays of Gran Tourismo 2 on the PSX, you will 
notice that the environment mapping on the cards is actually done by 
overlaying a low-poly version of the car - sometimes the env map extends 
over empty spaces, for example wheel cases etc.

You might have "shadow receivers" for certain groups of polygons. For 
example, if a group of triangles is roughly co-planar, you might define 
a polygon that covers all of them and only test for shadowing on this 
poly - if it receives shadow, you propagate that to the "underlying" 
triangles. This makes rejection (the standard case I would assume) 
easier, and you might skip the test for individual triangles alltogether 
and just shadow all of them it's not going to look completely right, but 
it might go by unnoticed :-)

Regards,

-- 
Hans-Joerg Frieden
Senior Software Developer, Hyperion Entertainment
Mail: Hans-JoergF@hyperion-software.de
Web: http://www.hyperion-entertainment.com



@endnode
@node 08844.003
Subject: Re: Z buffering and lines in StormMESA
From: Paul Qureshi <paul@world3.net>
Date: Wed, 20 Mar 2002 11:56:14 +0100

Hi Alan.

On 19-Mar-02, Alan Buxey wrote:

> have you seen the NPR_Quake ?

Yeah, it's nice... the sketch mode is cool, and something I probably
won't get to impliment. I am looking at doing something more like Jet
Set Radio though... man, that damned X-Box is expensive, but I need one
for JSR Future and Crazy Taxi Next... Damned Microsoft! :)

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08846.004
Subject: Re: Re: zbuffer accuracy and triangle intersecting.
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Thu, 21 Mar 2002 23:21:33 +0100

Hi,

Michal Wozniak wrote:

>     but it requires drawing into texture, doesn't it? of
>course drawing on lightmap can be done with software
>rasterizer (simple), but texture uploading would kill it.
>

Yes, it will require texture rendering, but lightmaps are typically=20
pretty small resolution, and dynamic lightmaps will have to be uploaded=20
every frame, anyway.

>     This is *ucking slow;) but since i'm doing it only for
>demonstration purposes, I can optimize it for special
>cases, like no every object have to cast shadows, and not
>everyone have to recieve them. also there is lots of ways
>of eliminating computations only to faces that are actualy
>shadowed. rest is done by "normal" lighting. I have one
>scene with quite a lots of polygons and it runs quite
>smoothly, so...
>

Well, as Hans-J=F6rg suggested, you can use low-detail model for the=20
shadows...


Regards,

--=20
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08846.003
Subject: Re: Z buffering and lines in StormMESA
From: Christopher Kossa <abattoir@optonline.net>
Date: Thu, 21 Mar 2002 14:21:29 -0400

Hey Paul...

On 21-Mar-02, didn't you say...
> I don't know, I don't think it's quite that fast... not sure. It seems
> to have some 3D hardware though, I hear that game engines are producing
> around 3500 polygons per second with it now. At least I think that's
> what they said... 700 polygons per frame sounds reasonable for such a
> small screen running at, say, 50Hz. I'm not sure if it is 50 though,
> could be less with an LCD.

I don't think GBA has real 3D hardware.  It's supposed to be similar a faster, 32bit version of SNES, with "Mode7" for scaling and rotation effects to help give it that 3D look like the tracks in F-Zero.  Guess that's is why there are so many SNES games m
aking an appearence on GBA

-- 
...Christopher
============================================================================

@endnode
@node 08846.002
Subject: Re: Z buffering and lines in StormMESA (getting OT)
From: Christopher Kossa <abattoir@optonline.net>
Date: Thu, 21 Mar 2002 14:14:12 -0400

Hey Johan...

On 10-Apr-02, didn't you say...
> But look at the X-Box, it's selling far from good (I read that in Japan, the
> home of game consoles, X-Box sold 123 000 units in the four days following
> the release. Compare that to the one million units Sony sold of the PS2 on
> the release day!). And the big consoles, like PS2 and Gamecube, are they so
> "computer-like"? Not IMHO.

Also, XBox was pulled off the shelves in Japan recently because it would end up scratching DVDs/CDs.

They were raving about game sales for XBox in the US.  But, what they don't make clear is that almost every place that was selling XBox, was only selling them as package deals with at least 2 games.  All of the top 5 games were games that you could choose
 from in the package deals.


Sad thing is that I actually had been questioned about the XBox before it came out.  Some telemarketer called me up.  They were trying to decide between "XBox" and "X-11" for the console name.  They also asked me if Microsoft was making the system, would 
I be likely to by it and if I "trust Microsoft in putting out quality products".  I think the guy got a kick out of what kind of quality I said they put out.  :-)  

-- 
...Christopher
============================================================================

@endnode
@node 08845.005
Subject: Re: Z buffering and lines in StormMESA
From: Paul Qureshi <paul@world3.net>
Date: Thu, 21 Mar 2002 15:59:35 +0100

Hi Johan.

On 10-Apr-02, Johan Forsberg wrote:

>> Maybe, only if Sega don't release their games for the Gamecube :)

> AFAIK they have sold their souls to M$.. (not yet officially though)

I don't think so, they are producing stuff for the PC, Gamecube and PS2.
Phantasy Star Online is due for release on both GC and PC. However, some
stuff, like Crazy Taxi Next, will be XBox exclusive... the way I see it,
I want to play games from Smilebit, Hitmaker, Sonic Team etc, so I have
to get whatever hardware is needed... but that's the price you pay for
not being a casual gamer :(

>> I really wish the DC had done better. I have been messing around with
>> a coders cable and it seems like a nit bit of kit. Soul Calibur is
>> still impressive, years after launch...

> Guh, Soul Calibur sucks =) Street Fighter II for SNES is *the* best
> fighting game ever!

Some people don't like the style, but it looks amazing. Better than
Tekken Tag on the PS2, and better than the screen shots of DOA3 on XBox
I have seen, although it might be better moving. Somehow, everything
just came together, and they producted a near flawless and technically
brilliant game.

> The best game I've played on DC is Virtua Tennis =)

Yeah :)

What makes game like that so good is Sega's knowledge of doing good
arcade type systems. VT is another Hitmaker game, and it really shows.
The graphics are smooth and flawless, the gameplay honed to perfection.
It must have something to do with the work ethic of Japanese code shops,
in particular the Sega related ones. Their coders are certainly complete
masters of the DC and associated arcade hardware.

You can't underestimate the DC hardware either. Raw power isn't
everything, just look at the quality of the output and the nice
anti-aliasing designed to look good on TV screens.

>> I am beginning to wonder if we are now seeing the last line of real
>> games consoles though. The XBox is really a cut down PC, it even has
>> a hard drive. I can see things going more that way in the future,
>> which is in many ways a shame, especially if like me you love coding
>> at a low level for dedicated systems. Even a PIC based vending
>> machine is more interesting to me than Windows programming...

> But look at the X-Box, it's selling far from good (I read that in
> Japan, the home of game consoles, X-Box sold 123 000 units in the four
> days following the release. Compare that to the one million units Sony
> sold of the PS2 on the release day!). And the big consoles, like PS2
> and Gamecube, are they so "computer-like"? Not IMHO.

Well, IMHO, the PS2 is a bit of a cock-up. The idea sounds brilliant,
give it this Emotion Engine chip which can do all kinds of cool fractal
stuff and on the fly effect generation, and you won't need massive
amounts of video RAM or a really fast CPU RAM to video RAM bus. The
problem is, most coders either can't get on with it, or won't. Many
games are ports from other systems, and no one wants to do a total
re-write of the engine to make use of PS2 features when other systems
have more generic rendering pipelines.

The GameCube is nice, but once again they have gone for a weird control
pad. The N64 one was very good, and I'm sure the GC one is, but only for
certain types of game. The DC pad was very generic, good for most things
if the buttons were assigned sensibly. The XBox is attractive because it
has WindowsCE and a HD, making it similar to a PC and thus easy to code
for if you know DirectX and Windows.

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08845.004
Subject: Re: Z buffering and lines in StormMESA
From: Paul Qureshi <paul@world3.net>
Date: Thu, 21 Mar 2002 15:46:46 +0100

Hi Barry.

On 20-Mar-02, Barry Paterson wrote:

> Yeah I agree. It certainly didnt deserve to die as quickly as it did.

Lack of developer support and advertising money from Sega did it. As you
say, the overwhelming hype of the PS2, which IMHO has been very
dissapointing, didn't help either. Those who like quality games know
which machine to go for though.

>> I am beginning to wonder if we are now seeing the last line of real
>> games consoles though. The XBox is really a cut down PC, it even has
>> a hard drive.

> Yep, only with one helluva gfx card. Im saving my money for Gamecube
> though :)

Well, the graphics system is probably comprable with top spec AGP cards,
and will soon be surpassed. Don't forget, it only has to render at TV
resolution too, most PCs will be doing at least 800x600 at 80Hz, or
more.

I remember when Sega was toying with the idea of making a Dreamcast PCI
card, so a PC could run all the DC games... man, I would have got one
for my Amiga if it has ever materialised :)

>> I can see things going more that way in the 
>> future, which is
>> in many ways a shame, especially if like me you love coding at a low
>> level for dedicated systems. Even a PIC based vending machine is more
>> interesting to me than Windows programming...

> I think the GBA has taken over as the low-level coder's console of
> choice :) There were people coding GBA demos using emulators before
> the console was even released. It's very popular among bedroom coders
> since the tools (both hardware and software) are easily available on
> the net. And its a nice bit of hardware. Its especially popular
> amongst ex-Acorn coders since it has the familiar ARM cpu inside. I
> suppose it's be like having a new console with a 68060 inside it for
> Amiga coders.

I don't know, I don't think it's quite that fast... not sure. It seems
to have some 3D hardware though, I hear that game engines are producing
around 3500 polygons per second with it now. At least I think that's
what they said... 700 polygons per frame sounds reasonable for such a
small screen running at, say, 50Hz. I'm not sure if it is 50 though,
could be less with an LCD.

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08846.001
Subject: unsubscribe
From: Mike Dempster <mikedempster@loop.com>
Date: Thu, 21 Mar 2002 00:58:31 -0800


@endnode
@node 08846.009
Subject: Re: Re: zbuffer accuracy and triangle intersecting.
From: Hans-Joerg Frieden <Hans-JoergF@hyperion-entertainment.com>
Date: Fri, 22 Mar 2002 21:49:43 +0100

Michal Wozniak wrote:

>     and how does it look like with newer chips? i know that
>permedia2 uses "tiled" textures (you wrote about it
>sometime ago), but what about voodoo, and other ones are
>planned to be supported?
>
Most chips support tiled textures. That is what Direct3D calls 
"Optimized Surfaces". The direct-access possibilty will, if the surface 
is in an exotic format, convert it to something managable first and 
reconvert at the end. This is the only way this can be handled without 
falling into the DirectX 3 trap where you need approximately 1000 lines 
of code just to do a W3D_UpdateTexImage :-)

Using this feature will be disencouraged, but sometimes it is very nifty 
to do a few special effects...

Oh, did I mention that W3D Nova will be able to render into a texture :-)

>     Well i have already done it for shadow casting polygons
>and i'm going to do it for recieving (some code will have
>to be written into object converter). I'm currently using
>LW file format, and if it exports polygons with more than 3
>vertices they are triangulated for normal rendering but
>also original version is saved, and is used in outline
>drawing and shadows casting. I will probably write routine
>to merge nearly coplanar as you suggested also (but with
>current method i'm using this would mean very nearly
>coplanar). but with this method would also require that
>these polygons have to be convex in my case, so lots of
>work in preprocessing stage will have to be done to find
>optimal (almost;) polygons.
>
You might want to search for the term "subdivision surfaces". I am sure 
I read something about that on Intel's web site, they have a paper about 
using triangle quad trees for that. This is especially useful for rigid 
objects and terrain and reuses inter-frame coherency. I can't remember 
the URL, though.

Regards,

-- 
Hans-Joerg Frieden
Senior Software Developer, Hyperion Entertainment
Mail: Hans-JoergF@hyperion-software.de
Web: http://www.hyperion-entertainment.com



@endnode
@node 08846.008
Subject: Re: Re: zbuffer accuracy and triangle intersecting.
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Fri, 22 Mar 2002 21:48:42 +0100

Hi,

Michal Wozniak wrote:

>     and how does it look like with newer chips? i know that
>permedia2 uses "tiled" textures (you wrote about it
>sometime ago), but what about voodoo, and other ones are
>planned to be supported?
>

Most chips use linear textures, but as it's a feature of DirectDraw, 
most chips can also access their memory "tiled", i.e. they have a mirror 
of their memory that's not linear, but organized in rectangles. So 
theoretically, when a linear copy is needed, you would be given the 
address in the linear frame buffer...

Problems will mostly arise from things like compressed textures, but 
there's not much you can do about it. Either you know how they are 
organized, or you can ask the driver to deliver an uncompressed image, 
which of course would be rather slow...


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08846.007
Subject: RE: Re: Z buffering and lines in StormMESA
From: Yoris Benjamin <byoris@fr.infogrames.com>
Date: Fri, 22 Mar 2002 13:32:55 +0100



> -----Message d'origine-----
> De : Paul Qureshi [mailto:paul@world3.net]
> Envoy=E9 : vendredi 22 mars 2002 10:48
> =C0 : 3D World ML
> Objet : [3DWorld] Re: Z buffering and lines in StormMESA
>=20
>=20
> Hi Christopher.
>=20
> On 21-Mar-02, Christopher Kossa wrote:
>=20
> > I don't think GBA has real 3D hardware. It's supposed to be=20
> similar a
> > faster, 32bit version of SNES, with "Mode7" for scaling and rotation
> > effects to help give it that 3D look like the tracks in=20
> F-Zero. Guess
> > that's is why there are so many SNES games making an=20
> appearence on GBA
>=20
> Perhaps... I don't really know. 3500 polygons per second could be the
> CPU, although it did say that they were capable of being textured and
> blended too. Perhaps there is simple polygon filling hardware=20
> available?
> I mean, even a Virge type chipset would be more than enough... and it
> could include the Mode 7 type stuff too.
>=20

At Infogrames, a game will be released in June with a 3D engine.
I can't say much more but this is impressive.

And no there is nothing for 3D on GBA, all the hardware is 2D dedicated s=
o
you have to make a soft render.

Bye,

Ben Y.=20
@endnode
@node 08846.006
Subject: Re: zbuffer accuracy and triangle intersecting.
From: Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
Date: Fri, 22 Mar 2002 12:42:59 +0200

Yellow,

On 20-Mar-02 Hans-Joerg Frieden wrote:

> Actually, this is the way it is done in e.g. Quake 2. It
> keeps textures as lightmap pages and draws the dynamic
> lightmaps directly into these pages and re-uploads. We are
> planning a direct access feature for textures in NOVA, but
> this will always be a problem since some chips simply
> expect the most exotic texture layouts.

    and how does it look like with newer chips? i know that
permedia2 uses "tiled" textures (you wrote about it
sometime ago), but what about voodoo, and other ones are
planned to be supported?

>>    This is *ucking slow;) but since i'm doing it only
>> for
>> demonstration purposes, I can optimize it for special
>> cases, like no every object have to cast shadows, and not
>> everyone have to recieve them. also there is lots of ways
>> of eliminating computations only to faces that are
>> actualy shadowed. rest is done by "normal" lighting. I
>> have one scene with quite a lots of polygons and it runs
>> quite smoothly, so...

> You might want to use low-poly approximations for shadow
> calculations. If you look at e.g. the replays of Gran
> Tourismo 2 on the PSX, you will notice that the
> environment mapping on the cards is actually done by
> overlaying a low-poly version of the car - sometimes the
> env map extends over empty spaces, for example wheel cases
> etc.


> You might have "shadow receivers" for certain groups of
> polygons. For example, if a group of triangles is roughly
> co-planar, you might define a polygon that covers all of
> them and only test for shadowing on this poly - if it
> receives shadow, you propagate that to the "underlying"
> triangles. This makes rejection (the standard case I would
> assume) easier, and you might skip the test for individual
> triangles alltogether and just shadow all of them it's not
> going to look completely right, but it might go by
> unnoticed :-)

    Well i have already done it for shadow casting polygons
and i'm going to do it for recieving (some code will have
to be written into object converter). I'm currently using
LW file format, and if it exports polygons with more than 3
vertices they are triangulated for normal rendering but
also original version is saved, and is used in outline
drawing and shadows casting. I will probably write routine
to merge nearly coplanar as you suggested also (but with
current method i'm using this would mean very nearly
coplanar). but with this method would also require that
these polygons have to be convex in my case, so lots of
work in preprocessing stage will have to be done to find
optimal (almost;) polygons.

> Regards,

Regards


----------------------------------------------------------------------
>>> Zanim zaczniesz swoj dzien... >>> http://dziendobry.interia.pl/


@endnode
@node 08846.005
Subject: Re: Z buffering and lines in StormMESA
From: Paul Qureshi <paul@world3.net>
Date: Fri, 22 Mar 2002 10:48:20 +0100

Hi Christopher.

On 21-Mar-02, Christopher Kossa wrote:

> I don't think GBA has real 3D hardware. It's supposed to be similar a
> faster, 32bit version of SNES, with "Mode7" for scaling and rotation
> effects to help give it that 3D look like the tracks in F-Zero. Guess
> that's is why there are so many SNES games making an appearence on GBA

Perhaps... I don't really know. 3500 polygons per second could be the
CPU, although it did say that they were capable of being textured and
blended too. Perhaps there is simple polygon filling hardware available?
I mean, even a Virge type chipset would be more than enough... and it
could include the Mode 7 type stuff too.

Regards,
Paul
-- 
.- world3.net -----------.---------------------------.
| amimpc.world3.net      | Amiga in-car MP3 player   |
| www.amigasupport.co.uk | Amiga Support Association |
`------------------------^---------------------------'

@endnode
@node 08849.005
Subject: Re: StormMESA really sucks
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Mon, 25 Mar 2002 22:30:13 +0100

Hi,

Paul Qureshi wrote:

>I have been using StormMESA for a while now, and it really sucks. It's
>slow, and a lot of stuff either does not work or isn't supported
>properly. In particular, hardware acceleration is very dodgy, and fails
>completely when it needs to be mixed with CPU rendered stuff. The CPU
>renderer doesn't seem to be entirely accurate either, but at least it
>works.
>

It's based on an age-old Mesa 3.0. Mesa was just becoming usable with 3.2.

>My advice is avoid, but I was wondering if anyone has had any luck with
>other MESA ports or OpenGL implimentations under AmigaOS? So far, MiniGL
>seems to be the best, although I have not been able to get it working
>with StormC, but that's just me.
>

It does work with StormC, I've already used it.

>I hope newer versions of MESA are better, and I hope we see ports one
>day. I only regret I don't have time to do one myself right now, even if
>I knew how.
>

We'll have a Mesa 4.0 port for OS4. This one will be completely new and 
will not use any old StormMesa code.


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08849.004
Subject: Re: Re: zbuffer accuracy and triangle intersecting.
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Mon, 25 Mar 2002 22:27:48 +0100

Hi,

Michal Wozniak wrote:

>>Oh, did I mention that W3D Nova will be able to render
>>into a texture :-)
>>
>
>    So it will be about time to upfgrade to a betted 3d
>card;)
> because ias i understand it won't be possible on p2?
>

The P2 should be able to do that as well. It would be possible to set a 
piece of video ram as the render target, and render there. The problem 
is it must fit exactly through the tiled memory space, but that should 
be doable...

But of course, the P2 is getting rather old, and 640x480 is already high 
resolution for it, so upgrading is not a bad idea ;) Just imagine all 
the neat things you could do with a Radeon 8500 (speaking of shadows, 
etc ... Pixel shader ;)


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08849.003
Subject: Re: StormMESA really sucks
From: Paul Qureshi <paul@world3.net>
Date: Mon, 25 Mar 2002 22:10:46 +0100

Hi Thomas.

>> I have been using StormMESA for a while now, and it really sucks.

> It's based on an age-old Mesa 3.0. Mesa was just becoming usable with
> 3.2.

That explains a lot...

How is MESA now? I see that some stuff is being written for Linux and uses
OpenGL (Quake III for example). Do many games companies use MESA, or is
there a commerical implimentation they use?

>> My advice is avoid, but I was wondering if anyone has had any luck
>> with other MESA ports or OpenGL implimentations under AmigaOS? So
>> far, MiniGL seems to be the best, although I have not been able to
>> get it working with StormC, but that's just me.

> It does work with StormC, I've already used it.

Yeah, it's just me, I'll have to sort it out this summer. I still can't
figure out how to automatically make defines for tag functions for
Warp3D :)

>> I hope newer versions of MESA are better, and I hope we see ports one
>> day. I only regret I don't have time to do one myself right now, even
>> if I knew how.

> We'll have a Mesa 4.0 port for OS4. This one will be completely new
> and will not use any old StormMesa code.

So it's definatly going ahead then? Wow, I can't wait :)

Regards,
Paul
-- 
.- world3.net ------------.---------------------------.
| amimpc.world3.net       | Amiga in-car MP3 player   |
| www.amigasupport.org.uk | Amiga Support Association |
`-------------------------^---------------------------'

@endnode
@node 08849.002
Subject: StormMESA really sucks
From: Paul Qureshi <paul@world3.net>
Date: Mon, 25 Mar 2002 18:30:23 +0100

Hi all.

I have been using StormMESA for a while now, and it really sucks. It's
slow, and a lot of stuff either does not work or isn't supported
properly. In particular, hardware acceleration is very dodgy, and fails
completely when it needs to be mixed with CPU rendered stuff. The CPU
renderer doesn't seem to be entirely accurate either, but at least it
works.

My advice is avoid, but I was wondering if anyone has had any luck with
other MESA ports or OpenGL implimentations under AmigaOS? So far, MiniGL
seems to be the best, although I have not been able to get it working
with StormC, but that's just me.

I hope newer versions of MESA are better, and I hope we see ports one
day. I only regret I don't have time to do one myself right now, even if
I knew how.

Regards,
Paul
-- 
.- world3.net ------------.---------------------------.
| amimpc.world3.net       | Amiga in-car MP3 player   |
| www.amigasupport.org.uk | Amiga Support Association |
`-------------------------^---------------------------'

@endnode
@node 08849.001
Subject: Re: zbuffer accuracy and triangle intersecting.
From: Michal Wozniak <wozniak_m@mail.gwl.koszalin.tpnet.pl>
Date: Mon, 25 Mar 2002 12:23:12 +0200

Yellow,

On 22-Mar-02 Hans-Joerg Frieden wrote:

> Michal Wozniak wrote:

> Oh, did I mention that W3D Nova will be able to render
> into a texture :-)

    So it will be about time to upfgrade to a betted 3d
card;)
 because ias i understand it won't be possible on p2?

[ shadows ]

> You might want to search for the term "subdivision
> surfaces". I am sure I read something about that on
> Intel's web site, they have a paper about using triangle
> quad trees for that. This is especially useful for rigid
> objects and terrain and reuses inter-frame coherency. I
> can't remember the URL, though.

    will look at it in some time. for now i have 2 days to 
 deadline, and lots of work to do;)

> Regards,

Regards


----------------------------------------------------------------------
Tylko zaLOGOwani sie licza... >>> http://sms.interia.pl/


@endnode
@node 08851.001
Subject: Re: Re: StormMESA really sucks
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Tue, 26 Mar 2002 18:14:08 +0100

Hi,

Paul Qureshi wrote:

>Oh yeah, I know OS4 is certainly going to happen, I was talking about
>the Mesa port because I remember you were not sure if it would be
>included with OS4 or if it would be in a Boing Bag.
>

Ah, that's what you mean. Mesa will probably not be in the first 
release.... Since we're doing OS4, there's no time left to do Mesa...


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08850.004
Subject: Re: Re: StormMESA really sucks
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Tue, 26 Mar 2002 12:07:47 +0100

Hi,

Paul Qureshi wrote:

>>It's based on an age-old Mesa 3.0. Mesa was just becoming usable with
>>3.2.
>>
>
>That explains a lot...
>
>How is MESA now? I see that some stuff is being written for Linux and uses
>OpenGL (Quake III for example). Do many games companies use MESA, or is
>there a commerical implimentation they use?
>

Everything on Linux uses Mesa, of course. On Windows, it's of course not 
used because Windows has it's own implementation (in fact, the Windows 
implementation is just a "front end", and the actual implementation is 
done by the card manufactureres).

>Yeah, it's just me, I'll have to sort it out this summer. I still can't
>figure out how to automatically make defines for tag functions for
>Warp3D :)
>

I'm not an expert with StormC either, sorry...


>>We'll have a Mesa 4.0 port for OS4. This one will be completely new
>>and will not use any old StormMesa code.
>>
>
>So it's definatly going ahead then? Wow, I can't wait :)
>

Sure, we're constantly working on OS4... There will be a new update 
shortly...


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08850.003
Subject: Re: W3D hardware/bitmap locking
From: Hans-Joerg Frieden <Hans-JoergF@hyperion-entertainment.com>
Date: Tue, 26 Mar 2002 12:03:34 +0100

Olivier Fabre wrote:

>Hello all,
>
Hi!

>mglLockDisplay() is a wrapper for W3D_LockHardware(). In
>W3D_LockHardware() autodoc, I see:
>W3D_NOTVISIBLE  - The bitmap is not visible/swapped out of vmem
>
>So AFAICS all these problems are caused by CGX moving bitmaps between
>FAST RAM and VRAM.
>
Basically, yes. W3D_LockHardware tries to lock the destination, and if 
this fails it tries to find out why. Usually this means that the bitmap 
was swapped out.

>1) How come it is possible to get a "No ZBuffer: Memory shortage"
>message when is is still possible to open a 1024*768*16 screen ? I'm
>not saying that there is still free VRAM, but that CGX could certainly
>move some bitmaps to FAST RAM to make room for the Z-Buffer. Isn't it
>possible to allocate a bitmap and use it for the Z-Buffer ?
>
Some programs do allocate bitmaps to put images into it. That might 
fragment the memory enough. For example, when I have golded running in 
parallel, I also frequently get these error messages.

The only solution is to quit as many programs as possible.

The Z-Buffer is already a bitmap. All of Warp3D's memory handling is 
done using bitmaps, with the exception of the Mediator in non-MMU mode 
where the "unused" video memory is used for textures and buffers.

>2) Regarding W3D_LockHardware() failure, how is it possible that a
>bitmap can not be locked and thus moved back to VRAM ?
>
Don't ask me. It doesn't :-)

>3) The problem with Heretic 2 textures lead me to think that they are
>overwritten by some bitmaps when the screens are switched, and/or that
>they are no longer in VRAM. That would mean that the textures memory is
>not allocated, or at least that the bitmaps containing the textures are
>not locked before use. If this is the case, again, why not allocating
>bitmaps to store them / locking these bitmaps ? Or maybe this is the 2)
>problem.
>
As I said, the whole of Warp3D's  memory handling works via bitmaps. 
However, there is no way to actually prevent someone from forcefully 
swapping out these bitmaps, since they cannot be locked over a longer 
period of time. This is because the 3D system and the 2D system are not 
integrated.

I hope that we can correct this for OS 4.

Regards,

-- 
Hans-Joerg Frieden
Senior Software Developer, Hyperion Entertainment
Mail: Hans-JoergF@hyperion-software.de
Web: http://www.hyperion-entertainment.com



@endnode
@node 08850.002
Subject: Re: StormMESA really sucks
From: Paul Qureshi <paul@world3.net>
Date: Tue, 26 Mar 2002 11:54:16 +0100

Hi Thomas.

>> How is MESA now? I see that some stuff is being written for Linux and
>> uses OpenGL (Quake III for example). Do many games companies use
>> MESA, or is there a commerical implimentation they use?

> Everything on Linux uses Mesa, of course. On Windows, it's of course
> not used because Windows has it's own implementation (in fact, the
> Windows implementation is just a "front end", and the actual
> implementation is done by the card manufactureres).

Right, I'm with you. If the quality of modern Linux apps is anything to
go by, Mesa 4.0 does seem to be a fairly good implimentation.

>> Yeah, it's just me, I'll have to sort it out this summer. I still
>> can't figure out how to automatically make defines for tag functions
>> for Warp3D :)

> I'm not an expert with StormC either, sorry...

It has to be some obscure option in FD2Pragma...

>>> We'll have a Mesa 4.0 port for OS4. This one will be completely new
>>> and will not use any old StormMesa code.
>> 
>> So it's definatly going ahead then? Wow, I can't wait :)

> Sure, we're constantly working on OS4... There will be a new update 
> shortly...

Oh yeah, I know OS4 is certainly going to happen, I was talking about
the Mesa port because I remember you were not sure if it would be
included with OS4 or if it would be in a Boing Bag.

Regards,
Paul
-- 
.- world3.net ------------.---------------------------.
| amimpc.world3.net       | Amiga in-car MP3 player   |
| www.amigasupport.org.uk | Amiga Support Association |
`-------------------------^---------------------------'

@endnode
@node 08850.001
Subject: W3D hardware/bitmap locking
From: Olivier Fabre <off@free.fr>
Date: Tue, 26 Mar 2002 00:34:19 +0100

Hello all,

I have a question about hardware/bitmap locking with W3D, and video
memory allocation in general.

(sorry for the lengthy mail, I'm trying to be clear :))

I'm currently using MiniGL. My program just crashed because...

 No ZBuffer: Memory shortage
 [MGLLockDisplay] Unable to lock

Of course, I omitted to check the return value of mglLockDisplay() (just
like the MiniGL demos ;]), and the result was a crash in some W3D
function.

Another example with this same program of mine (which currently displays
some rotating billboards) : It was running without problem when my
screen blanker switched on, opening its own screen. It was curiously
slow.. I pressed a key, the blanker closed its screen.. And I saw a lot
of "[MGLLockDisplay] Unable to lock" scrolling in the shell, coupled
with my billboards displayed all other the Workbench.

I also had many texture problems in Heretic 2 when I switched screens
(missing textures, mostly). I mention this because I guess these
problems are related.


mglLockDisplay() is a wrapper for W3D_LockHardware(). In
W3D_LockHardware() autodoc, I see:
W3D_NOTVISIBLE  - The bitmap is not visible/swapped out of vmem

So AFAICS all these problems are caused by CGX moving bitmaps between
FAST RAM and VRAM.


My questions:

1) How come it is possible to get a "No ZBuffer: Memory shortage"
message when is is still possible to open a 1024*768*16 screen ? I'm
not saying that there is still free VRAM, but that CGX could certainly
move some bitmaps to FAST RAM to make room for the Z-Buffer. Isn't it
possible to allocate a bitmap and use it for the Z-Buffer ?

2) Regarding W3D_LockHardware() failure, how is it possible that a
bitmap can not be locked and thus moved back to VRAM ?

3) The problem with Heretic 2 textures lead me to think that they are
overwritten by some bitmaps when the screens are switched, and/or that
they are no longer in VRAM. That would mean that the textures memory is
not allocated, or at least that the bitmaps containing the textures are
not locked before use. If this is the case, again, why not allocating
bitmaps to store them / locking these bitmaps ? Or maybe this is the 2)
problem.


I'd be glad to get some explanations on this matter. I guess that there
has to be some limitation in CGX API for W3D to work properly... Or
maybe some hardware problem; I don't know anything about how the PM2
works after all :)

Thanks !
-- 
"Before you insult a man, walk a mile in his shoes. That way, when you
DO insult him, you will be a mile away, and you will have his shoes."

@endnode
@node 08852.003
Subject: Re: Warp3D doesn't work anymore
From: Christopher Kossa <abattoir@optonline.net>
Date: Wed, 27 Mar 2002 23:32:22 -0400

Hey Alexander...

On 27-Mar-02, didn't you say...
>> the only problem I have after installing Boing bag 2 is that the
>> shuttle anim in PlayCD no longer works

> This might be because the Shuttle is now used to display the CD and song
> titles. Just try to play a CD when you are online (after installing the CDDB
> library of course).

This is because of the new display that shows the infromation.


> Could it have something to do with the cgx v42 pre11 libraries? I also had to
> install them because of the missing screenmodes.

There was talk about Fusion not working on the Fusion List.  They were saying that they could not able to "initialize the video hardware" and that reinstalling CGFX4 pre 11 fixed the problem.


-- 
...Christopher
============================================================================

@endnode
@node 08852.002
Subject: Re: Warp3D doesn't work anymore
From: Alexander Weber <alexwe@alexwe.de>
Date: Wed, 27 Mar 2002 23:32:10 +0100

Hello Thomas

On 27-M=E4r-02 you wrote:

> There's a small program called "mcpramlib...." something (can't remembe=
r=20
> the exact name) that should be able to fix this (it enlarges ramlib's=20
> stack...) .

Thanks, but I just installed it and Warp3D still crashes. I've tried
everything now (except re-installing the WB), but nothing helps...

Bye,

Alex.
--=20
Alexander Weber
alexwe@alexwe.de             http://www.alexwe.de

@endnode
@node 08852.001
Subject: Re: Warp3D doesn't work anymore
From: Alexander Weber <alexwe@alexwe.de>
Date: Wed, 27 Mar 2002 23:11:58 +0100

> How do I install CDDB ?
> I have dragged it into my librarys draw but when I start the CD Player up I
> get a message insert volume CDDB

It's offtopic but:
Create a directory "CDDB" somewhere with three subdirs "CDText_DiscIDs",
"New_DiscIDs" and "Read_DiscIDs" and add a assign "CDDB:" to this dir in your
user-startup.

Bye,

Alex.
-- 
Alexander Weber
alexwe@alexwe.de             http://www.alexwe.de

@endnode
@node 08851.007
Subject: Re: Warp3D doesn't work anymore
From: Shaun Brown <shaunbrown@madasafish.com>
Date: 27 Mar 2002 18:45:27 +0000

Hallo Alexander,

Am 27/03/02 schriebst Du:
>>> Since I installed the new Boing Bag for OS3.9, I always get a ramlib
>>> error when a program tries to open the warp3d.library. I already
>>> disabled the exec.library update, but it doesn't help.
>>> Do other people also have this problem?
>> 
>> No problems here ,I  have tried WipeOut, Heritic 2 , Freespace , shogo &
>> Payback

> I also tried it with StormC with the Debug-Mode. The error occurs when
> the Warp3d Library is opened. With MuForce running there are also 3
> enforcer hits: 
> READ from 00000000 (INST), PC:FFFFFFFE
> Name: "ramlib"

> Exception!! 00000002
> Name: "ramlib"

> LONG WRITE to 00000100, data=80000002
> Name: "Processor Interrupt Level 7"

> And the actual software failure is:
> Task: "ramlib"
> Error: 0x80000002 (DEADEND)
> By: System
> Cause: Hardware bus fault/access error
> PC: $FFFFFFFE

> But if I'm the only one, I will have to check my commodities.

>> the only problem I have after installing Boing bag 2 is that the
>> shuttle anim in PlayCD no longer works

> This might be because the Shuttle is now used to display the CD and song
> titles. Just try to play a CD when you are online (after installing the
> CDDB library of course).
> One other problem that I have is that DOpus Magellan's picture displayer
> doesn't work anymore...

> Could it have something to do with the cgx v42 pre11 libraries? I also
> had to install them because of the missing screenmodes.

> Bye,

> Alex.

Gruss,

Hi....

How do I install CDDB ?
I have dragged it into my librarys draw but when I start the CD Player up I
get a message insert volume CDDB

Regards

Shaun

@endnode
@node 08851.006
Subject: Re: Warp3D doesn't work anymore
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Wed, 27 Mar 2002 19:24:40 +0100

Hi,

Alexander Weber wrote:

>Since I installed the new Boing Bag for OS3.9, I always get a ramlib error
>when a program tries to open the warp3d.library. I already disabled the
>exec.library update, but it doesn't help.
>Do other people also have this problem?
>

That might be a problem with the dreaded small ramlib stack. 
Unfortunately, Warp3D has to load additional libraries in the startup 
code of Warp3D.library, which is using lots of stack.

There's a small program called "mcpramlib...." something (can't remember 
the exact name) that should be able to fix this (it enlarges ramlib's 
stack...) .


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08851.005
Subject: Re: Warp3D doesn't work anymore
From: Johan Forsberg <graak@telia.com>
Date: Wed, 27 Mar 2002 19:43:53 +0200

Hello Thomas

On 27-Mar-02, you wrote:

> There's a small program called "mcpramlib...." something (can't remember 
> the exact name) that should be able to fix this (it enlarges ramlib's 
> stack...) .

mcpramlibpatch =)

-- 

Johan "Graak" Forsberg

A1200 rev 1D1, Elbox Tower, Blizzard PPC 603e 175@210 MHz 68040 25@30 MHz
(60 MHz bus), 64 MB RAM, Power Flyer 1200, Mediator PCI 1200 (MMCD chips),
Voodoo3 3000 (SGRAM), SoundBlaster 128, Planet 100MBit, PixelView PlayTV
Pro, 13.5 GB Seagate Barracuda, 48x Sony, 17" Hansol, AmigaOS 3.9

@endnode
@node 08851.004
Subject: Re: Warp3D doesn't work anymore
From: Alexander Weber <alexwe@alexwe.de>
Date: Wed, 27 Mar 2002 17:20:35 +0100

>> Since I installed the new Boing Bag for OS3.9, I always get a ramlib
>> error when a program tries to open the warp3d.library. I already disabled
>> the exec.library update, but it doesn't help.
>> Do other people also have this problem?
> 
> No problems here ,I  have tried WipeOut, Heritic 2 , Freespace , shogo &
> Payback

I also tried it with StormC with the Debug-Mode. The error occurs when the
Warp3d Library is opened. With MuForce running there are also 3 enforcer hits:

READ from 00000000 (INST), PC:FFFFFFFE
Name: "ramlib"

Exception!! 00000002
Name: "ramlib"

LONG WRITE to 00000100, data=80000002
Name: "Processor Interrupt Level 7"

And the actual software failure is:
Task: "ramlib"
Error: 0x80000002 (DEADEND)
By: System
Cause: Hardware bus fault/access error
PC: $FFFFFFFE

But if I'm the only one, I will have to check my commodities.

> the only problem I have after installing Boing bag 2 is that the
> shuttle anim in PlayCD no longer works

This might be because the Shuttle is now used to display the CD and song
titles. Just try to play a CD when you are online (after installing the CDDB
library of course).
One other problem that I have is that DOpus Magellan's picture displayer
doesn't work anymore...

Could it have something to do with the cgx v42 pre11 libraries? I also had to
install them because of the missing screenmodes.

Bye,

Alex.
-- 
Alexander Weber
alexwe@alexwe.de             http://www.alexwe.de

@endnode
@node 08851.003
Subject: Re: Warp3D doesn't work anymore
From: Shaun Brown <shaunbrown@madasafish.com>
Date: 27 Mar 2002 15:05:14 +0000

Hallo Alexander,

Am 27/03/02 schriebst Du:
> Hello.

> Since I installed the new Boing Bag for OS3.9, I always get a ramlib
> error when a program tries to open the warp3d.library. I already disabled
> the exec.library update, but it doesn't help.
> Do other people also have this problem?

> Bye, Alex.

Gruss,

No problems here ,I  have tried WipeOut, Heritic 2 , Freespace , shogo &
Payback the only problem I have after installing Boing bag 2 is that the
shuttle anim in PlayCD no longer works

Regards

Shaun

@endnode
@node 08851.002
Subject: Warp3D doesn't work anymore
From: Alexander Weber <alexwe@alexwe.de>
Date: Wed, 27 Mar 2002 14:24:11 +0100

Hello.

Since I installed the new Boing Bag for OS3.9, I always get a ramlib error
when a program tries to open the warp3d.library. I already disabled the
exec.library update, but it doesn't help.
Do other people also have this problem?

Bye, Alex.
-- 
Alexander Weber
alexwe@alexwe.de             http://www.alexwe.de

@endnode
@node 08853.001
Subject: Re: Warp3D doesn't work anymore
From: Alexander Weber <alexwe@alexwe.de>
Date: Thu, 28 Mar 2002 22:57:47 +0100

Hello Thomas

On 28-M=E4r-02 you wrote:

> I've attached a small program called "loadlib". It's only parameter is=20
> library name to open. It then loads the library into memory.
>=20
> Please try the follwoing: load all the driver libraries you use into=20
> memory. For example, if you're using a CVisionPPC, do the following:
>=20
> loadlib libs:warp3d/hwdrivers/W3D_Permedia2.library
> loadlib libs:warp3d/hwdrivers/W3D_Permedia2_PPC.library
> loadlib libs:warp3d/gfxdrivers/W3D_CyberGfx4.library
> loadlib libs:warp3d/gfxdrivers/W3D_CyberGfx4_PPC.library

We are getting closer... The ramlib error occurs when loading the
W3D_CyberGfx4.library.
I also installed the old CGX libraries again and the error is gone... alo=
ng
with the screenmodes. Now I disabled the exec.library update and can fina=
lly
use Warp3D programs again.

Bye,

Alex.
--=20
Alexander Weber
alexwe@alexwe.de             http://www.alexwe.de

@endnode
@node 08852.004
Subject: Re: Re: Warp3D doesn't work anymore
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Thu, 28 Mar 2002 12:00:26 +0100

This is a multi-part message in MIME format.
--------------080306030908080701040701
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

Alexander Weber wrote:

>>There's a small program called "mcpramlib...." something (can't remember 
>>the exact name) that should be able to fix this (it enlarges ramlib's 
>>stack...) .
>>
>
>Thanks, but I just installed it and Warp3D still crashes. I've tried
>everything now (except re-installing the WB), but nothing helps...
>

This is very strange. Normally, mcpramlibpatch fixes the problem.

I've attached a small program called "loadlib". It's only parameter is 
library name to open. It then loads the library into memory.

Please try the follwoing: load all the driver libraries you use into 
memory. For example, if you're using a CVisionPPC, do the following:

loadlib libs:warp3d/hwdrivers/W3D_Permedia2.library
loadlib libs:warp3d/hwdrivers/W3D_Permedia2_PPC.library
loadlib libs:warp3d/gfxdrivers/W3D_CyberGfx4.library
loadlib libs:warp3d/gfxdrivers/W3D_CyberGfx4_PPC.library

Then, try some Warp3D program.

What this does is to load all the driver libraries into memory so that 
when a Warp3D-using program finally starts, the libraries are already 
loaded, so no disk I/O is needed....

Please let me know if that worked...


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



--------------080306030908080701040701
Content-Type: application/octet-stream;
 name="loadlib.lha"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="loadlib.lha"

AB1RLWxoNS0pAgAAmAIAAIIGqSYAAAdsb2FkbGli9/0CA2KDtbahPpbS6kIYSlMUeL78jXba
ZkUxuCiDLbqtZoSha1BTI2Zlk12ukxLLg2MYq8GMhmvGjwobgReGlBeV43jzQR3G8COBwiIL
kFB4KZd6bKrdAbSklAIP3Di8YH+94RH+T80NIYwsFsyNqBq5Xu2D5x4KWwtsxydFa5+rPDHY
QCZeM8WhyFrn59kvyIgibO0zPVInrXODUEnV4icMCQ2jVwMQPzghUykU2/RRlnEAlD08F6hL
l80aoDTNFNmGdFDntZTwFNu2hwXNu2pANdP4a+GmXkyrxnlO66m+1Dpdpj8U51Lu+f6BAZTl
bxmmXPC/HSPzUss4w14Cu3fGFgjgNsWveUstccqYnvUyDffLsU44zyXoy/Wp36/UejFg8OXs
XbRZop8tTWaxsHECI1F2rRM4DhL8e1aLkPlu5O73OFbJKgGyM/aLXoCTrU4Q26JIE/6hxlrE
74pQEJpBRsxy4gAfzh5d3kYgo/eTsYSYbLUUoHxFI7O/R15ETv9sSfWruJnPuwKemR/QKSCZ
M0D8LMHpHwEzAfyPzcpMDmsAiY348y8GKIeyO5YQjwldzIBaww5X5darluru6QVey43/bFel
LoSqHVClXXaqSSVnF2BKIxU0ZLFV1H9psVtfPqGhMnrSUkUkcfGSR5iSSKorVRWzXXXHSUXl
3rFdFcFeJoRmrWqEbceIy5YbYNBYalyVv+aaFJtfLFK84RzQqN/ww1/5+g/YAA==
--------------080306030908080701040701--

@endnode
@node 08855.001
Subject: Re: Alpha testing without texturing
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Sat, 30 Mar 2002 23:25:53 +0100

Hi,

Olivier Fabre wrote:

>If I want to do alphatesting without texturing on the PM2 (with MiniGL),
>I have to, erm, create a white texture with an alpha layer and actually
>use texturing ?
>

Uh, alpha testing should work without texture. Remember though that the 
Permedia 2 is not able to interpolate alpha values (i.e. the fragment 
alpha has to be the same on all vertices, and will stay constant 
throught the polygon). This means that either the whole polygon is 
drawn, or rejected...


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08854.001
Subject: Alpha testing without texturing
From: Olivier Fabre <off@free.fr>
Date: Sat, 30 Mar 2002 17:24:22 +0100

Hi,

If I want to do alphatesting without texturing on the PM2 (with MiniGL),
I have to, erm, create a white texture with an alpha layer and actually
use texturing ?

I just want to make a picking routine.

-- 
/* I told you this was private.
 * The data beyond this point has changed, is changing, and
 * will continue to change.
 */

@endnode
@node 08856.002
Subject: Re: MiniGL: StormC or my code?
From: Olivier Fabre <off@free.fr>
Date: Sun, 31 Mar 2002 22:13:45 +0100

On 31-mars-02, Paul Qureshi, you wrote:

> You mean you had similar problems before?

Sure, stuff being drawn all other the WB... leading to a crash after
some time.. See my previous post about bitmap locking ;)

> so I'll definatly give VBCC a try.

I don't remember if minigl-r1 compiled out of the box without source
changes with VBCC.. but one thing to note is that you should use make
3.76.1 as found on Aminet, not GG's make; otherwise you'll have to
tweak the makefile.
If you have compilation problems, mail me and I'll send you the latest
version for VBCC.

Regards
-- 
StAn_ or StAn^ on IRCnet/ARCnet

@endnode
@node 08856.001
Subject: Re: MiniGL: StormC or my code?
From: Paul Qureshi <paul@world3.net>
Date: Sun, 31 Mar 2002 19:12:23 +0100

Hi Olivier.

> Have you tried using mglLockMode(MGL_LOCK_MANUAL) ?
> (Just an idea)

I'll give it a try, it's worth a shot.

>> It may also be worth noting that sometimes, when large screens are
>> opened and the screen buffers cleared, parts of other screens are
>> cleared too.

> With MGL_LOCK_MANUAL, don't forget to check the return value of
> mglLockDisplay(). If it is false, don't draw anything. I'm always
> using this now and didn't get such problems since then.

You mean you had similar problems before? In that case, I will definatly
try it as soon as possible.

>> Has anyone had any luck using VBCC and MiniGL?

> Sure, after some tweaking. Christian Michael has been working on
> MiniGL for some time now, and he is using VBCC 68k. I'm testing the
> changes and fixing minor things on PPC and almost everything looks
> fine with the current version.

That's good to hear, with luck it might work better than Storm.

> Note that VBCC has code generation problems too, especially in
> optimising modes. I'm not saying that it creates buggy code all the
> time, but it *can* happen. There is currently a problem with the
> gearsWOS demo, some strange polygons are generated... I think that it
> is a problem with VBCC, but *maybe* it's a problem in gears.c. I
> haven't started investigating this problem yet...

I suppose few compilers are bug free, it's just a case of how often
those bugs crop up. Still, Storm has it's moments with optimisation too,
so I'll definatly give VBCC a try.

Regards,
Paul
-- 
.- world3.net ------------.---------------------------.
| amimpc.world3.net       | Amiga in-car MP3 player   |
| www.amigasupport.org.uk | Amiga Support Association |
`-------------------------^---------------------------'

@endnode
@node 08855.006
Subject: Re: MiniGL: StormC or my code?
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Sun, 31 Mar 2002 20:09:58 +0200

Hi,

Paul Qureshi wrote:

>I have attached some code I wrote which seems like it should work, just
>in case it's relevant. Friedens: can you tell me what version of StormC
>was used to create the project files?
>

V4, IIRC... I never used StormC extensively, though, so I can't really 
say if it works in all cases. I was able to compile gears, but didn't 
test more than that...


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08855.005
Subject: Re: Re: Alpha testing without texturing
From: Thomas Frieden <ThomasF@hyperion-entertainment.com>
Date: Sun, 31 Mar 2002 20:06:32 +0200

Hi,

Olivier Fabre wrote:

>>Uh, alpha testing should work without texture.
>>
>
>Ah, sorry, I forgot to tell you that I want to use an alpha layer.. This
>is to draw a disc on a billboard (a faked sphere). So of course I need
>an alpha texture. But driverinfo from the MiniGL package reports that
>the PM2 doesn't handle A8 textures. So I just wanted to check that
>there was no other way than using a RGBA texture, with a white picture
>and my alpha layer.
>

Ok, now I got it. No, the P2 doesn't support A8 textures, so you will 
have to use an RGBA texture, I'm afraid.


Regards,

-- 
 Thomas Frieden
 Senior Developer, Hyperion Entertainment
 ThomasF@hyperion-entertainment.com
 http://www.hyperion-entertainment.com



@endnode
@node 08855.004
Subject: Re: MiniGL: StormC or my code?
From: Olivier Fabre <off@free.fr>
Date: Sun, 31 Mar 2002 16:06:57 +0100

'lo Paul,

On 31-mars-02, Paul Qureshi, you wrote:

> I try to draw
> anything in a glBegin()...glEnd() the Amiga locks up.

Have you tried using mglLockMode(MGL_LOCK_MANUAL) ?
(Just an idea)

> It may also be worth noting that sometimes, when large screens are
> opened and the screen buffers cleared, parts of other screens are
> cleared too.

With MGL_LOCK_MANUAL, don't forget to check the return value of
mglLockDisplay(). If it is false, don't draw anything. I'm always using
this now and didn't get such problems since then.

> Has anyone had any luck using VBCC and MiniGL?

Sure, after some tweaking. Christian Michael has been working on MiniGL
for some time now, and he is using VBCC 68k. I'm testing the changes
and fixing minor things on PPC and almost everything looks fine with
the current version.

Note that VBCC has code generation problems too, especially in
optimising modes. I'm not saying that it creates buggy code all the
time, but it *can* happen.
There is currently a problem with the gearsWOS demo, some strange
polygons are generated... I think that it is a problem with VBCC, but
*maybe* it's a problem in gears.c. I haven't started investigating this
problem yet...

-- 
One OS to rule them all, One OS to find them,
One OS to bring them all and in the darkness bind them.

@endnode
@node 08855.003
Subject: Re: Alpha testing without texturing
From: Olivier Fabre <off@free.fr>
Date: Sun, 31 Mar 2002 15:58:13 +0100

'lo Thomas,

On 30-mars-02, Thomas Frieden, you wrote:

> Uh, alpha testing should work without texture.

Ah, sorry, I forgot to tell you that I want to use an alpha layer.. This
is to draw a disc on a billboard (a faked sphere). So of course I need
an alpha texture. But driverinfo from the MiniGL package reports that
the PM2 doesn't handle A8 textures. So I just wanted to check that
there was no other way than using a RGBA texture, with a white picture
and my alpha layer.

> the Permedia 2 is not able to interpolate alpha values

This is interesting to know though :)

Regards
-- 
Amiga 1200, 040/25 603e/210 SCSI & OS 3.9

@endnode
@node 08855.002
Subject: MiniGL: StormC or my code?
From: Paul Qureshi <paul@world3.net>
Date: Sun, 31 Mar 2002 14:16:18 +0100

Warning: This is a message in MIME format. Your mail reader does not
support MIME. Some parts of this message will be readable as plain text.
To see the rest, you will need to upgrade your mail reader. Following are
some URLs where you can find MIME-capable mail programs for common platforms:

  Amiga............: YAM          http://www.yam.ch/
  Unix.............: Metamail     ftp://ftp.bellcore.com/nsb/
  Windows/Macintosh: Eudora       http://www.qualcomm.com/

General info about MIME can be found at:

http://www.cis.ohio-state.edu/hypertext/faq/usenet/mail/mime-faq/top.html


--BOUNDARY.155381920.1
Content-Type: text/plain

Hi.

I have been trying to get MiniGL going with StormC for a while now. I
have come to the conclusion that the StormC V3 compiler must be at
fault.

I have tried compiling all the demos, and my own code, using my own
project files and the one supplied. I have tried turning off all
optimisation, compiling for different CPUs etc. I can get MiniGL to open
a screen or window and clear it, but the moment I try to draw anything
in a glBegin()...glEnd() the Amiga locks up.

It may also be worth noting that sometimes, when large screens are
opened and the screen buffers cleared, parts of other screens are
cleared too.

I have attached some code I wrote which seems like it should work, just
in case it's relevant. Friedens: can you tell me what version of StormC
was used to create the project files?

Has anyone had any luck using VBCC and MiniGL? I don't really want to
get into installing GCC, especially with the 68k optimisation problems,
but VBCC sounds okay.

Regards,
Paul
-- 
.- world3.net ------------.---------------------------.
| amimpc.world3.net       | Amiga in-car MP3 player   |
| www.amigasupport.org.uk | Amiga Support Association |
`-------------------------^---------------------------'

--BOUNDARY.155381920.1
Content-Type: text/plain; name="test.c"
Content-Disposition: attachment; filename="test.c"

#include <stdio.h>
#include <mgl/gl.h>
#include <clib/dos_protos.h>
//#include <exec/types.h>

#define w 320
#define h 240

#ifndef M_PI
#define M_PI 3.14159265
#endif

void init();
void DoFrame(void);
void keys(char c);

void main()
{
	void *res = 0;

	MGLInit();

	mglChooseVertexBufferSize(1000);
	mglChooseNumberOfBuffers(2);
	mglChooseWindowMode(GL_TRUE);

	res = mglCreateContext(0, 0, w, h);

//	printf("mglCreateContext: %d\n", res);

	if (res)
	{
		mglEnableSync(GL_TRUE);
		mglLockMode(MGL_LOCK_SMART);
		glClearColor(0.0, 0.0, 0.0, 1.0);
		glDisable(GL_DEPTH_TEST);
		glDisable(GL_CULL_FACE);
		glDisable(GL_TEXTURE_2D);
		glShadeModel(GL_FLAT);
		glHint(MGL_W_ONE_HINT, GL_FASTEST);
		
		init();

		mglKeyFunc(keys);
		mglIdleFunc(DoFrame);
	
		mglMainLoop();

		mglDeleteContext();
	}
	
	MGLTerm();
}

void init()
{
	glMatrixMode(GL_PROJECTION);
	glLoadIdentity();
	gluPerspective(60, 1.3333333, 1.0, 100.0);
	
	glMatrixMode(GL_MODELVIEW);
	glLoadIdentity();
	glViewport(0, 0, w, h);
}

void DoFrame(void)
{

	glClear(GL_COLOR_BUFFER_BIT);
/*
	glMatrixMode(GL_PROJECTION);
	glLoadIdentity();
	gluPerspective(70, 1.3333333, 1.0, 100.0);

	glMatrixMode(GL_MODELVIEW);
	glLoadIdentity();
*/
	glColor3f(1.0, 0.0, 0.0);

	glBegin(GL_QUADS);
		glVertex3f(-1.0, -1.0, 0.0);
		glVertex3f( 1.0, -1.0, 0.0);
		glVertex3f( 1.0,  1.0, 0.0);
		glVertex3f(-1.0,  1.0, 0.0);
	glEnd();
	
	mglSwitchDisplay();

}

void keys(char c)
{
	switch (c)
	{
		case 0x1b:
			mglExit();
			break;
	}
}
--BOUNDARY.155381920.1--


@endnode
