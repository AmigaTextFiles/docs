@DATABASE " UNIX "
@AUTHOR "Robert 'Sentex' Nowodworski
@$VER "v.1 23.11.2001"
@NODE MAIN " UNIX "


@{b}    
        Wita was Sentex z Lordcore Systems.Przedstawiam wam pierwszâ czëôê cyklu poôwiëconego
        systemowi operacyjnemu @{fg fill}UNIX@{fg text}.


        Charakterystyka systemu UNIX.@{ub}
       ------------------------------------


        Twórcami systemu operacyjnego UNIX sâ Ken Thompson i Dennis Ritchie,którzy w latach
        1969-1970 opracowali w Bell Laboratories pierwszâ wersjë systemu.Ich zamiarem byîo
        stworzenie wygodnego systemu do wytwarzania oprogramowania z prostym,ale dajâcym duûe
        moûliwoôci jëzykiem poleceï oraz niezaleûnym od urzâdzeï systemem plików.Nastëpnym 
        etapem w rozwoju systemu byîo opracowanie jëzyka C,który od tej pory jest nieodîâcznie
        zwiâzany z systemem.
        Aktualnâ,najbardziej rozpowszechnionâ wersjâ systemu jest UNIX System V,jakkolwiek
        wiëkszoôê komercyjnych wersji systemu zawiera równieû elementy wprowadzone na
        University of California w Barkeley w wersji BSD Unix 4.2 i 4.3


           Charakterystyczne cechy systemu UNIX sâ nastëpujâce:

        - wielodostëpnoôê - liczba uûytkowników zaleûy gîównie od mocy obliczeniowej sprzëtu
          i wynosi zazwyczaj od 16 do kilkuset

        - wieloprocesowoôê (wielozadaniowoôê) - jednostkami aktywnymi w systemie sâ procesy
          pracujâce wspóîbieûnie przy wykorzystaniu róûnych mechanizmów synchronizacji
          i komunikacji

        - hierarchiczny system plików z jednolitym potraktowaniem plików zwykîych,katalogów
          i plików opisujâcych urzâdzenia zewnëtrzne

        - wykonywanie operacji wejôcia/wyjôcia niezaleûnie od typu urzâdzeï zewnëtrznych

        - duûa liczba programów narzëdziowych tj. kompilatorów jëzyków programowania
          (C,Pascal,Fortran 77,Basic,Cobol) wraz z otoczeniem wspomagajâcym uruchamianie
          programów

        - duûa liczba programów usîugowych

        - przenoszenie oprogramowania systemowego dziëki zapisowi w jëzyku C.


        Gîównâ wadâ systemu jest sîownictwo uûywane w poleceniach systemu UNIX,sposób tworzenia
        skrótów,a czasami pisownia wyrazów,które na pierwszy rzut oka robiâ wraûenie dziwacznych.
        W poleceniach tych korzysta sië prawie wyîâcznie z maîych liter.Istniejâ jednak wyjâtki
        - maîe litery nie zastëpujâ po prostu duûych.

        Omówië obecnie pokrótce kilka zagadnieï dotyczâcych budowy i dziaîania mechanizmów
        wewnëtrznych systemu UNIX,które róûniâ ten system od innych.Tworzâ one jednoczeônie
        pewnâ filozofië tego systemu i filozofië wspóîpracy uûytkownika z nowoczesnym systemem
        komputerowym.
        Charakterystycznâ cechâ nowoczesnych systemów operacyjnych jest ich struktura warstwowa.
        Kaûdy system operacyjny ma wyodrëbnionâ czëôê,która realizuje jego najbardziej
        podstawowe funkcje.Czëôê të nazywa sië zwykle jâdrem systemu albo warstwâ wewnëtrznâ.
        Pozostaîa czëôê systemu tworzy warstwë zewnëtrznâ.Podziaî taki nie jest jednoznacznie
        ustalony dla wszystkich systemów.W jâdrze systemu implementuje sië te wszystkie funkcje,
        które z racji swojej wagi i charakteru muszâ byê traktowane w uprzywilejowany sposób.
        W szczególnoôci wiëc jâdro jest odpowiedzialne za:obsîugë przerwaï,przydziaî procesora,
        operacje wejôcia/wyjôcia.Ponadto w jâdrze sâ implementowane mechanizmy dziëki którym
        system komputerowy wraz z jâdrem tworzy maszynë bardziej atrakcyjnâ dla uûytkownika
        zwanâ czësto maszynâ wirtualnâ lub maszynâ rozszerzonâ.
        Zwykle warstwa zewnëtrzna obejmuje procesy uûytkowników (w tym miejscu dla uproszczenia
        moûemy przyjâê,ûe sâ to po prostu programy uûytkowników) i te moduîy systemu operacyjnego,
        które mogâ wspóîzawodniczyê z uûytkownikami o zasoby w podobny sposób jak uûytkownicy
        wspóîzawodniczâ miëdzy sobâ.Warstwa zewnëtrzna ma niekiedy postaê rodziny procesów
        wspóîbieûnych,zorganizowanych w strukturë hierarchicznâ.
        Typowym przykîadem systemu operacyjnego majâcego strukturë warstwowâ jest wîaônie
        system UNIX.
        Podziaî na warstwy jest w systemie UNIX bardzo przejrzysty.Jâdro systemu poza czynnoôciami
        wspomnianymi powyûej (obsîuga przerwaï,przydziaî procesora,wejôcie/wyjôcie) realizuje
        procesy.Ponadto zarzâdza pamiëciâ operacyjnâ i zewnëtrznâ.Kaûdej akcji wykonywanej poza
        jâdrem odpowiada pewien proces.Warstwa zewnëtrzna systemu UNIX jest zestawem procesów,
        które odpowiadajâ wykonywaniu zarówno programów systemowych jak i programów uûytkowników.
        Wôród procesów warstwy zewnëtrznej specjalnâ rolë odgrywa tzw. powîoka (ang. shell).
        Jest to proces odpowiedzialny za konwersacjë z uûytkownikiem tzn. interpretujâcy 
        polecenia wprowadzane z klawiatury terminalu.Oto przykîadowa struktura systemu 
        operacyjnego @{" UNIX " System "run Multiview StrukturaUNIXa.iff"}.

        Jak juû wspomniaîem jâdro stanowi centralnâ czëôê systemu realizujâcâ operacje
        umoûliwiajâce wykonywanie procesów,zarzâdzanie zasobami oraz stanowi îâcznik ze sprzëtem.
        Jâdro stanowi iloôciowo niewielkâ czëôê systemu...zazwyczaj 5%-10% caîego kodu.
        Dodam tylko,ûe jâdro systemu z obejrzanego wczeôniej rysunku zostaîo gîownie napisane
        w C (ok. 10 000 linii kodu) oraz czëôciowo w asemblerze (ok.1000 linii kodu).
        
        Przeciëtny uûytkownik nie interesuje sië zbyt gîëboko budowâ sprzëtu,którym sië posîuguje
        przy rozwiâzywaniu swojego problemu,ani szczegóîami oprogramowania systemowego.Dlatego
        w UNIXie umieszczono osîonë (powîokë) pomiëdzy uûytkownikiem a komputerem aby uûytkownik
        komunikowaî sië za pomocâ zestawu poleceï systemowych z wirtualnâ maszynâ,której jedynâ
        widocznâ czëôciâ jest wîaônie program shell tj. powîoka.Jâdro systemu odgrywa podobnâ
        rolë,ale na niûszym poziomie:ukrywa ono maszynë fizycznâ przed programami i zaawansowanymi
        uûytkownikami chcâcymi od czasu do czasu korzystaê z usîug niskiego poziomu systemu.
        Chodzi tutaj o wykonywanie operacji dla których nie istniejâ standardowe instrukcje
        w jëzyku wysokiego poziomu.Sâ to np. operacje:zainicjowania nowego procesu,otworzenia
        pliku,odczytania zegara systemowego itp.Dostëp do tych operacji uzyskuje sië za pomocâ
        funkcji systemowych (ang. system calls).Wywoîania funkcji systemowych moûna traktowaê
        jako instrukcje wykonywane przez maszynë wirtualnâ - moûna teû powiedzieê,ûe zbiór
        tych funkcji stanowi maszynë wirtualnâ.Innymi sîowy wywoîania funkcji systemowych sâ
        poleceniami dla jâdra tak jak zwykîe polecenia wydawane z terminalu uûytkownika sâ
        poleceniami dla programu powîoki.Moûna odwoîywaê sië do nich z programów napisanych w C
        dokîadnie tak jakby byîy zwykîymi funkcjami zdefiniowanymi w jëzyku C.

        W ramach funkcji systemowych moûna wyróûniê dwie kategorie dotyczâce odpowiednio procesów
        i systemu plików.Proces jest zazwyczaj wykonywanym programem i skîada sië z:wykonywanego
        programu,danych,stosu i wskaúnika stosu,licznika rozkazów i innych rejestrów oraz innych
        informacji niezbëdnych do wykonania programu.Taka interpretacja procesu wiâûe sië
        z konkretnym ôrodowiskiem w którym jest on wykonywany.Jeôli jest to system pracujâcy
        w trybie podziaîu czasu,to proces moûe byê czasowo zawieszany,a póúniej restartowany
        w tym samym stanie jak przed zawieszeniem.Pojawiajâ sië wobec tego problemy zwiâzane
        z restartowaniem procesu.Na przykîad jeôli korzystaî on z kilku otwartych plików,to po
        jego restartowaniu system operacyjny musi zagwarantowaê poprawne czytanie danych,to jest
        od miejsca w którym nastâpiîo zawieszenie procesu.W wiëkszoôci systemów operacyjnych
        wszystkie informacje o kaûdym procesie sâ przechowywane w tablicy procesów.Tak wiëc
        proces skîada sië z przestrzeni adresowej (nazywanej czësto obrazem pamiëci) oraz
        z zapisów w tablicy procesów (sâ to przede wszystkim zawartoôci rejestrów procesora).

        Podstawowymi funkcjami w ramach systemu zarzâdzania procesami sâ te, które zajmujâ sië
        tworzeniem i zawieszaniem procesów.Procesem,który czyta zlecenia systemu operacyjnego
        z terminalu jest powîoka.Jeôli na przykîad uûytkownik wprowadzi zlecenie ûâdajâce 
        wykonania kompilacji programu,to powîoka musi utworzyê nowy proces,którym bëdzie
        kompilacja.Gdy proces ten zakoïczy kompilacjë,to wywoîuje funkcjë systemowâ zawieszajâcâ go.
        Niektóre procesy mogâ generowaê nowe procesy - procesy potomne (ang. child process).
        Z procesami zwiâzane sâ tzw. sygnaîy (ang. signal).Rozwaûmy je na przykîadzie procesu
        wysyîajâcego informacjë w sieê.Moûe on ustawiê przekaúnik czasowy (ang. timer) okreôlajâcy
        czas oczekiwania na potwierdzenie odbioru komunikatu i dalej wykonywaê inne prace.Jeôli
        po upîywie tego czasu nie nadejdzie potwierdzenie odbioru komunikatu przez adresata,
        to moûna przyjâê,ûe informacja zostaîa gdzieô w sieci utracona.W tej sytuacji system
        operacyjny wysyîa do procesu sygnaî.Powoduje on czasowe zawieszenie procesu
        (niezaleûnie od tego co on wykonywaî w danej chwili),zapamiëtanie stanu jego rejestrów
        na stosie i wystartowanie procedury obsîugi sygnaîu w tym przypadku zajmujâcej sië 
        retransmisjâ utraconej informacji.Po wykonaniu moduîu obsîugi sygnaîu proces jest
        restartowany w stanie sprzed otrzymania sygnaîu.Sygnaîy sâ programowym odpowiednikiem
        przerwaï na poziomie sprzëtu.

        Kaûda osoba pracujâca w systemie ma identyfikator - uid (ang. user identification),
        kaûdy proces rozpoczynajâcy pracë w systemie - identyfikator uûytkownika,który go
        zainicjowaî,a procesy potomne - identyfikatory ich procesów macierzystych.

        Druga kategoria funkcji systemowych jest zwiâzana z systemem plików.Sâ to wywoîania
        niezbëdne do tworzenia,usuwania,czytania i zapisywania,otwierania i zamykania plików
        oraz tworzenia i usuwania katalogów.
        Hierarchia procesów i plików jest zorganizowana w postaci drzewa,lecz podobieïstwo
        w tym momencie sië koïczy bowiem hierarchia procesów nigdy nie jest zbyt gîëboka
        (do 3 poziomów) i zazwyczaj jest krótkotrwaîa (do kilku minut).

        Kaûdy plik jest identyfikowany przez podanie nazwy ôcieûki dostëpu (ang. path name)
        prowadzâcej od katalogu korzenia do pliku.Ôcieûki rozpoczynajâce sië od katalogu
        korzenia sâ nazywane ôcieûkami absolutnymi.Zawierajâ one listë katalogów przez które
        naleûy przejôê w poszukiwaniu danego pliku,a rozpoczynajâ przeszukiwanie od katalogu
        korzenia.Nazwy katalogów sâ oddzielone znakiem slash - ukoônâ kreskâ.Slash (/) na
        poczâtku ôcieûki wskazuje,ûe jest to ôcieûka absolutna.Kaûdy proces moûe posiadaê
        swój katalog bieûâcy w którym nazwy ôcieûek nie rozpoczynajâ sië od ukoônej kreski.
        System operacyjny UNIX nie pozwala,aby ôcieûka byîa poprzedzona nazwâ lub numerem
        napëdu dyskowego.Tak wiëc,aby wykorzystaê w systemie katalog znajdujâcy sië na dyskietce
        naleûy najpierw przyîâczyê go do katalogu korzenia,który zazwyczaj znajduje sië na dysku
        twardym.

        Pliki i katalogi w systemie UNIX sâ chronione 9-bitowym kodem ochronnym.Pozwolenie na
        czytanie lub zapisywanie pliku jest sprawdzane podczas jego otwierania.Jeôli dostëp jest
        dozwolony,system wysyîa do procesu deskryptor pliku wykorzystywany w kolejnych operacjach.

        W systemie UNIX wyróûniono tak zwane pliki specjalne.Pozwalajâ one na widzenie urzâdzeï
        wejôcia/wyjôcia tak,jakby to byîy zwyczajne pliki.W ten sposób operacje zapisu i odczytu
        z tych urzâdzeï mogâ byê wykonywane z wykorzystaniem tych samych wywoîaï systemowych,
        które dotyczâ zapisu i odczytu plików.


        

        @{b}No i dobrneliômy do koïca pierwszej czëôci o UNIXie.Zapraszam na nastëpne.@{ub}




                                                                        Sentex


@ENDNODE