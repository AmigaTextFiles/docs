          CHAPTER 8.  QUERIES AND HELP SCREENS

      


USER INQUIRIES (In)

      The Inquiry command has eight options.
      The most commonly used options display
      the following information:

         ATI3  Call duration
         ATI4  Current settings
         ATI5  NVRAM settings
         ATI6  Link diagnostics summary

      I0 The modem returns a 3-digit product
         code.  If you have a problem and call
         USRobotics' Technical Support Depart-
         ment, you may be asked for this
         product code.

      I1 The modem performs a checksum of its
         read only memory (ROM) and returns
         the result to the screen.  This
         function is used only in factory
         testing.  The modem should always
         read the same number.

      I2 The modem performs a test of its
         random access memory (RAM) and
         returns either the OK (0) or ERROR
         (4) result code, followed by OK when
         the test is completed.  You may want
         to use this command as a checkpoint
         if the modem appears to be
         malfunctioning.

      I3 The modem returns the duration of the
         last call if set to K0.  It displays
         the actual time if set to K1.  See
         the description of the Kn command in
         Chapter 5.
      I4 The modem displays its current
         configuration.  Figure 8.1 on the
         following page is an example.
















      Figure 8.1ÍSample Result of ATI4 Command


      I5 The modem displays the configuration
         stored in nonvolatile random access
         memory (NVRAM), as in the following
         example.


















      Figure 8.2ÍSample NVRAM Settings Screen
      I6 During a connection, the modem
         monitors and stores information about
         link operations.  When the call is
         ended, you can request a diagnostic
         summary, as in the following example.


















     Figure 8.3ÍSample Link Diagnostics Screen
                    (ATI6)


      For calls under data compression, the
      number of characters sent may be less
      than the number of octets sent, due to
      buffering operations.  Line Reversals
      only applies to HST-mode operations,
      when the modems switch the high and low
      speed channels.  At this time, online
      fallback is only reported Enabled in HST
      mode.

      Most terms used in the display are self-
      explanatory except for the following:

      Octets:  Compressed data units.  If the
      number of octets is greater than the
      number of characters sent, the modems
      probably used MNP5 compression on an
      already compressed file, and the result
      was expanded data.

      Line Reversals:  The number of times
      HST-mode modems switched the high and
      low speed channels.

      Blers:  Errors in data and protocol
      blocks.  If there were many block
      errors, your receiver may have
      experienced problems on the line.

      Blocks Resent:  These represent blocks
      the remote modem resent due to the
      previous category, Blers.

      Link Timeouts:  Protocol detection
      problems:  communications were severed
      momentarily, and the modems probably
      recovered.  This does not indicate the
      retry timeout.

      Link Naks:  Negative acknowledgments
      (one or more blocks).

      Data Compression:  Indicates the type of
      data compression negotiated for the call
      (V42BIS or MNP5) or NONE.  A V42BIS
      response includes the size of the
      dictionary and the maximum string length
      used, for example, 2048/32.  See
      Appendix A for more information.

      Equalization Long/Short:  Status of S15
      bit 0; long if bit 0=0, short if bit
      0=1.  Short equalization applies only to
      HST modems.

      Fallback:  Enabled/Disabled:  indicates
      whether or not the modems negotiated
      online fallback during the connection
      sequence.
      Protocol:  Indicates the error control
      protocol negotiated (LAPM, MNP, NONE) or
      SYNC for a synchronous call.

      Speed:  The last rates at which the
      receiver/transmitter were operating
      before disconnecting.

      Disconnect Reason:  Possible reasons the
      modem hung up are as follows:

        DTR dropped:  The DTE dropped the Data
        Terminal Ready signal, terminating the
        call.

        Escape code:  The operator sent the
        modem the +++ escape code.

        Loss of carrier:  The modem detected
        loss of the remote modem's carrier and
        waited the duration specified in
        Register S10 (default is 0.7 seconds).

        Inactivity timeout:  The modem
        detected no activity on the line for
        the duration specified in Register S19
        (default is 0, timer disabled).

        MNP incompatibility:  The modem is set
        to &M5 and the remote modem does not
        have MNP capability, or there was an
        MNP negotiation procedure error.

        Retransmit limit:  The modems reached
        the maximum of twelve attempts to
        transfer a data frame without error.

        LD received:  The remote modem sent an
        MNP error control Link Disconnect
        request.

        DISC:  The remote modem sent a V.42
        Disconnect frame.
        Loop loss disconnect:  The modem
        detected a loss of current on the loop
        connecting it with the telephone
        company central office.  This usually
        occurs because the remote modem has
        hung up:  the central office drops
        current momentarily when there is a
        disconnect at the other end of a call.
        Unless Register S38 is set higher than
        zero, the modem immediately hangs up
        at loop loss.

        Unable to Retrain:  After several
        attempts, disturbances on the phone
        line prevented the modems from
        retraining, and they could no longer
        transmit or receive data.

        Invalid speed:  The modem is set to
        &N1 or higher, for a fixed link rate,
        and the remote modem is not operating
        at the same rate.

        XID Timeout:  The modems failed to
        negotiate the V.42 Detection (XID
        Exchange) phase.

        SABME Timeout (Set Asynchronous
        Balance Mode Extended):  The modems
        failed this part of V.42 link
        negotiation.

        Break Timeout:  Incompatible
        processing of a Break signal occurred.

        Invalid Codeword:  The modem received
        an invalid V.42 bis (compression)
        frame.

        A Rootless Tree:  The modem received
        an invalid V.42 bis (compression)
        frame.
        Illegal Command Code:  The modem
        received an invalid V.42 bis
        (compression) frame.

        Extra Stepup:  The modem received an
        invalid V.42 bis (compression) frame.

      I7 The modem returns a product
         configuration.  If you have a problem
         and call USRobotics' Technical
         Support staff, you may be asked to
         read this screen.
S-REGISTER QUERY (Sr?)   

      This command allows you to view the
      contents of a particular S-Register, as
      in the following example that requests
      the contents of Register S0 ("On what
      ring will the modem answer?"):

             ATS0? <Enter>


PHONE NUMBER QUERY (&Zn?)

      At this command, the modem returns the
      phone number stored in NVRAM at position
      n, as in the following example that
      includes a sample modem response:

             AT&Z3? <Enter>
             5551234


LAST-DIALED NUMBER INQUIRY (DL?)

      At this command the modem displays the
      number stored in the last-dialed number
      buffer:

             ATDL?


HELP SCREENS

      Courier modems provide four Help
      screens:  summaries of the basic AT
      command set, extended ampersand (&)
      command set, S-Register functions, and
      Dial command options.


Stop/Restart Display
      The following command stops the display.
      Hold down the Control key and type "S":

             <Ctrl>-S

      To restart the display, use the same
      command or press <any key>.


Cancel Display

      Either of the following commands cancels
      the display.

             <Ctrl>-C

             <Ctrl>-K
Basic Command Set ($)    

      At AT$, the Courier displays a screen
      that shows a partial summary of the
      command set.  A second screen, activated
      by pressing any key, shows the remaining
      commands.  The first screen is shown in
      Figure 8.4.


















    Figure 8.4ÍSample Basic Commands HELP Screen



Extended Command Set (&$)     

      At AT&$, the Courier displays a screen
      that shows a partial summary of the
      extended ampersand command set.  A
      second screen, activated by pressing any
      key, shows the remaining command set.
      The first screen is shown in Figure 8.5.
















     Figure 8.5ÍSample Ampersand Commands HELP
                    Screen



Dialing (D$)

      At ATD$, the Courier displays this Dial
      command summary:


















     Figure 8.6ÍSample Dial Command HELP Screen
S-Register Functions (S$)

      At ATS$, the Courier displays a screen
      that shows a partial summary of the S-
      Register functions.  A second screen,
      activated by pressing any key, shows the
      remaining registers.  The first screen
      is as follows.


















      Figure 8.7ÍSample S-Register HELP Screen
