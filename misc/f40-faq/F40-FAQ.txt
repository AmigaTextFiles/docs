=============================================================================
Frequently Asked Questions (FAQ) Concerning the Fusion-Forty Accelerator Card
       Author: Brian King    Version: 1.9    Date: Novemeber 14, 1995
=============================================================================
Below you will find a list of frequently asked questions regarding the
Fusion-Forty accelerator card.  More information will be added as it is
submitted.

NOTE:  Currently waiting for the following benchmarks from graphics card
       owners: PicassoII, GVP Spectrum, all with 256 colours at 640x480
       (see section 3d for examples).

CHANGED: Sections III, 1, 3a, 5b, 7, 10.
ADDED:   Picasso-II problems, hints, information.

Please send all contributions and suggestions to:
Snail:
  Brian King
  1-420 Fenerty Court
  Kanata, ON, Canada
  K2L 3A9
Email:
  Brian_King@mitel.com

FAQ OUTLINE
=============================================================================
  I. Disclaimer
 II. Introduction
III. Contributors / Distribution List
 1. What machines does it work with?
 2. Specs and RAM types of the card?
 3. What Zorro-II cards work with it?
    a) Which SCSI controllers
    b) Which RAM cards
    c) Networking cards
    d) Graphics cards
    e) Bridge-cards
    f) Others
 4. What versions of the OS does it work with?
    a) KS 1.3 support
    b) KS 2.x support
    c) KS 3.x upgrade (Plug'N'Go ROMs)
 5. Emulation support?
    a) ShapeShifter
       a.1 - Mac ROM type
       a.2 - Mac System Software version
       a.3 - ShapeShifter settings
    b) EMPLANT (Mac/E586)

    c) AMAX
    d) PC-TASK 3.1
 6. Virtual Memory Support?
 7. What is the latest software and ROM release?
 8. Problems and solutions
    a) CopyBack problems (with 2.x of the OS or greater)
    b) Enforcer hits with ramlib.
    c) GVP Series II SCSI+RAM (HC+8) system with 16-bit fast mem won't work
    d) My Fusion Forty doesn't boot / is very slow with an OS 3.1 ROM
    e) My Fusion Forty crashes after I installed a new OS.
    f) Problems with 68040.library?
    g) Problems with the Picasso-II graphics card?
 9. Future growth?
    a) SCSI on-board
    b) 68060 adapter
    c) CHIP-RAM accelerator
10. Why is access to my DMA-SCSI controller so slow?
11. Contact address, phone number, BBS number, FAX number, people.

I. Disclaimer
=============
This document is (C) Copyright 1995, Brian King.

Permission is granted to make and distribute verbatim and modified copies of
this document following the terms of the "GNU General Public License"
provided the copyright notice and this permission notice are preserved on
all copies, and that I receive said copies.

The author gives *absolutely no* warranty that the answers given here are
correct or usable.  Many of them were contributed by other users and I
cannot verify all information.  Please contribute if you see flaws or a lack
of information.

This is *not* an official document of RCS Management, and is not endorsed by
them in any way.  However, they are free to distribute it to any purchasers
of their Fusion-40 products, and they do comment occasionally.

II. Introduction
================
The Fusion-Forty accelerator is a Motorola 68040 based CPU card for Amiga
1500, 2000, and 2500 style machines.  It provides a means for increased raw
CPU power, as well as RAM expansion on the card.  It is manufactured by RCS
Management, and was designed by Suresh Sukhdeo in Montreal, PQ, Canada. 
(See contact information at end).

III. Contributors / Distribution List
=====================================
If you do NOT want your e-mail address and name mentioned in this
document, please let me know.

Suresh Sukhdeo          rcs@connectmmic.net
Mattias Lundblad        MLHardSoft@pobox.com
Niels Knoop             niels@rbg.informatik.th-darmstadt.de
Christopher L. Davis    cld@prin.edu
Victor Ng-Thow-Hing     victorng@dgp.toronto.edu
Ian Lancaster           ilancast@juliet.stfx.ca
Christian Bednarek      eazy@ng-box.wwbnet.de
Kai Kohlmorgen          kai@sel.heide.de
Bert Heise              Bert@fuj.Physik.Uni-Dortmund.de
Stefan Wedin            stefan.wedin@senet.abb.se
Geoffrey Wells          geoff@ginsu.com
Harald Prasser          prasser@fmi.uni-passau.de
Joe Angell              jangell@risd.edu
Bjorn Frostberg         tde94frb@te.hik.se
Jack Whitehead          jack@lexicon.ab.ca
Wavelin Fielder         wfielder@nyx10.cs.du.edu
Gregg Lukomski          falchion@ispace.com
Max Glick               76271.3707@compuserve.com
Erik Petersen           erikp@dannug.dk
Mundt Marc Christian    m-mundt@ux4.cso.uiuc.edu
Blair Wickstrand        Blair_Wickstrand@amuc.mtroyal.ab.ca
Jerry Koniecki          jkoniecki@mhv.net
James Atwill            james@ott.wonder.ca
Joseph Ruettgers        joeruet@infi.net
Bryan Ewert             bryan_ewert@amuc.mtroyal.ab.ca
Darren K. Turner        ar768@freenet.carleton.ca
Teddy Wang              teddy@shell.global1.net
Ian Wellock             Ian.Wellock@isltd.insignia.com
Hans Frimmel            frimmel@cb.uu.se
Ron Funk		rfunk@frontier.island.net
Brian King              Brian_King@mitel.com

1. What machines does it work with?
===================================
Any Amiga with an A2000-style CPU-slot, such as the A1500, A2000, and A2500. 
It will NOT work in an A3000 or A4000 style machine.

Motherboard revision seems to make a difference concerning the Fusion-Forty,
and Zorro-II expansion cards.  Reported successes include:
  - A2000"C" Rev 6.2, ECS Agnus and ECS Denise
  - A2000"C" Rev 6.2  2M Agnus and ECS Denise (Mattias Lundblad)
  - A2000"C" Rev 6.0  ECS Agnus and ECS Denise (Kai Kohlmorgen, Bjorn
                      Frostberg)
  - A2000"B" Rev 4.0  ECS Agnus and ECS Denise (Niels Knoop)
  - A2000    Rev 4.5  ECS Agnus and ECS Denise (Blair Wickstrand)
  - A2000    Rev 4.4  ECS Agnus
  - A2000    Rev 4.3  ECS Agnus and OCS Denise (upgraded to 4.5) (Teddy Wang,
                      Brian King)

2. Specs and RAM types of the card?
===================================
There are two known models of the card:
  - Fusion-Forty 28MHz model, with 25MHz 68040 clocked at (25, 28 or 30MHz)
    Takes 30-pin SIMMs, 80ns or less, 8 SIMM sockets. (recommend 70ns SIMMs)
  - Fusion-Forty 35MHz model, with 33MHz 68040 overclocked to 35MHz.
    Takes 72-pin SIMMs, 70ns or less, 8 SIMM sockets.

Either parity or non-parity SIMMs will work.  Additionally, it can take
either 1 or 4-Meg SIMMs in either of its four-slot banks.  The first four
SIMM sockets make up one bank, while the last four make up another bank. 
Each bank's sockets must be populated with the SAME TYPE of SIMM (ie.
either 1 or 4-Meg), but each bank can have a different size of SIMM.

Thus, possible RAM configurations include:
4 Meg, 8 Meg, 16 Meg, 20 Meg, and 32 Meg.

3. What Zorro-II cards work with it?
====================================
a) Which SCSI controllers?
   - Masoboshi Mastercard - MASOBOSHI.device > 2.03
     (DMA, reported to be FAST)
   - Supra Wordsync
   - Oktagon 2008 - ROM 6.8 - 2 Meg on card
     (rawspeed is 1.6 Meg/sec)
     Reported to work in one machine (rev 6.0), but not in another (rev 4.0)
   - Oktagon 2008 - ROM 6.5
   - Kronos (Niels Knoop)
     (PIO, rawspeed is 1.2 Meg/sec)
   - GVP Impact - GVPSCSI 3.15 (Mattias Lundblad)
     (PIO, 16k buffer)
   - GVP Series II - GVPSCSI 4.13 - No mem on card
     (DMA, rawspeed is 750K/sec, serial problems evident)
   - GVP Series II - GURU ROM - No mem on card (Bjorn Frostberg)
     (DMA, rawspeed is 980K/sec, serial problems reduced)
   - GVP Series II - GVPSCSI 4.05 - 2 Meg on card (Brian King)
     (DMA, rawspeed is 1.1 Meg/sec, no serial problems)
     Works fine with RAM in some machines, but not in others like:
       Blair Wickstrand, Niels Knoop, Dan Babcock
     ** NOTE: apparently version 3.01 and 3.02 of the GVP HC+8 card doesn't
              like 16-bit memory and the F40.
   - A2091 - ROM 7.0 - 2 Meg on card
     (DMA, rawspeed is 900K/sec with PD-tool vb2091)
     ** NOTE: problems with PicassoII in some situations.  If it occurs,
              try re-arranging the cards in the Zorro slots. (Teddy Wang)
   - ICD Advantage 2000 - ROM 3.5r1
     (PIO, rawspeed is about 1.2 Meg/sec)
   - ICD AdSCSI - ROM 3.5r1
     (Teddy Wang)
   - IVS Trumpcard Pro (ROM version?)
   - Trifecta SCSI/IDE - ROM 4.31, trifecta.device 67.1 - No mem on card
     (Blair Wickstrand)
   * Microbotics Hardframe - DOES NOT WORK

b) Which RAM cards?
   - GVP Series II (SCSI+RAM, 2 meg configuration tested)
     (Brian King)
   - Supra RAM 2000 (4 and 6 meg configuration tested)
     (Blair Wickstrand)
   - Oktagon 2008 (2 meg configuration tested)
   - Microbotics 8-UP! RAM card
     (Jerry Koniecki)
   - CBM 2 meg RAM card (Mattias Lundblad)

c) Networking cards?
   - Hydra Ethernet card (hydra.device 1.33)
     (James Atwill)

d) Graphics cards?
   - Commodore A2410 TIGA Graphics Adapter
     Works fine, good speed.  EGS 7.2 and Juergen Schober's EGS-TIGA driver.
     (Brian King)
   - MacroSystems Retina Z2 (both 2 and 4 meg versions)
   - OpalVision in video slot
   - Merlin I, 4 megs, Probench 2.2, works "GREAT" 
     (Kai Kohlmorgen)
   - Picasso II, works fine with some motherboards
     . Success with rev6.0 mother-board
       PicassoII with 2 Meg, V1.4
       village.library 2.58
       villintuisup.library 2.9
       Picasso-Monitor 2.56
     . Failure with rev6.0 mother-board (different person)
       PicassoII with 2 Meg, V1.2 and V1.4
       "strange grafix-errors"
     . Failure with rev6.2 mother-board (Bryan Ewert)
       - Problem here was his actual Fusion-Forty
     . Success with rev6.2 mother-board (Bryan Ewert)
       - Used a different Fusion-Forty with no problems
       PicassoII with 2 Meg, unknown version
       village.library 2.58
       villintuisup.library 2.9
       Picasso Monitor 2.51
       NOTE: DIFFERENCES BETWEEN TWO Fusion-Forty CARDS
         NON-FUNCTIONAL           WORKING     PART#
          wire-jumper            no jumper     U33
          wire-jumper            no jumper     U53
          wire-jumper            no jumper     U20
          wire-jumper            no jumper     U21
       What are all those jumpers for?  Are these the AS* "fix", now causing
       problems with the Picasso II?
     . Failure with A2091 SCSI controller (Teddy Wang)
       - By changing the order of the PicassoII and his AdSCSI cardsin the
         Zorro-II slots, and removing the A2091, he managed to fix his
         problems.
   - Piccolo/Spectrum, may need a PAL upgrade
   - Piccolo-SD64, may need a PAL upgrade, once working is quite nice
     (Niels Knoop)
   - GVP IV-24

Benchmarks using WSpeed (C) 1994 JAMI Soft Development (640x480)
-----------------------------------------------------------------------------
Board         ECS     SD64     Picass2  Picass2  Spectrm  A2410    Merlin 1
Software      OS      CGraphX  CGraphX  Picasso  CGraphX  EGS      ProBench
Version       3.1     2.08                                7.2      2.2
Driver        ---     1.24                                2.06     ---
Colors        8       256      256      256      256      256      256
CPU (MHz)     25      25                28                28       30
-----------------------------------------------------------------------------
Put Pixels    501856  1012220           541182            269235   971022
Draw Lines    2700    15147             14364             21706    15811
Draw Hor/Ver  4473    32915             34128             36323    134458
Draw Circles  2928    37607             34743             1300     38721
Draw Ellipse  2653    21623             3046              1171     7183
Draw Boxes    323     9561              2148              1463     5493
Scroll X      93      1206              442               93       1115
Scroll Y      78      1242              446               93       1293
Print Text    6371    14962             10027             6072     9621
CON: Output   281     901               436               146      497
Open Windows  131     214               171               88       278
Size Window   264     368               212               216      546
Move Windows  47      70                79                27       68
Swap Screens  505     24                24                9        25
Areafill      247     195               427               190      401
-----------------------------------------------------------------------------
  NOTE: Please make sure that when using WSpeed, you actually SELECT the
  screen-mode you want to use, and THEN hit OK.  Don't just accept the one
  it shows and hit OK, because a bug then occurs causing only a 640x256
  section to be used.
  NOTE: * indicates that either the driver or subsystem doesn't support
  this operation properly.

e) Bridge-cards?
   - A2088, 640K, 8MHz, works fine
   - A2386SX, 3 and 5 meg, 20MHz works (Mattias Lundblad)
   - GoldenGate 386SX works (Niels Knoop)
   - GoldenGate with 486SLC works fine (Mattias Lundblad)
f) Others?
   - GVP I/O Extender card (Blair Wickstrand, Niels Knoop)
   - MultiFace II  multi-I/O adapter (Bjorn Frostberg)
   - MultiFace III multi-I/O adapter (Jerry Koniecki)
   - ASDG Dual Serial (Mattias Lundblad)
   - DKB 2Meg CHIP RAM (Jerry Koniecki)
   * Tocatta card does NOT work (Jerry Koniecki)
   - DCTV and software on 23-pin RGB port (Victor Ng-Thow-Hing)
   - Easyl graphics tablet with ZorroII controller (Victor Ng-Thow-Hing)
   - ProSound 3.0 Sound Digitizer in parallel port (Victor Ng-Thow-Hing)

4. What version of the OS does it work with?
============================================
a) KS 1.3 support
   - While 1.3 is still supported, and can then be used as the launchpad
     for FASTKICKing a newer version of the OS via a Kickstart-file, it
     is not a recommended environment for use of a 68040 based accelerator.
   - As Niels Knoop so accurately stated: "This isn't 1986 anymore!"
b) KS 2.x support
   - Yes
c) KS 3.x upgrade (Plug'N'Go ROMs)
   - Yes, with upgrade to Version 3.4 of Plug'N'Go ROMs

5. Emulation Support?
=====================
a) ShapeShifter (SS)
   a.1 - Mac ROM type
     Below is a table of Macintosh ROM versions which work with 3.1a:
       Macintosh Model     Version.Subversion     Size     All Caches?
       ---------------------------------------------------------------
       Mac LC-III              124.34            1 Meg     YES
       ???                     124.17            512K      NO DATACACHE

   a.2 - MacOS version
     System 7.0.1 (freely available from ftp.apple.com) with SystemTuner
     1.1.1 works fine.

     System 7.1 ????
     
     System 7.5.x ????

     Problems with the Sound-Control-Panel on many setups, fixed by getting
     the latest Sound-Manager package from ftp.support.apple.com somewhere.
     
     However, with System 7.0.1 and ShapeShifter 3.1a, the latest Sound-
     Manager package (3.1) did NOT work at all.

   a.3 - ShapeShifter settings (Solved!)
  **************************************************************************
    These problems can be solved by using the "real" 68040.library and the
    AMAXIV patch for SetFF, as outlined in section 8f, part 4.  You can all
    thank me by sending $5 to....  :^)

    Also, you won't need PrepareEmul at all with the instructions presented
    in section 8f, part 4.
  **************************************************************************
     It seems that none of the MMU settings for ShapeShifter will work with
     the Fusion-Forty 32-bit memory.  Thus, if you put the Mac ROM image
     there, you cannot turn on the "Write Protect ROM" option. 
     Additionally, if you want your Mac video memory to be in 32-bit mem,
     you cannot use the "MMU Refresh" option at all, which sorta defeats
     the purpose.  Finally, CopyBack cache cannot be used with the standard
     F40 setup and ShapeShifter.

     According to Christian Bauer, author of ShapeShifter:
      "I suspect that the F40 uses the Transparent Translation registers to
       enable Copyback and not the MMU table like the 68040.library does.
       This would break all of ShapeShifter's MMU related functions (and
       some of MacOS's cache handling)."

b) EMPLANT (Mac/E586)
   - Works with 3.1 ROM upgrade, 3.4 Plug'n'Go ROMs for Fusion-Forty, and
     FASTKICK option disabled.  (What about FASTKICK EMPLANT option?)
   - You can use the EMPLANT and the Fusion-Forty together, INCLUDING
     support for FASTKICK.
     - First line of startup-sequence is the standard EMPLANT specific
       line
     - Next line is: SetFF >NIL: EMPLANT CACHE CBK FPU
     (Max Glick)

c) AMAX
   - AMAX II (floppy cartridge) works fine if started without FASTKICK and
     memory is added. (Mattias Lundblad)
   - AMAX IV (Zorro-II board) works fine, even with FASTKICKed 3.1, using
     the AMAXIV switch for SetFF. (Mattias Lundblad)

d) PC-TASK 3.1
   - reported as working

6. Virtual Memory Support?
==========================
VMM versions 2.0, 3.0, and 3.1 are all reported as working.  The key is
to make sure you run MoveMH (version 1.2) early in your startup.
(Christian Bednarek, Blair Wickstrand, Kai Kohlmorgen).  
I haven't been able to get it to work, however.

Kai Kohlmorgen's information looks like:
Memory: fixed size Type: any File "hd1:pagefile Size: 8MB 
                Min 200KB WriteB: 100KB 
                VM Pri: 40 
Miscellaneous: Enabled: Cache ZII RAM Show VM in WB Title Memory Tracking 
                           other options: disabled 
Task: Default: N N 
 
7. What is the latest software and ROM release?
===============================================
Plug'N'Go ROMs                    3.4
SetFF                             1.79
MoveMH                            1.3
2091ROMMover                      1.4
CheckBoard                        2.2

8. Problems and solutions
=========================
a) CopyBack problems (with 2.x of the OS or greater)
   - This may be a problem with the Gate Array Logic (GAL) chip at location
     U37 on your Fusion-Forty card.  If it is a GAL, not a Programmable
     Array Logic (PAL) chip, it should be replaced with a TIBPAL 22V10 or
     22VP10 (20-25ns)
     (Suresh Sukhdeo)
   Testing:
   - if your machine runs reliably without the CopyBack cache of the 68040
     CPU enabled, but crashes often when it is enabled, it MAY be this part.
     However, some older software (pre 2.x OS stuff) doesn't like the
     CopyBack cache of the 68040.  Try booting with a clean system, and see
     how that goes.
b) Enforcer hits with ramlib.
   - Try using MoveMH 1.2, *NOT* MoveMH 1.1 which had a bug.
c) GVP Series II SCSI+RAM (HC+8) system with 16-bit fast mem won't work
   - NOTE: I've had no problem in my system with BOTH J11 and the SCSI speed
     at 14MHz...
   - NOTE: turns out that version 3.01 and 3.02 of the GVP HC+8 card is
           unreliable when used with the Fusion-Forty and 16-bit memory.
d) My Fusion Forty doesn't boot / is very slow with an OS 3.1 ROM
   - This is caused by older versions of the Plug&Go-ROMs on the F40.
     Upgrading to the new Version 3.4 should fix this, but you can
     get older versions to work as well. If the F40 doesn't boot at
     all, hold the right mouse button during reset to bring up the
     F40 control menu and select NOFASTKICK from there. It will
     boot then, but won't do its job. To regain Fusion Forty speed
     adding the Fast-RAM, patching and installing the Kickstart
     image in it and enabling the FPU has to be done by the program
     SetFF which should be on the F40 software disk or can be ob-
     tained from RCS.
     (Niels Knoop)
e) My Fusion Forty crashes after I installed a new OS.
   - The Fusion Forty Plug&Go-ROMs are not compatible with the
     original 68040.library from Commodore. Be sure to re-install
     the small special 68040.library which came with your F40.
     (Niels Knoop)
f) Problems with 68040.library?
   - Some people attribute various system problems to the use of a custom
     68040.library.  Certain 040-specific applications don't seem to like
     it, while working fine with other cards which can use it.
   - Many problems may not be related to the 68040.library, but instead to
     the Fusion-40 using an 8K page-size for MMU operations, instead of the
     typical 4K page-size.
   - You CAN use the normal 68040.library, by disabling FASTKICKing, and
     not using any of the SetFF/MoveMH tools.  This allows you to use the
     Commodore 68040.library (37.3), and test for compatability problems.
     However, without the FASTKICK support, your speed will drastically
     decrease.
   - you CAN use the normal 68040.library and ALLOW the use of FASTKICKing
     by doing the following:
     1. If you have Plug'N'Go ROMs with the Auto Fastkick option, turn it
        OFF
     2. Have the first two lines of your startup-sequence look like:
          SetFF FASTKICK AMAXIV
          SetPatch
     3. *OR* if you want a different ROM version loaded, use:
          SetFF FASTKICK devs:kickstart_rom AMAXIV
          SetPatch
     This not only allows use of the "real" 68040.library, it ALSO allows
     ShapeShifter to work flawlessly with the Fusion-Forty, along with the
     CopyBack caches enabled.

     Make sure with this setup you don't use any of the MoveMH or SetFF
     tools after you've started up.
g) Problems with the Picasso-II graphics card
   - See sections 3a and 3d.  It could be anything from software versions,
     F40 versions, and Zorro-card configurations.

9. Future growth?
=================
a) SCSI on-board
   - Coming since 1992...  Somewhat pessimistic about this.
b) 68060 adapter
   - Unknown.  RCS may skip that particular upgrade path and go straight
     to an 060-specific accelerator, perhaps even with PCI graphics on
     the card (with my suggestions).
c) CHIP-RAM accelerator
   - Was on the backburner due to static-RAM costs.  May yet come to light.

10. Why is access to my DMA-SCSI controller so slow?
====================================================
DMA controllers can only transfer to memory within the 24-bit memory space
(MEMF_24BITDMA), also known as AutoConfig memory space.  Your Amiga can only
have 8 Megs maximum of AutoConfig memory space.

Since NONE of the Fusion-Forty's memory is within that space, your DMA SCSI
controller doesn't know how to directly access it with a DMA transfer. 
Instead, it will usually either choke (some controllers with wrong ROM), or
it will allocate a small buffer somewhere where it CAN do a DMA transfer. 
It then DMAs to the small buffer (either in 16-bit FAST memory, or in CHIP
memory), and afterwards, copies the information byte-by-byte into the 32-bit
RAM target area on the Fusion-Forty.

If you have NO 16-bit FAST mem in your system, and have a DMA controller,
GET SOME!  Otherwise, with the small DMA buffer in CHIP memory, your system
will crawl (since access to CHIP mem is shared with the custom-chips).  With
my GVP SCSI controller, I go from 780K/sec to around 1.1 Meg/sec just by
adding two megs of 16-bit fast memory.  Additionally, some of that memory
comes in handy for drive caching, ShapeShifter (the Mac ROM can go there),
or other purposes.  Sure its slow, but its providing a dual purpose.

Additionally, with non-GVP controllers, the PD DMAFix software may help.  It
is not necessary with gvpscsi.device, since it already sets up a buffer in
DMA memory and uses it.  However, with some other cards you could add some
16-bit memory and the DMAFix software (like the A2091?) and get better
performance.  (Mark Odell)

11. Contact address, phone number, BBS number, FAX number, people.
==================================================================
RCS Management
Suite 123, 5764 Monkland Ave
Montreal, PQ, Canada
H4A 1E9

Voice: 514-990-5551
  Fax: 514-483-1869
  BBS:

E-Mail: RCS@connectmmic.net (Suresh Sukhdeo)
E-Mail: MLHardSoft@pobox.com (Mattias Lundblad, author of
                              the SetFF & MoveMH software)

Suresh Sukhdeo is the common contact for Fusion-40 problems, since he
designed the accelerator.  He is very informative and friendly. 
Additionally, Mattias' e-mail address has stabilized, and he can now be
reached consistently.
+-------------------------------------+-----------------------------------+
| Brian D. King  -  Computer Engineer | Fourth Dimension Software, author |
| PBX/ISDN Software Development Group | of LhA-GUI, and the Fusion-40 FAQ |
| Mitel Corporation, Kanata, Ontario  | ***** Brian_King@Mitel.com *****  |
+-------------------------------------+-----------------------------------+
