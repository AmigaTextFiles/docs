        <html>
        <head><base target="_self">
<title>русский транзит - amiga#1: arexx, информационные функции</title>
</head>
<body link="#009999" vlink="#006666" alink="#000088" bgcolor="#ffffff" text="#000000">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta name="keywords" content="amiga,develope,ARexx,информационная,функция,date,show,showdir,showlist,time">

<font face="Arial, Helvetica, sans-serif" size="4">
<p align="left"><a name=A156>Информационные функции</a></p></font>

<blockquote><font face="Arial, Helvetica, sans-serif" size="4"><pre>
<a name=A1561>
<b>DATE</b>()
<blockquote>res = <b>DATE</b>([&lt;опция&gt;][,&lt;дата&gt;][,&lt;формат&gt;])
</blockquote></a></pre></font></blockquote>

<blockquote><p align="justify">
Без параметров функция DATE() выводит текущую дату в &quot;обычном&quot; формате, соответствующем опции N. Можно ввести любую другую из нижеперечисленных опций для вывода текущей даты в другом формате. Языковые установки операционной системы здесь не используются, поэтому дата выводится по-английски.
</p></blockquote>

<blockquote><p align="justify">
Параметр &quot;опция&quot; определяет формат получаемой строки. &quot;Опция&quot; может принимать следующие значения:
</p></blockquote>

<blockquote><pre>
<u> Расшифровка    Перевод     Образец       Пример   Примечание                 </u>
<b>В</b>  Basedate  Базовая дата                 728850   <i>Число дней с 1 янв. 0001г.</i>
<b>С</b>  Century   Век                           34890   <i>Число дней с начала века</i>
<b>D</b>  Days      Дни                             187   <i>Число дней с начала года</i>
<b>Е</b>  European  Европейский    дд/мм/гг    11/07/95 
<b>I</b>  Internal  Внутренний                     6400   <i>Системная дата</i>
<b>J</b>  Julian    Юлианский      ггддд          95192 
<b>M</b>  Month     Месяц                          July 
<b>N</b>  Normal    Обычный        ДД Ммм ГГ  11 Jul 95  
<b>О</b>  Ordered   Упорядоченный  гг/мм/дд    95/07/11 
<b>S</b>  Sorted    Сортированный  ггггммдд    19950711 
<b>U</b>  USA       Американский   мм/дд/гг    07/11/95 
<b>W</b>  Weekday   День недели                Thursday
</pre></blockquote>

<blockquote><p align="justify">
Если нам необходимо преобразовать некоторую дату из сортированного (S) или внутреннего (I) формата в какой-либо другой, то вторым после &quot;опции&quot; параметром будет дата в соответствующем (внутреннем или сортированном) формате, а третьим параметром - тип формата этой даты (S или I). Примеры:
</p></blockquote>

<blockquote><blockquote><pre>
say DATE()                     ==>  11 Jul 95
say DATE('U')                  ==>  07/11/95
say DATE('E', 6400, 'I')       ==>  11/07/95
say DATE('O', 19950711, 'S')   ==>  95/07/11
</pre></blockquote></blockquote>

<blockquote><p align="justify">
При использовании функций DATE() или <a href="AMIGA-15-6.html#A1565">ТIМЕ()</a> автоматически запоминаются и дата и время, причем это происходит однажды для одного и того же утверждения. Покажем на примерах. Если использовать, например, функцию ТIМЕ() в разных утверждениях, значение возвращаемого ею времени будет разным:
</p></blockquote>

<blockquote><blockquote><pre>
say TIME()        ==> 20:22:19
call DELAY(100)                 /* Задержка */
say TIME()        ==> 20:22:21
</pre></blockquote></blockquote>

<blockquote><p align="justify">
Теперь дважды вызовем <a href="AMIGA-15-6.html#A1565">ТIМЕ()</a> из одного и того же утверждения:
</p></blockquote>

<blockquote><blockquote><pre>
say TIME()  DELAY(100)  TIME()   ==> 20:22:40  0  20:22:40
</pre></blockquote></blockquote>

<blockquote><p align="justify">
Здесь время было зафиксировано один раз в момент первого вызова <a href="AMIGA-15-6.html#A1565">ТIМЕ()</a>; второй вызов ТIМЕ() из того же утверждения просто считал строку, оставшуюся в результате первого вызова. DATE() работает в этом плане аналогично ТIМЕ(). Таким образом гарантируется, что вызовы функций считывания системного времени внутри одного и того же утверждения вернут одно и то же значение.
</p></blockquote>

<blockquote><font face="Arial, Helvetica, sans-serif" size="4"><pre>
<a name=A1562>
<b>SHOW</b>()
<blockquote>res = <b>SHOW</b>(&lt;опция&gt;[,имя][,&lt;разделитель&gt;])
</blockquote></a></pre></font></blockquote>

<blockquote><p align="justify">
Функция позволяет вывести список различных ресурсов вашего компьютера. Возвращаемое значение является или булевским, или строкой. &quot;Опция&quot; - имя ресурса (вместо полного имени ресурса можно указывать первую букву имени):
</p></blockquote>

<blockquote><blockquote><p align="justify">
<b>C</b>lips     - имена клипов, созданные с помощью <a href="AMIGA-15-9.html#A159D">SETCLIP()</a> или RXSET;<br><br>
<b>F</b>ile      - логические имена файлов, открытых по <a href="AMIGA-15-7.html#A1571">ОРЕN()</a>, а также имена стандартных потоков ввода/вывода;<br><br>
<b>L</b>ibraries - список библиотек ARexx-a, который, возможно, пополнялся с помощью <a href="AMIGA-15-9.html#A1592">ADDLIB()</a>. Следует отличать действие SHOW(Libraries) от действия функции библиотеки rexxsuppoft.library SHOWLIST(), которая может выводить список вообще всех открытых системных библиотек, а не только библиотек ARexx-a.<br><br>
<b>P</b>orts     - имена всех именованных портов сообщений в системе.
</p></blockquote></blockquote>

<blockquote><p align="justify">
Дополнительный параметр &quot;разделитель&quot; может быть применен в тех случаях, когда имена каких-либо ресурсов содержат пробелы. Перед 
&quot;разделителем&quot; согласно спецификации функции SHOW() всегда должно быть не менее 2-х запятых (если параметр &quot;имя&quot; отсутствует). Если параметр &quot;имя&quot; присутствует, то вместо списка ресурсов функция SHOW() возвращает булевское значение ИСТИНА или ЛОЖЬ, в зависимости от того, обнаружен ли в системе требуемый ресурс. Например:
</p></blockquote>

<blockquote><blockquote><pre>
say SHOW(p)           ==>  REXX AREXX Rusifier.port
say SHOW(p,, '0a'х)   ==>  REXX
                           AREXX
                           Rusifier.port
</pre></blockquote></blockquote>

<blockquote><p align="justify">
Следует учесть, что связные порты системы, чьи имена выводятся по SHOW(p), могут не являться ARexx-портами, и определять их в качестве &quot;хозяев&quot; по меньшей мере бессмыссленно.
</p></blockquote>

<blockquote><font face="Arial, Helvetica, sans-serif" size="4"><pre>
<a name=A1563>
<b>SHOWDIR</b>()
<blockquote>res = <b>SHOWDIR</b>(&lt;каталог&gt;[,'ALL'|'FILE'|'DIR'][,&lt;разделитель&gt;])
</blockquote></a></pre></font></blockquote>

<blockquote><p align="justify">
Результатом работы функции является список файлов (подкаталогов) заданного каталога. Разделителем может быть любой символ (включая &quot;пустой&quot;, т.е. нулевой символ). В качестве разделителя удобно определять какой-либо из символов, по определению не используемых в именах файлов (например, символ перевода строки - '0а'х). Пример использования:
</p></blockquote>

<blockquote><blockquote><pre>
say SHOWDIR('SYS:RexxC')
    ==>  HI RX RXC RXLIB RXSET ТСС ТСО ТЕ TS WaitForPort
</pre></blockquote></blockquote>

<blockquote><p align="justify">
Обратите внимание: библиотека rexxarplib.library имеет функцию FILELIST(), которая работает аналогично SHOWDIR(), но к тому же поддерживает шаблоны имен.
</p></blockquote>

<blockquote><font face="Arial, Helvetica, sans-serif" size="4"><pre>
<a name=A1564>
<b>SHOWLIST</b>()
<blockquote>res = <b>SHOWLIST</b>(&lt;опция&gt;[,&lt;имя&gt;][,&lt;разделитель&gt;][,'A'|'ADDRESS'])
</blockquote></a></pre></font></blockquote>

<blockquote><p align="justify">
Если параметр &quot;имя&quot; отсутствует, то возвращается список системных ресурсов, соответствующих указанной &quot;опции&quot; и разделенных необязательным символом &quot;разделителем&quot;.
</p></blockquote>

<blockquote><p align="justify">
В случае, если &quot;имя&quot; определено, то проверяется наличие в системе ресурса с указанным именем и возвращается булевское значение, отображающее результат этой проверки.
</p></blockquote>

<blockquote><p align="justify">
&quot;Разделителем&quot; может быть любой символ, например '0а'х (новая строка).
</p></blockquote>

<blockquote><p align="justify">
Необязательный четвертый аргумент 'А' (или 'Address') заставляет функцию вернуть адрес узла (node) поименованного параметром &quot;имя&quot; ресурса (понятно, что в этом случае &quot;имя&quot; должно быть определено). Адрес является действительным как для exec-списков, так и для DOS-списков. Рассмотрение структуры этих списков выходит за рамки данной книги.
</p></blockquote>

<blockquote><p align="justify">
Параметр &quot;опция&quot; определяет тип конкретных ресурсов, информацию о которых необходимо получить. &quot;Опцию&quot; можно вводить двояко - либо полное имя, либо только первую букву. Ниже дан полный список возможных опций:
</p></blockquote>

<blockquote><blockquote>
<pre>Опция              Результат</pre>
<p align="justify">
<b>A</b>ssign   - Имена всех логических устройств;<br><br>
<b>D</b>evices  - Имена устройств (низкого уровня - соответствует уровню exec);<br><br>
<b>H</b>andlers - Имена всех хэндлеров (т.е. интерфейсов между ОС и конкретными устройствами).<br> Уровень ОС-хэндлеров выше уровня exec-устройств;<br><br>
<b>I</b>nterrupts - Список имен узлов прерываний в соответствующем exec-списке;<br><br>
<b>L</b>ibraries - все системные библиотеки (не только библиотеки ARexx-a);<br><br>
<b>M</b>emory-types - типы доступной памяти;<br><br>
<b>P</b>orts - то же, что <a href="AMIGA-15-6.html#A1562">SHOW('P')</a> - дает информацию о поименованных портах сообщений;<br><br>
<b>R</b>esources - имена интерфейсов самого низкого уровня, соответствующих некоторым аппаратным узлам Амиг (например, порту аналогового джойстика). Возможности управления этими узлами непосредственно из ARexx-a нет, хотя требуемые имена могут быть получены безо всяких проблем;<br><br>
<b>S</b>emaphores - возвращается список семафоров (средств разделения доступа к некоторым объектам, одновременно используемым из различных процессов/задач);<br><br>
<b>T</b>ask-ready - список всех системных задач, находящихся в состоянии готовности;<br><br>
<b>V</b>olumes - имена томов во всех подключенных (псевдо)дисковых устройствах;<br><br>
<b>W</b>aiting - список всех системных задач, находящихся в состоянии ожидания.
</p></blockquote></blockquote>

<blockquote><p align="justify">
Примеры:
</p></blockquote>

<blockquote><blockquote><pre>
say SHOWLIST(L);                    ==> utility.library graphics.library
say SHOWLIST(L, 'dos. library');    ==> 1
say SHOWLIST(M);                    ==> expansion memory chip memory 
say SHOWLIST(M,, '+');              ==> expansion memory+chip memory 
say SHOWLIST(D);                    ==> timer.device keyboard.device ...
say SHOWLIST(V,, '|');              ==> RAM DISK | HD0 | HD1 | HD2
say SHOWLIST(R);                    ==> ciaa.resource ciab.resource ...
say SHOWLIST(A, 'FONTS');           ==> 1
</pre></blockquote></blockquote>

<blockquote><font face="Arial, Helvetica, sans-serif" size="4"><pre>
<a name=A1565>
<b>TIME</b>()
<blockquote>res = <b>TIME</b>(&lt;опция&gt;])
</blockquote></a></pre></font></blockquote>

<blockquote><p align="justify">
Функция возвращает форматированную строку или число, отображающее текущее системное вркмя. Если &quot;опция&quot; отсутствует, возвращается текущее время в 24-часовом формате (чч:мм:сс). Значениями &quot;опции&quot; могут быть символы C, E, H, M, N, R, S. Смысл &quot;опций&quot; таков:
</p></blockquote>

<blockquote><blockquote><p align="justify">
<b>n</b> (<i>Normal</i>) - стандартный 24-часовой формат;<br><br>
<b>c</b> (<i>Civil</i>) -  12-часовой формат;<br><br>
<b>h</b> (<i>Hours</i>) - сколько часов прошло после полуночи;<br><br>
<b>m</b> (<i>Minutes</i>) - сколько минут прошло после полуночи;<br><br>
<b>s</b> (<i>Seconds</i>) - сколько секунд прошло после полуночи;<br><br>
<b>r</b> (<i>Reset</i>) - сброс счетчика временных интервалов;<br><br>
<b>e</b> (<i>Elapsed</i>) - интервал времени, прошедший либо после вызова TIME(r), либо после
 1-го вызова TIME(e). Формат результата ss.tt (s соответствует целым секундам, а t - пятидесятым долям 
 секунды. Результатом самого первого вызова TIME(e) (без предшествовавшего TIME(r)) всегда будет 0.00)
</p></blockquote></blockquote>

<blockquote>Примеры:</blockquote>

<blockquote><blockquote><pre>
say TIME(n)                                 ==> 8:06:25
say TIME(с)                                 ==> 8:06AM
say TIME(h)                                 ==> 8
say TIME(m)                                 ==> 485
say TIME(s)                                 ==> 29206
call TIME(r); call DELAY(100); say TIME(e)  ==> 2.04
</pre></blockquote></blockquote>

<hr>

</body></html>