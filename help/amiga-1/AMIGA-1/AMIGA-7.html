        <html>
        <head><base target="_self">
<title>русский транзит - amiga#1: устройства</title>
</head>
<body link="#009999" vlink="#006666" alink="#000088" bgcolor="#ffffff" text="#000000">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta name="keywords" content="amiga, амига, world, pc, commodore, amiga#1, unix, linux,
amigaos, amigados, физические, логические, тома, device, volume, logical, dirs, drive,
устройство, autoconfig, дисковод, дисплей, монитор, принтер, партиция, винчестер,
partition, assign, binddrivers, mount, монтирование, ram-диск, имя, метка, rad, ds, dd, hd,
диск, дискета, рестарт, горячий, холодный, restart, cold, warm, conclip, clip-устройство,
клип-устройство, клип, клипборд, клипбоард, clip, clipboard, clipbord, буфер, обмена,
буферизация, iff, interchange, file, format, iffparse.library, clipboard.device, rad:,
df0:, df1:, df2:, df3:, sd0:, rad:, ram:, t:, clips:, Startup-Sequence, ds/dd">

<font face="Verdana, Arial size=2">
<p align="left">Глава 7</p></font>
<font face="Arial, Helvetica, sans-serif" size="4">
<p align="left"><b>Устройства</b></p></font>

<blockquote><p align="justify">
Основная задача ОС &mdash; обеспечение работы с различными устройствами ввода, хранения и отображения информации, входящими в состав вашей системы. 
Некоторые из этих устройств являются физическими объектами (например, дисководы, дисплей, принтер), другие организованы программно (например, RAM-диск). 
Разумеется, для того, чтобы ОС могла использовать какое-либо из устройств, оно должно быть прежде всего распознано (или, как говорят компьютерщики, смонтировано). 
Одни устройства стандартны для ОС и распознаются автоматически. Другие устройства монтируются встроенным в ОС протоколом автоматического распознавания подключенных 
физических устройств (AutoConfig). И, наконец, некоторые устройства надо монтировать явно, сообщив ОС об их наличии и характеристиках с помощью Shell-команды <a href="AMIGA-10.html#A101M">MOUNT</a> 
или <a href="AMIGA-10.html#A1007">BINDDRIVERS</a>. Подробнее о процессе монтирования см. в описании команды <a href="AMIGA-10.html#A101M">MOUNT</a>.
</p><p align="justify">
Отличительным признаком имени устройства (как и корневой директории) является двоеточие в конце имени.
</p><p align="justify">
Существует три основных типа устройств: физические (devices), тома (volumes) и логические (dirs). Вы можете просмотреть список всех устройств в вашей системе, исполнив Shell-команду <a href="AMIGA-10.html#A1005">ASSIGN</a> без параметров.
</p><p align="justify">
<em>Физическими устройствами</em> (devices) считаются, например, дисководы (DF0:, DF1:, и т.д.), партиции жесткого диска (DH0:, DH1:), принтер (PRT.), параллельный порт (PAR:), последовательный порт (SER:).
</p><p align="justify">
<em>Тома</em> (volumes) &mdash; имеющие имя (метку) конкретные диски, находящиеся в дисководах, например &quot;Workbench:&quot; или &quot;Storage:&quot;. 
Имена присваиваются дискам при форматировании или с помощью команды <a href="AMIGA-10.html#A101T">RELABEL</a>.
</p><p align="justify">
И, наконец, к <em>логическим устройствам</em> (dirs, logical devices) относят псевдонимы маршрутов, назначенные либо системой при начальном запуске, либо с помощью команды <a href="AMIGA-10.html#A1005">ASSIGN</a>.
</p><p align="justify">
Каждая Амига всегда имеет по крайней мере один 3.5&quot; дисковод (устройство DF0:). 
Обычно он двойной плотности (работает с дискетами DS/DD) и имеет полезный объем 880 Кб. 
В модели А4000 устанавливается дисковод высокой плотности, емкость которого ровно в 2 раза выше за счет более плотной записи на дорожках 
(1.76 Мб; дискеты HD). который может работать и с дискетами DS/DD (тип дискеты распознается автоматически &mdash; у дискет высокой плотности два отверстия по углам, 
а у дискет двойной плотности &mdash; только одно). Число дорожек на всех типах дисководов равно 80; число секторов на дорожке &mdash; 11 для дисков двойной плотности и 
22 &mdash; для дисков высокой плотности. Скорость обмена данными с дисководами составляет порядка 24 Кб/сек. 
Амига всегда читает/пишет на дискету целыми дорожками, даже если нужен всего один сектор, что в реальной работе дает значительный выигрыш в скорости.
</p><p align="justify">
Кроме DF0: к Амиге можно подключить еще до 3-х дисководов &mdash; DF1:, DF2:, и DF3: через внешний разъем 
(в А4000 дисковод &quot;DF1:&quot; дополнительно устанавливается внутрь корпуса, а дисководы DF2: и DF3: &mdash; внешние).
</p><p align="justify">
Важным устройством является RAM-диск &mdash; динамически выделяемая область оперативной памяти, предназначенная для временного хранения файлов. 
&quot;Динамически выделяемая&quot; означает то, что размер RAM-диска всегда находится в соответствии с общей длиной хранящихся в нем файлов. 
RAM-диск является органичной частью системы настолько, что три стандартных системных каталога (&quot;ENV:&quot;, &quot;Т:&quot; и &quot;CLIPS:&quot;) 
обычно создаются именно в нём. RAM-диск с точки зрения логики можно считать обычным диском переменного объёма с чрезвычайно быстрым доступом. 
Вот только форматировать RAM-диск бессмысленно, система выдаст сообщение об ошибке &quot;несоответствие типа объекта&quot;.
</p><p align="justify">
Поскольку RAM-диск всегда имеет тот размер, который требуется для размещения всех находящихся в нём файлов, бессмысленно говорить о какой-либо степени его 
заполненности &mdash; поэтому, например, команда <a href="AMIGA-10.html#A101B">INFO</a> всегда сообщает, что RAM-диск заполнен на все 100%. 
Можно, конечно, отталкиваться от общего объема свободной памяти: в левой части Workbench-окон ОС 1.2 и 1.3 находится вертикальный &quot;градусник&quot;, 
показывающий степень заполнения дисков, где степень заполнения RAM-диска определяется именно исходя из общего объема доступной оперативной памяти.
(Workbench-окна ОС 2.04, 3.0, 3.1 не имеют &quot;градусника&quot;, но в ОС 3.5, 3.9, он появляется опять &mdash; прим. aGGreSSor).
</p><p align="justify">
Недостатком RAM-диска является тот факт, что при рестарте системы, возможно вызванном каким-либо сбоем, а также при отключении питания все его файлы теряются. 
В качестве частичной компенсации ОС предлагает устройство &quot;RAD:&quot;, которое хоть и не выдерживает отключения питания, поскольку как и RAM-диск хранит свои 
файлы в оперативной памяти системы, тем не менее позволяет сохранить их в 99% случаев системных сбоев, повлекших за собой горячий рестарт. 
Устройство &quot;RAD:&quot; в отличие от RAM-диска не является неотъемлемой частью системы и поэтому перед использованием должно быть смонтировано. 
&quot;RAD:&quot; всегда имеет фиксированный объём, который жестко задается в файле описаний устройств (т.н. mountlist). Как правило, этот объём в точности равен 
размеру одной дискеты двойной плотности (880 Кб), хотя ничто не мешает как угодно его изменить, модифицировав значение &quot;HighCyl&quot; в описании устройства &quot;RAD:&quot; 
(см. описание команды <a href="AMIGA-10.html#A101M">MOUNT</a>).
</p><p align="justify">
Под управлением ОС 2 или 3, &quot;RAD:&quot; может состоять из нескольких модулей равного или неравного объёма, каждый из которых считается как бы отдельным диском. 
Для каждого модуля должно быть отдельное описание в mountlist-файле со значением поля &quot;Unit&quot;, соответствующим номеру модуля. Нумерация модулей начинается с нуля.
</p><p align="justify">
Ещё одним свойством &quot;RAD:&quot; является то, что с него может осуществляться старт системы (в случае, если его стартовый приоритет выше приоритета любых других устройств, 
с которых Амига также может стартовать).
</p><p align="justify">
Итальянский программист Никола Салмориа написал драйвер устройства &quot;statram.device&quot;, которое во всём похоже на &quot;RAD:&quot;, однако поддерживает любые 
типы файловых систем (вплоть до MS-DOS) и расходует память динамически (как и RAM-диск).
</p><p align="justify">
Дистрибутивный пакет &quot;statram.device&quot; версии 3.1 является свободно распространяемым и бесплатным; 
вы можете установить его на свою систему с диска, прилагаемого к этой книге. Поскольку требованием автора является сохранение дистрибутива в первозданном виде, 
мы не можем добавлять и/или изменять какие-либо файлы дистрибутива и переводить их на русский язык.
</p></blockquote>

<font face="Arial, Helvetica, sans-serif" size="4">
<p align="left"><a name=A71>Клип (буферы обмена)</a></p></font>
<blockquote><p align="justify">
В AmigaOS (только для ОС 2 и 3) есть ещё одно очень полезное устройство &mdash; т.н. клип (clipboard). 
По сути дела это, как и RAM-диск &mdash; некая динамически резервируемая системой область памяти, куда любые программы могут класть данные, 
а затем забирать их оттуда.
</p><p align="justify">
Вся прелесть клип-устройства состоит в том, что оно является удобным средством для межпрограммного обмена данными &mdash; ведь совершенно необязательно, 
чтобы и запись и чтение данных в/из клип-устройства производила одна и та же программа. Вы можете резонно заметить, что для этих целей сгодился бы и RAM-диск. 
Так-то оно так, да есть нюанс: RAM-диск имеет дело с файлами, а достучаться до файла можно только в том случае, если известно его имя. 
Не присваивать же имя каждому помеченному блоку текста, прежде чем помещать этот блок в буфер! Гораздо проще знать, что этот блок просто находится в клипе и всё.
</p><p align="justify">
Клип-устройство подразделяется на модули общим числом до 256-ти. Данные в разных модулях абсолютно независимы друг от друга. 
Между прочим, клип-модули представляют собой файлы логического устройства &quot;CLIPS:&quot; которое, как правило, соответствует маршруту &quot;RAM:Clipboards&quot; 
(назначение производится в файле &quot;S:Startup-Sequence&quot;); имена файлов соответствуют номерам модулей клип-устройства. 
Файлы имеют универсальный формат IFF (Interchange File Format), для работы с ними ОС использует библиотеку &quot;iffparse.library&quot;.
</p><p align="justify">
Кроме множества прикладных программ, с клип-устройством могут общаться также и Shell-окна; если у вас ОС 2 или 3, произведите простой эксперимент &mdash; набейте какой-нибудь текст в Shell-окне, 
затем поставьте курсор на начало текста, нажмите левую кнопку мышки, проведите указателем по тексту и отпустите кнопку. Вы увидите, что текст, по которому прошел указатель, помечен контрастным цветом. 
Теперь скопируйте текст в нулевой модуль клип-устройства, нажав комбинацию клавиш &quot;Правая&nbsp;Amiga&nbsp;+&nbsp;С&quot;. Цветная маркировка исчезнет &mdash; сигнал, что помеченный текст был 
благополучно скопирован в клип. Вы можете тут же нажать комбинацию клавиш &quot;Правая&nbsp;Amiga&nbsp;+&nbsp;V&quot; и текст из клип-устройства будет немедленно вставлен по текущей позиции курсора. 
Можно закрыть Shell-окно, затем опять открыть и снова нажать &quot;Правая&nbsp;Amiga&nbsp;+&nbsp;V&quot; &mdash; текст снова будет вставлен в позиции курсора. 
Можно войти в любой редактор &mdash; хоть GoldEd, хоть CygnusEd, и опять нажать &quot;Правая&nbsp;Amiga&nbsp;+&nbsp;V&quot; &mdash; снова текст из клипа будет благополучно перенесен туда, куда вы 
приказали.
</p><p align="justify">
По умолчанию работа всегда происходит с нулевым модулем (&quot;Unit&quot;) клип-устройства (для Shell-окон номер модуля определяется командой <a href="AMIGA-10.html#A100B">CONCLIP</a>, 
исполняемой в файле &quot;S:Startup-Sequence&quot;; подробно эта команда описана далее). Таких модулей, повторяем, может быть до 256-ти, все они абсолютно независимы друг от друга. 
Клип-устройство для своей работы требует наличия библиотеки &quot;iffparse.library&quot; и драйвера &quot;clipboard.device&quot;.
</p></blockquote>

<hr>
</body></html>

