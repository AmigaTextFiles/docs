<html>
<head>
<title>Amiga C Kurs f&uuml;r Einsteiger</title>
<META NAME="description" CONTENT="Amiga C Kurs f&uuml;r Einsteiger">
<META NAME="keywords"    CONTENT="C, Amiga, Programmierung, Kurs, Einsteiger, StormC">
<META NAME="author"      CONTENT="Norman Walter">

<script language="JavaScript" src="JavaScript/C-Kurs_Kapitel.js" type="text/javascript">
</script>

</head>
<body bgcolor="black" link="#DDDDDD" vlink="#BBBBBB">
<center>
<TABLE>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="140">
<CENTER>
<A HREF="index.html" NAME="Home"><IMG SRC="Home.png" ALT="Home" BORDER="0"></A><BR>
<A HREF="download.html" NAME="Downloads"><IMG SRC="Download.png" ALT="Downloads" BORDER="0"></A><BR>
<A HREF="Links.html" NAME="Links"><IMG SRC="Links.png" ALT="Links" BORDER="0"></A><BR>
<a href="cgi-bin/GB_SHOW.cgi" method="POST"><img SRC="guestbook.png" BORDER=0 alt="Guestbook"></a>
<p>
<A HREF="http://www.norman-interactive.com/email_feedback.html">
<IMG SRC="@.png" Border="0" Alt="e-mail"><BR><small>e-mail</small></A><BR>
<p>

<img src="C-Kurs/C-Kurs_sm.png" alt="Amiga C Kurs f&uuml;r Einsteiger" vspace="20"><BR>

<NOSCRIPT>
<font color="red">
Diese Seite ben&ouml;tigt JavaScript.
Entweder Ihr Browser unterst&uuml;tzt kein JavaScript, oder Sie haben es deaktiviert.
</font>
</NOSCRIPT>

<SCRIPT LANGUAGE="JavaScript">
<!--

  erzeuge_Kapitel(5);

//-->
</SCRIPT>

<p>
</CENTER>
</TD>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="400" HEIGHT="600">
<center>
<p>
<BR>
<font color="white">

<img src="C-Kurs/C-Kurs.png" alt="Amiga C Kurs f&uul,r Einsteiger"><BR>
</center>
<p>
<font color="gray"><H2>Rekursive Funktionen</H2></font><BR>
<p>
In den vielen Lehrb&uuml;chern &uuml;ber das Programmieren werden rekursive
<a href="C-Kurs_1_10.html">Funktionen</a> anhand des Beispiels der Fakutl&auml;tsfunktion erkl&auml;rt.
Wir tun das auch, denn es gibt einfach kein einfacheres Beispiel,
da&szlig; das Prinzip der Rekursion demonstriert. Dabei ist die Rekursion
nicht nur ein Prinzip der Informatik, sondern auch der Mathematik.
<p>
Mathematisch ist die Fakult&auml;tsfunktion wie folgt definiert:
<pre>
  n! = 1*2*3* ... n  (n = 1,2,...)
</pre>
<BR>
Per Definition gilt 0! = 1.
<p>
Beispielsweise ist 5! (sprich 5 Fakult&auml;t) = 1*2*3*4*5 = 120.
<p>
Wir k&ouml;nnen diese Rechnung auch rekursiv durchf&uuml;hren:
<pre>
  5!
  = 5*4!
  = 5*4*3!
  = 5*4*3*2!
  = 5*4*3*2*1!
  = 5*4*3*2*1*0!
  = 5*4*3*2*1*1
  = 120
</pre>
<BR>
oder allgemeiner formuliert:
<pre>
  n!=1         f&uuml;r n=0
  n!=n*(n-1)!  sonst
</pre>
<BR>
Diese rekursive Formel k&ouml;nnen wir direkt in einer Funktion formulieren,
wie Listing 5.3 demonstriert:

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
/*&nbsp;&nbsp;Listing&nbsp;5.3.1<br>
&nbsp;*&nbsp;&nbsp;Rekursive&nbsp;Funktionen:&nbsp;Fakult&auml;t<br>
&nbsp;*/<br></font>
<br>
#include&nbsp;&lt;stdio.h&gt;<br>
<br>
<font color="#008822"><b>//&nbsp;Funktionsprototyp<br></b></font>
<font color="#AA00FF"><b>int</b></font>&nbsp;fak(<font color="#AA00FF"><b>int</b></font>&nbsp;n);<br>
<br>
<font color="#AA00FF"><b>int</b></font>&nbsp;main(<font color="#AA00FF"><b>void</b></font>)<br>
{<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;x;<br>
<br>
&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Bitte&nbsp;geben&nbsp;Sie&nbsp;eine&nbsp;positive&nbsp;Ganzzahl&nbsp;ein:&nbsp;"</font>);<br>
&nbsp;&nbsp;<font color="#852608"><b>scanf</b></font>(<font color="#EEDD05">"%d"</font>,&x);<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(x>=0)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"%d!=%d"</font>,x,fak(x));<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>else</b></font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Fehler!&nbsp;Nur&nbsp;positive&nbsp;Zahlen&nbsp;erlaubt."</font>);<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;0;<br>
}<br>
<br>
<font color="#FFFFFF">
/*&nbsp;&nbsp;Funktion&nbsp;fak&nbsp;berechnet&nbsp;die&nbsp;Fakult&auml;t&nbsp;von&nbsp;n&nbsp;rekursiv<br>
&nbsp;*&nbsp;&nbsp;Eingabe:&nbsp;&nbsp;n&nbsp;&nbsp;(Integer)<br>
&nbsp;*&nbsp;&nbsp;R&uuml;ckgabe:&nbsp;n!&nbsp;(integer)<br>
&nbsp;*/<br></font>
<font color="#AA00FF"><b>int</b></font>&nbsp;fak(<font color="#AA00FF"><b>int</b></font>&nbsp;n)<br>
{<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(n==0)&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;1;<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>else</b></font>&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;n*fak(n-1);<br>
}<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Was wir hier sehen, ist eine Funktion, die sich selbst aufruft.
Solche rekursiven Funktionen bieten sich f&uuml;r rekursive Formeln
oder rekursive Strukturen, wie z.B. Bin&auml;rb&auml;ume oder Fraktale an.
<p>
Bitte beachten Sie, da&szlig; wenn wir hier der Funktion <TT>fak</TT> eine
negative Zahl &uuml;bergeben w&uuml;rden, die Funktion nie terminieren (sich beenden)
w&uuml;rde. Was wir dann h&auml;tten, w&auml;re eine sogenannte Endlosrekursion, die einen
fatalen Fehler darstellt und zwangsl&auml;ufig zum Programmabsturz f&uuml;hrt.
<p>
Eine Funktion zur Berechnung der Fakult&auml;t l&auml;&szlig;t sich auch iterativ, also
in einer Schleife formulieren:

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
/*  Funktion fak berechnet die Fakult&auml;t von n<br>
 *  Eingabe:  n  (Integer)<br>
 *  R&uuml;ckgabe: n! (integer)<br>
 */<br></font>
<font color="#AA00FF"><b>int</b></font>&nbsp;fak(<font color="#AA00FF"><b>int</b></font>&nbsp;n)<br>
{<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;ergebnis;<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(n&lt;0)&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;0;<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(n==0)&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;1;<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>for</b></font>&nbsp;(ergebnis=1;n>=1;n--)<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ergebnis*=n;&nbsp;<font color="#008822"><b>// Kurzform: ergebnis=ergebnis*n<br></b></font>
&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;ergebnis;<br>
}<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Wie man sieht, ist diese iterative Formulierung wesentlich gr&ouml;&szlig;er
als das rekursive Gegenst&uuml;ck. Au&szlig;erdem ist daraus die mathematische
Definition nicht sofort ersichtlich.
<p>
Manchmal ist die rekursive L&ouml;sung eines Problems die naheliegenste,
manchmal ist aber auch die iterative L&ouml;sung einfacher - das h&auml;ngt
ganz vom konkreten Fall ab.
<p>
Eine bessere Version der rekursiven Variante ist folgende:
<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
/*  Funktion fak berechnet die Fakult&auml;t von n<br>
 *  Eingabe:  n  (integer)<br>
 *  R&uuml;ckgabe: n! (unsigned&nbsp;long)<br>
 */<br></font>
<font color="#AA00FF"><b>unsigned</b></font>&nbsp;<font color="#AA00FF"><b>long</b></font>&nbsp;fak(<font color="#AA00FF"><b>int</b></font>&nbsp;n)<br>
{<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(n&lt;0)&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;0;<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(n==0)&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;1;<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;n*fak(n-1);<br>
}<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Wenn wir als R&uuml;ckgabewert den <a href="C-Kurs_Datentypen.html">Datentyp</a> <TT>int</TT> verwenden, sto&szlig;en wir bei der Fakult&auml;tsfunktion
schnell an die Grenzen des Wertebereichs (siehe Anhang <a href="C-Kurs_Datentypen.html">"Datentypen"</a>). Da die Fakult&auml;tsfunktion
sowieso keine negativen Werte zur&uuml;ckgeben kann, k&ouml;nnen wir auch einen <TT>unsigned</TT>-Typ, also
einen Datentyp ohne Vorzeichen verwenden. Hier bietet sich z.B. <TT>unsigned int</TT> oder noch besser
<TT>unsigned long</TT> an. Der Wertebereich von <TT>unsigned long</TT> geht bis 4294967295
- damit k&ouml;nnen wir immerhin Zahlen bis 12! = 479001600 berechnen.
<p>
In dieser verbesserten Variante der rekursiven Fakult&auml;tsunktion fangen
wir auch den Sonderfall <TT>n&lt;0</TT> ab und verhindern somit eine Endlosrekursion, falls die
Funktion versehentlich mit negativen Werten aufgerufen wird.
<p>
13! w&uuml;rde mit 6227020800 bereits au&szlig;erhalb des Wertebereichs von <TT>unsigned long</TT> liegen.
Falls wir wirklich gro&szlig;e Zahlen berechnen wollen, m&uuml;&szlig;en wir uns mit einem kleinen Trick behelfen:
<p>
<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
/*  Funktion fak berechnet die Fakult&auml;t von n<br>
 *  Eingabe:  n  (double)<br>
 *  R&uuml;ckgabe: n! (double)<br>
 */<br></font>
<font color="#AA00FF"><b>double</b></font>&nbsp;fak(<font color="#AA00FF"><b>double</b></font>&nbsp;n)<br>
{<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(n&lt;0)&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;0;<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(n==0)&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;1;<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;n*fak(n-1);<br>
}<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>
Obwohl wir nur mit ganzzahligen, nichtnegativen Werten rechnen wollen, benutzen wir hier den
<a href="C-Kurs_Datentypen.html">Datentyp</a> <TT>double</TT> - und das nur deshalb, weil dieser
einen noch gr&ouml;&szlig;eren Wertebereich als <TT>unsigned long</TT> hat.
<p>
Jetzt werden Sie vermutlich (v&ouml;llig zu Recht) fragen: "Und welchen praktischen Nutzen habe ich davon?"
Antwort: Die Fakult&auml;tsfunktion spielt eine wichtige Rolle in der Wahrscheinlichkeitsrechnung.
Sicher haben Sie sich schon einmal gefragt, wie Ihre Chancen im Lotto stehen.
Dies kann man mit der "n &uuml;ber k" Formel ausrechnen, die im folgenden Programm als
<a href="C-Kurs_2_2.html">Makro</a> implementiert ist:
<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
/*  Listing 5.3.2<br>
 *&nbsp;&nbsp;Chancen&nbsp;im&nbsp;Lotto&nbsp;berechnen<br>
&nbsp;*  <br>
 */<br></font>
<br>
#include&nbsp;&lt;stdio.h&gt;<br>
<br>
<font color="#008822"><b>// Funktionsprototyp<br></b></font>
<font color="#AA00FF"><b>double</b></font>&nbsp;fak(<font color="#AA00FF"><b>double</b></font>&nbsp;n);<br>
<br>
<font color="#008822"><b>//&nbsp;Makro&nbsp;f&uuml;r&nbsp;n&nbsp;&uuml;ber&nbsp;k<br></b></font>
#define&nbsp;nuek(n,k)&nbsp;(fak(n)/(fak(k)*fak(n-k)))<br>
<br>
<font color="#AA00FF"><b>int</b></font>&nbsp;main(<font color="#AA00FF"><b>void</b></font>)<br>
{<br>
&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Die&nbsp;Chancen&nbsp;im&nbsp;Lotto&nbsp;f&uuml;r...\n"</font>);<br>
<br>
&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"1&nbsp;Richtiger&nbsp;ist&nbsp;1&nbsp;zu&nbsp;%.0lf\n"</font>,nuek(49,1));<br>
&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"2&nbsp;Richtige&nbsp;&nbsp;ist&nbsp;1&nbsp;zu&nbsp;%.0lf\n"</font>,nuek(49,2));<br>
&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"3&nbsp;Richtige&nbsp;&nbsp;ist&nbsp;1&nbsp;zu&nbsp;%.0lf\n"</font>,nuek(49,3));<br>
&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"4&nbsp;Richtige&nbsp;&nbsp;ist&nbsp;1&nbsp;zu&nbsp;%.0lf\n"</font>,nuek(49,4));<br>
&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"5&nbsp;Richtige&nbsp;&nbsp;ist&nbsp;1&nbsp;zu&nbsp;%.0lf\n"</font>,nuek(49,5));<br>
&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"6&nbsp;Richtige&nbsp;&nbsp;ist&nbsp;1&nbsp;zu&nbsp;%.0lf\n"</font>,nuek(49,6));<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;0;<br>
}<br>
<br>
<font color="#FFFFFF">
/*  Funktion fak berechnet die Fakult&auml;t von n<br>
 *  Eingabe:  n  (double)<br>
 *  R&uuml;ckgabe: n! (double)<br>
 */<br></font>
<font color="#AA00FF"><b>double</b></font>&nbsp;fak(<font color="#AA00FF"><b>double</b></font>&nbsp;n)<br>
{<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(n&lt;0)&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;0;<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(n==0)&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;1;<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;n*fak(n-1);<br>
}<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>
Falls Sie regelm&auml;&szlig;ig Lotto spielen, sollten Sie das oben gezeigte Programm besser nicht ausprobieren,
denn das Ergebnis ist ern&uuml;chternd.
<p>
Ein weiteres, klassisches Beispiel f&uuml;r Rekursion ist die rekursive Berechnung der Fibonacci-Zahlen.
Leonardo di Pisa, genannt <i>Fibonacci</i> versuchte, in seinem im Jahre 1202 erschienenen Buch <i>Liber abaci</i> 
eine Antwort auf folgende Frage zu finden: <i>Wie viele Kaninchenpaare stammen am Ende eines Jahres von einem
Kaninchenpaar ab, wenn jedes Paar jeden Monat ein neues Paar als Nachkommen hat, das selbst vom zweiten Monat
an Nachkommen gebiert?</i> Dabei kam er auf folgende Rekursionsformel:
<p>
<center>
<img src="C-Kurs/Fibonacci.png" alt="Fibonacci">
</center>
<p>
Diese Formel l&auml;&szlig;t sich sehr einfach in ein C-Programm umsetzen:
<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
/*&nbsp;&nbsp;Listing&nbsp;5.3.3<br>
&nbsp;*&nbsp;&nbsp;Fibonacci&nbsp;Zahlen<br>
&nbsp;*<br>
&nbsp;*/<br></font>
<br>
#include&nbsp;&lt;stdio.h&gt;<br>
<br>
<font color="#008822"><b>//&nbsp;rekursive&nbsp;Funktion&nbsp;zur&nbsp;Berechnung&nbsp;der&nbsp;Fibonacci-Zahlen<br></b></font>
<font color="#AA00FF"><b>unsigned</b></font>&nbsp;<font color="#AA00FF"><b>long</b></font>&nbsp;fib(<font color="#AA00FF"><b>unsigned</b></font>&nbsp;<font color="#AA00FF"><b>long</b></font>&nbsp;n)<br>
{<br>
&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(n&lt;=2)&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;1;<br>
&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>else</b></font>&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;fib(n-1)+fib(n-2);<br>
}<br>
<br>
<font color="#AA00FF"><b>int</b></font>&nbsp;main(<font color="#AA00FF"><b>void</b></font>)<br>
{<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>unsigned</b></font>&nbsp;<font color="#AA00FF"><b>long</b></font>&nbsp;n;<br>
<br>
&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Programm&nbsp;zur&nbsp;Berechnung&nbsp;der&nbsp;Fibonacci-Zahlen\n"</font>);<br>
&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"n="</font>);<br>
&nbsp;&nbsp;<font color="#852608"><b>scanf</b></font>(<font color="#EEDD05">"%ld"</font>,&n);<br>
&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"fib(%ld)=%ld\n"</font>,n,fib(n));<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;0;<br>
}<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>
Mit diesem Programm k&ouml;nnen wir die n-te Fibonacci Zahl berechnen. Es ergibt sich die Zahlenfolge
1,1,2,3,5,8,13,21,34,55,89,144,233,377,... Diese Folge wird dem Entdecker zu Ehren auch <i>Fibonacci-Folge</i>
genannt. Erstaunlicherweise kommt diese Zahlenfolge h&auml;ufig in der Natur vor, so z.B. in der Geometrie von Pflanzen.
<p>
</font>
</center>
</TD>
</TABLE>

</body>
</html>
