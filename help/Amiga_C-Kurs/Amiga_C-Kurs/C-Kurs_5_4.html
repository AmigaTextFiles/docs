<html>
<head>
<title>Amiga C Kurs f&uuml;r Einsteiger</title>
<META NAME="description" CONTENT="Amiga C Kurs f&uuml;r Einsteiger">
<META NAME="keywords"    CONTENT="C, Amiga, Programmierung, Kurs, Einsteiger, StormC">
<META NAME="author"      CONTENT="Norman Walter">

<script language="JavaScript" src="JavaScript/C-Kurs_Kapitel.js" type="text/javascript">
</script>

</head>
<body bgcolor="black" link="#DDDDDD" vlink="#BBBBBB">
<center>
<TABLE>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="140">
<CENTER>
<A HREF="index.html" NAME="Home"><IMG SRC="Home.png" ALT="Home" BORDER="0"></A><BR>
<A HREF="download.html" NAME="Downloads"><IMG SRC="Download.png" ALT="Downloads" BORDER="0"></A><BR>
<A HREF="Links.html" NAME="Links"><IMG SRC="Links.png" ALT="Links" BORDER="0"></A><BR>
<a href="cgi-bin/GB_SHOW.cgi" method="POST"><img SRC="guestbook.png" BORDER=0 alt="Guestbook"></a>
<p>
<A HREF="http://www.norman-interactive.com/email_feedback.html">
<IMG SRC="@.png" Border="0" Alt="e-mail"><BR><small>e-mail</small></A><BR>
<p>

<img src="C-Kurs/C-Kurs_sm.png" alt="Amiga C Kurs f&uuml;r Einsteiger" vspace="20"><BR>

<NOSCRIPT>
<font color="red">
Diese Seite ben&ouml;tigt JavaScript.
Entweder Ihr Browser unterst&uuml;tzt kein JavaScript, oder Sie haben es deaktiviert.
</font>
</NOSCRIPT>

<SCRIPT LANGUAGE="JavaScript">
<!--

  erzeuge_Kapitel(5);

//-->
</SCRIPT>

<p>
</CENTER>
</TD>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="400" HEIGHT="600">
<center>
<p>
<BR>
<font color="white">

<img src="C-Kurs/C-Kurs.png" alt="Amiga C Kurs f&uul,r Einsteiger"><BR>
</center>
<p>
<font color="gray"><H2>Argumente aus der Kommandozeile</H2></font><BR>
<p>
Manchmal wollen wir einem Programm beim Start aus der Shell Argumente
&uuml;bergeben. Zum Beispiel kennen Sie sicherlich das Programm "more",
das man aus der Shell mit
<pre>
  more <i>Dateiname</i>
</pre>
<BR>
aufruft.
More zeigt dann die in <i>Dateiname</i> angegebene Textdatei an.
<p>
Nun wollen wir lernen, wie man solche Argumente &uuml;bergibt.
In unseren bisherigen Beispielen haben wir der Funktion <TT>main</TT>
keine Argumente &uuml;bergeben, d.h. wir haben sie mit <TT>int main(void)</TT>
aufgerufen.
<p>
Wenn wir unserem Programm Argumente aus der Shell &uuml;bergeben
wollen, dann m&uuml;ssen wir auch der Funktion <TT>main</TT> Eingabeparameter
&uuml;bergeben. Diese Eingabeparameter sind eine Variable Namens <TT>argc</TT>
vom Typ <TT>int</TT>, sowie einen <a href="C-Kurs_4_3.html">Zeiger auf einen Vektor</a>
Namens <TT>argv</TT>. Rufen wir ein Programm mit Argumenten auf, so enth&auml;lt
die Variable <TT>argc</TT> die Anzahl der &uuml;bergebenen Argumente.
Der Zeiger <TT>argv</TT> zeigt auf ein Array von Vektoren. Die Vektoren
in diesem Array zeigen wiederum auf die <a href="C-Kurs-4_1.html">Adressen</a>, wo unsere Argumente
gespeichert wurden.
<p>
Wie man an die Argumente aus der Kommandozeile herankommt, demonstriert
Listing 5.4:

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
/*&nbsp;&nbsp;Listing&nbsp;5.4<br>
&nbsp;*&nbsp;&nbsp;Argumente&nbsp;aus&nbsp;der&nbsp;Kommandozeile<br>
&nbsp;*/<br></font>
<br>
#include&nbsp;&lt;stdio.h&gt;<br>
<br>
<font color="#008822"><b>//&nbsp;Minimale&nbsp;Anzahl&nbsp;an&nbsp;Argumenten.<br></b></font>
#define&nbsp;MINARGS&nbsp;2<br>
<br>
<font color="#AA00FF"><b>int</b></font>&nbsp;main(<font color="#AA00FF"><b>int</b></font>&nbsp;argc,&nbsp;<font color="#AA00FF"><b>char</b></font>&nbsp;*argv[])<br>
{<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;((argc&nbsp;&lt;&nbsp;MINARGS)&nbsp;||&nbsp;(argv[argc-1][0]==<font color="#EEDD05">'?'</font>))<br>
&nbsp;&nbsp;{<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;&nbsp;Wenn&nbsp;weniger&nbsp;Argumente&nbsp;als&nbsp;die&nbsp;in&nbsp;MINARGS&nbsp;stehende<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Zahl&nbsp;oder&nbsp;ein&nbsp;Fragezeichen&nbsp;&uuml;bergeben&nbsp;wurde,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;dann&nbsp;gebe&nbsp;diesen&nbsp;Text&nbsp;aus.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Listing&nbsp;5.4&nbsp;-&nbsp;Argumente&nbsp;aus&nbsp;der&nbsp;Kommandozeile\n"</font>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Benutzung&nbsp;aus&nbsp;der&nbsp;Shell:&nbsp;Listing_5.4&nbsp;Argument1&nbsp;Argument2&nbsp;....\n"</font>);<br>
&nbsp;&nbsp;}<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>else</b></font><br>
&nbsp;&nbsp;{<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;&nbsp;Ansolsten&nbsp;liste&nbsp;alle&nbsp;Argumente&nbsp;mit&nbsp;Hilfe<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;der&nbsp;folgenden&nbsp;while-Schleife&nbsp;auf.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>while</b></font>&nbsp;(--argc&nbsp;>&nbsp;0)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Argument&nbsp;Nr.&nbsp;%d:&nbsp;%s\n"</font>,argc,*++argv);<br>
&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;0;<br>
}<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>
 
Durch die im Code angegebenen Kommentare sollte Listing 5.4 eigentlich
weitgehend selbsterkl&auml;rend sein: F&uuml;r den Fall, da&szlig; weniger als die
zuvor in der <a href="C-Kurs_2_1.html">symbolischen Konstanten</a> <TT>MINARGS</TT> definierte Zahl, oder
das Amiga-typische Fragezeichen f&uuml;r den Aufruf des Hilfetextes eingegeben
wurde, geben wir einen entsprechenden Text mit einer Erkl&auml;rung zur
Benutzung des Programms aus.
<p>
Falls mindestens ein Argument &uuml;bergeben wurde, arbeiten wir uns mit
Hilfe einer <a href="C-Kurs_1_8.html">while-Schleife</a> durch das
Array von Zeigern, auf das unser Zeiger <TT>argv</TT> zeigt.
Dabei gehen wir so vor, wie wir es in Kapitel 3 in der Lektion
&uuml;ber <a href="C-Kurs_4_3.html">Zeiger auf Vektoren</a> gesehen haben:
Mit <TT>++argv</TT> inkrementieren wir in jedem Schleifendurchlauf
den Zeiger, das hei&szlig;t, wir schieben Ihn jeweils um eine Indexposition
nach vorne. <TT>*argv</TT> ist dann ein Zeiger auf das jeweilige
Argument. Im Schleifenkopf unserer while-Schleife z&auml;hlen wir gleichzeitig
mit dem dekrement-Operator von der Anzahl der &uuml;bergebenen Argumente
bis auf 1 herunter.
<p>
Compileren Sie Listing 5.4 und speichern Sie es unter dem Namen "Listing_5.4"
ab. In StormC k&ouml;nnen sie den Programmname im Pulldown-Men&uuml; unter "Projekt/Programmname W&auml;hlen"
einstellen.
<p>
Da wir bei unserem Programm Argumente aus der Kommandozeile &uuml;bergeben wollen,
m&uuml;ssen wir es auch aus einer Shell heraus starten. Starten Sie also das Programm
"Shell", das Sie auf Ihrer Workbench-Partition im Verzeichnis "System" finden.
<p>
<center>
<img src="C-Kurs/System.png" alt="System"><BR>
</center>
<p>
Im folgenden Bild sehen Sie, wie Listing 5.4 auf verschiedene Eingaben reagiert.
Wechseln Sie mit dem Befehl <TT>cd</TT> in das Verzeichnis, in dem Sie
Ihr ausf&uuml;hrbares Programm abgespeichert haben. Probieren Sie dann selbst
aus, wie das Programm auf verschiedene Eingaben reagiert!
<p>
<center>
<img src="C-Kurs/Argumente.png" alt="Argumente"><BR>
</center>

<p>
</font>
</center>
</TD>
</TABLE>

</body>
</html>
