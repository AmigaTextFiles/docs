<html>
<head>
<title>Amiga C Kurs f&uuml;r Einsteiger</title>
<META NAME="description" CONTENT="Amiga C Kurs f&uuml;r Einsteiger">
<META NAME="keywords"    CONTENT="C, Amiga, Programmierung, Kurs, Einsteiger, StormC">
<META NAME="author"      CONTENT="Norman Walter">

<script language="JavaScript" src="JavaScript/C-Kurs_Kapitel.js" type="text/javascript">
</script>

</head>
<body bgcolor="black" link="#DDDDDD" vlink="#BBBBBB">
<center>
<TABLE>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="140">
<CENTER>
<a href="index.html" name="Home"><img width=161 height=41 src="Home.png" alt="Home" border="0"></a><br>
<a href="download.html" name="Downloads"><img width=161 height=41 src="Download.png" alt="Downloads" border="0"></a><br>
<a href="Links.html" name="Links"><img width=161 height=41 src="Links.png" alt="Links" border="0"></a><br>
<a href="cgi-bin/GB_SHOW.cgi" method="POST"><img width=161 height=41 src="guestbook.png" border=0 alt="Guestbook"></a>
<p>
<A HREF="http://www.norman-interactive.com/email_feedback.html">
<img width=61 height=61 src="@.png" border="0" alt="e-mail"><br><small>e-mail</small></a><br>
<p>

<img width=173 height=40 src="C-Kurs/C-Kurs_sm.png" alt="Amiga C Kurs f&uuml;r Einsteiger" vspace="20"><br>

<NOSCRIPT>
<font color="red">
Diese Seite ben&ouml;tigt JavaScript.
Entweder Ihr Browser unterst&uuml;tzt kein JavaScript, oder Sie haben es deaktiviert.
</font>
</NOSCRIPT>

<SCRIPT LANGUAGE="JavaScript">
<!--

  erzeuge_Kapitel(10);

//-->
</SCRIPT>

<p>
</CENTER>
</TD>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="400" HEIGHT="600">
<center>
<p>
<BR>
<font color="white">

<img width=347 height=81 src="C-Kurs/C-Kurs.png" alt="Amiga C Kurs f&uuml;r Einsteiger"><br>
</center>
<p>
<font color="gray"><H2>Gadgets unterscheiden</H2></font><BR>
<p>
In dieser Lektion wollen wir ein Fenster mit drei Buttons programmieren:
<p>
<center>
<img src="C-Kurs/Gadgets_unterscheiden.png" alt="Gadgets unterscheiden">
</center>
<p>
Dabei wollen wir nicht nur feststellen, ob ein Button gedr&uuml;ckt wurde, sondern auch
herausfinden welcher es war.
<p>
Wie in der Lektion <a href="C-Kurs_10_1.html">der erste Button</a> f&uuml;llen wir
innerhalb einer <a href="C-Kurs_1_10.html">Funktion</a> namens <TT>ErzeugeGadgets</TT>  eine
NewGadget Struktur aus und f&uuml;gen das erste Gadget in die Gadgetliste ein.
<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;NewGadget&nbsp;Struktur&nbsp;ausf&uuml;llen&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_TextAttr&nbsp;=&nbsp;&ta;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Schriftart<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_LeftEdge&nbsp;=&nbsp;(WIDTH/2)-50;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Abstand&nbsp;vom&nbsp;linken&nbsp;Rand<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_TopEdge&nbsp;=&nbsp;20&nbsp;+&nbsp;topborder;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Abstand&nbsp;vom&nbsp;oberen&nbsp;Rand<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_Width&nbsp;=&nbsp;120;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Breite<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_Height&nbsp;=&nbsp;18;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;H&ouml;he<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_GadgetText&nbsp;=&nbsp;<font color="#EEDD05">"Button&nbsp;1"</font>;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Text</b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_GadgetID&nbsp;=&nbsp;KNOPF_1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Nummer&nbsp;zur&nbsp;Identifizierung<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_Flags&nbsp;=&nbsp;0;<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;&nbsp;Jetzt&nbsp;wird&nbsp;das&nbsp;Gadget&nbsp;erzeugt&nbsp;und&nbsp;in&nbsp;die&nbsp;Gadget&nbsp;Liste&nbsp;eingetragen.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;BUTTON_KIND&nbsp;bezeichnet&nbsp;den&nbsp;Typ&nbsp;des&nbsp;Gadgets.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;gad&nbsp;=&nbsp;<font color="#FFFFAA">CreateGadget</font>(BUTTON_KIND,&nbsp;gad,&nbsp;&ng,&nbsp;TAG_DONE);<br>
<br>
<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Durch den Aufruf von <TT>CreateGadget</TT> wird eine Kopie unserer <a href="C-Kurs_3_3.html">Strukturvariablen</a>
<TT>ng</TT> in die Gadgetliste <TT>gad</TT> eingeh&auml;ngt.
<p>
F&uuml;r die zwei &uuml;brigen Gadgets modifizieren wir die Variable <TT>ng</TT> entsprechend.
Der zweite Button unterscheidet sich vom ersten im Abstand vom Fensterrand, in der Beschriftung
und in der GadgetID. Die &uuml;brigen Komponenten wie H&ouml;he und Breite  bleiben unver&auml;ndert.
Der Abstand vom oberen Rand des ersten Gadgets zum oberen Rand des zweiten Gadgets
soll 30 Pixel sein. Deshab addieren wir zur Komponente
<TT>ng_TopEdge</TT> den Wert 30. Das selbe machen wir f&uuml;r das dritte Gadget.
<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;/*&nbsp;Zweiter&nbsp;Button&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_TopEdge&nbsp;+=&nbsp;30;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_GadgetText&nbsp;=&nbsp;<font color="#EEDD05">"Button&nbsp;2"</font>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_GadgetID&nbsp;=&nbsp;KNOPF_2;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;gad&nbsp;=&nbsp;<font color="#FFFFAA">CreateGadget</font>(BUTTON_KIND,&nbsp;gad,&nbsp;&ng,&nbsp;TAG_DONE);<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;/*&nbsp;Dritter&nbsp;Button&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_TopEdge&nbsp;+=&nbsp;30;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_GadgetText&nbsp;=&nbsp;<font color="#EEDD05">"Button&nbsp;3"</font>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_GadgetID&nbsp;=&nbsp;KNOPF_3;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;gad&nbsp;=&nbsp;<font color="#FFFFAA">CreateGadget</font>(BUTTON_KIND,&nbsp;gad,&nbsp;&ng,&nbsp;TAG_DONE);<br>
<br>
<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Die GadgetIDs definieren wir als <a href="C-Kurs_2_1.html">Symbolische Konstanten</a> am Anfang des Quelltexts.
Sie dienen der Identifizierung der Gadgets.

<p>
 

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<br>
#define&nbsp;KNOPF_1&nbsp;1&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Symbolische&nbsp;Konstante&nbsp;f&uuml;r&nbsp;unseren&nbsp;Button<br></b></font>
#define&nbsp;KNOPF_2&nbsp;2<br>
#define&nbsp;KNOPF_3&nbsp;3<br>
<br>
<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Die Namen und Zahlenwerte sind dabei frei w&auml;hlbar.
Die einzige Einschr&auml;nkung dabei ist, da&szlig; jedes Gadget eine eindeutige Nummer
haben mu&szlig;.

<p>

Um herauszufinden welches Gadget angeklickt wurde, nutzen wir folgende Funktion Namens
<TT>BehandleEvent</TT>. Die GadgetIDs helfen uns dabei, das angeklickte Gadget zu
identifizieren.

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<br>
<font color="#AA00FF"><b>void</b></font>&nbsp;BehandleEvent(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Gadget</font>&nbsp;*gad)<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>switch</b></font>&nbsp;(gad->GadgetID)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>case</b></font>&nbsp;KNOPF_1:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Button&nbsp;1&nbsp;wurde&nbsp;angeklickt.\n"</font>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>break</b></font>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>case</b></font>&nbsp;KNOPF_2:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Button&nbsp;2&nbsp;wurde&nbsp;angeklickt.\n"</font>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>break</b></font>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>case</b></font>&nbsp;KNOPF_3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Button&nbsp;3&nbsp;wurde&nbsp;angeklickt.\n"</font>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>break</b></font>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<font color="#008822"><b>//&nbsp;Ende&nbsp;der&nbsp;switch&nbsp;Verzweigung<br></b></font>
}<br>
<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Wo hier die <TT>printf</TT> Anweisung steht, w&uuml;rde in einer richtigen Anwendung
der entsprechende Code stehen, der ausgef&uuml;hrt werden soll, wenn der jeweilige
Button angeklickt wird. Dies kann z.B. ein Funktionsaufruf sein.
<p>
Die <a href="C-Kurs_1_10.html">Funktion</a> <TT>BehandleEvent</TT> rufen wir immer
dann auf, wenn ein <TT>GADGETUP</TT> Event aufgetreten ist. Dieser tritt immer
dann auf, wenn irgendein Button angeklickt wurde.

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;&nbsp;Buttons&nbsp;l&ouml;sen&nbsp;GADGETUP&nbsp;aus&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>case</b></font>&nbsp;GADGETUP:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Ereignis&nbsp;GADGETUP&nbsp;ist&nbsp;eingetreten.\n"</font>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BehandleEvent(gad);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>break</b></font>;<br>
<br>
<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Hier das vollst&auml;ndige Beispiel:

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
/*&nbsp;&nbsp;Listing&nbsp;10.2.1<br>
&nbsp;*&nbsp;&nbsp;Gadgets&nbsp;unterscheiden<br>
&nbsp;*/<br></font>
<br>
#include&nbsp;&lt;stdio.h&gt;<br>
<br>
#include&nbsp;&lt;exec/types.h&gt;<br>
#include&nbsp;&lt;exec/memory.h&gt;<br>
#include&nbsp;&lt;intuition/intuition.h&gt;<br>
#include&nbsp;&lt;intuition/gadgetclass.h&gt;<br>
#include&nbsp;&lt;utility/tagitem.h&gt;<br>
#include&nbsp;&lt;graphics/gfx.h&gt;<br>
#include&nbsp;&lt;graphics/text.h&gt;<br>
#include&nbsp;&lt;libraries/gadtools.h&gt;<br>
<br>
#include&nbsp;&lt;proto/intuition.h&gt;<br>
#include&nbsp;&lt;proto/dos.h&gt;<br>
#include&nbsp;&lt;proto/exec.h&gt;<br>
#include&nbsp;&lt;proto/graphics.h&gt;<br>
#include&nbsp;&lt;proto/diskfont.h&gt;<br>
#include&nbsp;&lt;proto/gadtools.h&gt;<br>
<br>
<font color="#008822"><b>//&nbsp;Symbolische&nbsp;Konstanten<br></b></font>
#define&nbsp;WIDTH&nbsp;300&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Breite&nbsp;des&nbsp;Fensters<br></b></font>
#define&nbsp;HEIGHT&nbsp;150&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;H&ouml;he&nbsp;des&nbsp;Fensters<br></b></font>
<br>
#define&nbsp;KNOPF_1&nbsp;1&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Symbolische&nbsp;Konstante&nbsp;f&uuml;r&nbsp;unseren&nbsp;Button<br></b></font>
#define&nbsp;KNOPF_2&nbsp;2<br>
#define&nbsp;KNOPF_3&nbsp;3<br>
<br>
<font color="#FFFFFF">
/*&nbsp;Funktionsprototypen&nbsp;*/<br></font>
<font color="#AA00FF"><b>void</b></font>&nbsp;ShutDown(<font color="#AA00FF"><b>int</b></font>&nbsp;code,&nbsp;<font color="#45FF65">STRPTR</font>&nbsp;error);<br>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Gadget</font>&nbsp;*ErzeugeGadgets(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Gadget</font>&nbsp;**glistptr,&nbsp;<font color="#45FF65">UWORD</font>&nbsp;topborder);<br>
<font color="#AA00FF"><b>void</b></font>&nbsp;BehandleEvent(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Gadget</font>&nbsp;*gad);<br>
<br>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Window</font>&nbsp;*Fenster;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;Window-Struktur</b></font>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">IntuitionBase</font>&nbsp;*<font color="#45FF65">IntuitionBase</font>;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;IntuitionBase-Struktur</b></font>
<font color="#AA00FF"><b>extern</b></font>&nbsp;<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Library</font>&nbsp;*GadToolsBase;<br>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">TextFont</font>&nbsp;*textfont;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;TextFont</b></font><br>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Gadget</font>&nbsp;*glist&nbsp;=&nbsp;NULL;<br>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Screen</font>&nbsp;*mysc&nbsp;=&nbsp;NULL;<br>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">TextAttr</font>&nbsp;ta;<br>
<br>
<br>
<font color="#AA00FF"><b>int</b></font>&nbsp;main(<font color="#AA00FF"><b>void</b></font>)<br>
{<br>
<font color="#FFFFFF">
&nbsp;&nbsp;/*&nbsp;Variablen&nbsp;zur&nbsp;Message-Bearbeitung&nbsp;*/<br></font>
&nbsp;&nbsp;<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">MsgPort</font>&nbsp;*Port;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;Message&nbsp;Port&nbsp;Struktur<br></b></font>
&nbsp;&nbsp;<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">IntuiMessage</font>&nbsp;*Nachricht;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;Intuition&nbsp;Message&nbsp;Struktur<br></b></font>
&nbsp;&nbsp;<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Gadget</font>&nbsp;*gad;<br>
&nbsp;&nbsp;<font color="#45FF65">ULONG</font>&nbsp;&nbsp;klasse;<br>
&nbsp;&nbsp;<font color="#45FF65">UWORD</font>&nbsp;topborder;<br>
<br>
&nbsp;&nbsp;<font color="#45FF65">BOOL</font>&nbsp;Ende&nbsp;=&nbsp;FALSE;&nbsp;<font color="#008822"><b>//&nbsp;Boolsche&nbsp;Variable:&nbsp;Programmende?<br></b></font>
<br>
&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Intuition&nbsp;<font color="#45FF65">Library</font>&nbsp;&ouml;ffnen<br></b></font>
&nbsp;&nbsp;<font color="#45FF65">IntuitionBase</font>&nbsp;=&nbsp;(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">IntuitionBase</font>&nbsp;*)&nbsp;<font color="#FFFFAA">OpenLibrary</font>(<font color="#EEDD05">"intuition.library"</font>,37L);<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(<font color="#45FF65">IntuitionBase</font>&nbsp;==&nbsp;NULL)<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;ShutDown(20,<font color="#EEDD05">"Konnte&nbsp;intuition.library&nbsp;37&nbsp;nicht&nbsp;&ouml;ffnen."</font>);<br>
&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;GadToolsBase&nbsp;=&nbsp;(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Library</font>&nbsp;*)&nbsp;<font color="#FFFFAA">OpenLibrary</font>(<font color="#EEDD05">"gadtools.library"</font>,&nbsp;36L);<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(GadToolsBase&nbsp;==&nbsp;NULL)<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;ShutDown(20,<font color="#EEDD05">"Konnte&nbsp;gadtools.library&nbsp;36&nbsp;nicht&nbsp;&ouml;ffnen."</font>);<br>
&nbsp;&nbsp;}<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;/*&nbsp;TextAttr&nbsp;Struktur&nbsp;ausf&uuml;llen...&nbsp;*/<br></font>
&nbsp;&nbsp;ta.ta_Name&nbsp;=&nbsp;<font color="#EEDD05">"topaz.font"</font>;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Name&nbsp;des&nbsp;Fonts<br></b></font>
&nbsp;&nbsp;ta.ta_YSize&nbsp;=&nbsp;TOPAZ_EIGHTY;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;H&ouml;he&nbsp;des&nbsp;Fonts<br></b></font>
&nbsp;&nbsp;ta.ta_Style&nbsp;=&nbsp;FS_NORMAL;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Normaler&nbsp;Textstil<br></b></font>
&nbsp;&nbsp;ta.ta_Flags&nbsp;=&nbsp;FPF_ROMFONT;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Es&nbsp;ist&nbsp;ein&nbsp;ROM-Font<br></b></font>
<br>
&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Font&nbsp;&ouml;ffnen<br></b></font>
&nbsp;&nbsp;textfont&nbsp;=&nbsp;<font color="#FFFFAA">OpenFont</font>(&ta);<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(!textfont)<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;ShutDown(20,<font color="#EEDD05">"Konnte&nbsp;topaz.font&nbsp;nicht&nbsp;&ouml;ffnen."</font>);<br>
&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;mysc&nbsp;=&nbsp;<font color="#FFFFAA">LockPubScreen</font>(NULL);<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;/*&nbsp;Oberer&nbsp;Rand&nbsp;des&nbsp;Fensters&nbsp;*/<br></font>
&nbsp;&nbsp;topborder&nbsp;=&nbsp;mysc->WBorTop&nbsp;+&nbsp;(mysc->Font->ta_YSize&nbsp;+&nbsp;1);<br>
<br>
&nbsp;&nbsp;ErzeugeGadgets(&glist,&nbsp;topborder);<br>
<br>
&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fenster&nbsp;mittels&nbsp;Tags&nbsp;&ouml;ffnen<br></b></font>
&nbsp;&nbsp;Fenster&nbsp;=&nbsp;<font color="#FFFFAA">OpenWindowTags</font>(NULL,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Left,&nbsp;100,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Abstand&nbsp;vom&nbsp;linken&nbsp;Rand<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Top,&nbsp;100,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Abstand&nbsp;vom&nbsp;oberen&nbsp;Rand<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Width,&nbsp;WIDTH,&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Breite<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Height,&nbsp;HEIGHT,&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;H&ouml;he<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Title,&nbsp;<font color="#EEDD05">"Gadgets&nbsp;unterscheiden"</font>,&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fenstertitel<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_CloseGadget,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Close-Gadget<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_DragBar,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Ziehleiste<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_DepthGadget,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Depth-Gadget<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Gadgets,&nbsp;glist,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Gadget&nbsp;Liste<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_IDCMP,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;IDCMP&nbsp;Flags<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IDCMP_CLOSEWINDOW&nbsp;|&nbsp;IDCMP_GADGETUP&nbsp;|&nbsp;BUTTONIDCMP,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Activate,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fenster&nbsp;aktivieren<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(Fenster&nbsp;!=&nbsp;NULL)<br>
&nbsp;&nbsp;{<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;&nbsp;Nachdem&nbsp;das&nbsp;Fenster&nbsp;ge&ouml;ffnet&nbsp;wurde,&nbsp;m&uuml;ssen&nbsp;wir&nbsp;die<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;GadTools&nbsp;Refresh&nbsp;Funktion&nbsp;aufrufen.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">GT_RefreshWindow</font>(Fenster,&nbsp;NULL);<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Unser&nbsp;Port&nbsp;ist&nbsp;der&nbsp;UserPort&nbsp;unseres&nbsp;Fensters&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;Port&nbsp;=&nbsp;Fenster->UserPort;<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;&nbsp;Schleife&nbsp;l&auml;uft&nbsp;so&nbsp;lange,&nbsp;bis&nbsp;das&nbsp;Programm<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;durch&nbsp;Anklicken&nbsp;des&nbsp;Close-Gadgets&nbsp;beedet&nbsp;wird.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>while</b></font>&nbsp;(!Ende)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Auf&nbsp;ankommende&nbsp;Nachricht&nbsp;warten&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">WaitPort</font>(Port);<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Schleife&nbsp;l&auml;uft&nbsp;bis&nbsp;alle&nbsp;Ereignisse<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;abgearbeitet&nbsp;sind.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>while</b></font>&nbsp;(Nachricht&nbsp;=&nbsp;(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">IntuiMessage</font>&nbsp;*)&nbsp;<font color="#FFFFAA">GT_GetIMsg</font>(Port))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;klasse&nbsp;=&nbsp;Nachricht->Class;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gad&nbsp;=&nbsp;(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Gadget</font>&nbsp;*)Nachricht->IAddress;<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Welches&nbsp;Ereignis&nbsp;ist&nbsp;eingetreten?&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>switch</b></font>(klasse)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>case</b></font>&nbsp;CLOSEWINDOW&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Closegadget&nbsp;wurde&nbsp;angeklickt\n"</font>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ende&nbsp;=&nbsp;TRUE;&nbsp;<font color="#008822"><b>//&nbsp;Programmende<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>break</b></font>;<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;&nbsp;Buttons&nbsp;l&ouml;sen&nbsp;GADGETUP&nbsp;aus&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>case</b></font>&nbsp;GADGETUP:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Ereignis&nbsp;GADGETUP&nbsp;ist&nbsp;eingetreten.\n"</font>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BehandleEvent(gad);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>break</b></font>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<font color="#008822"><b>//&nbsp;Ende&nbsp;der&nbsp;switch-Verzweigung<br></b></font>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Wir&nbsp;sind&nbsp;mit&nbsp;der&nbsp;Bearbeitung&nbsp;fertig<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;und&nbsp;beantworten&nbsp;die&nbsp;Nachricht.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">GT_ReplyIMsg</font>(Nachricht);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<font color="#008822"><b>//&nbsp;Ende&nbsp;der&nbsp;inneren&nbsp;while-Schleife<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<font color="#008822"><b>//&nbsp;Ende&nbsp;der&nbsp;&auml;u&szlig;eren&nbsp;while-Schleife<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">CloseWindow</font>(Fenster);&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fenster&nbsp;schlie&szlig;en<br></b></font>
&nbsp;&nbsp;}&nbsp;<font color="#008822"><b>//&nbsp;end&nbsp;if</b></font>
<br>
&nbsp;&nbsp;ShutDown(0,&nbsp;NULL);&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Aufr&auml;umen<br></b></font>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;0;<br>
<br>
}<br>
<br>
<font color="#FFFFFF">
/*&nbsp;Resourcen&nbsp;freigeben&nbsp;*/<br></font>
<font color="#AA00FF"><b>void</b></font>&nbsp;ShutDown(<font color="#AA00FF"><b>int</b></font>&nbsp;code,&nbsp;<font color="#45FF65">STRPTR</font>&nbsp;error)<br>
{<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(GadToolsBase&nbsp;!=&nbsp;NULL)<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">FreeGadgets</font>(glist);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">CloseLibrary</font>((<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Library</font>&nbsp;*)GadToolsBase);<br>
&nbsp;&nbsp;}<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(mysc)&nbsp;<font color="#FFFFAA">UnlockPubScreen</font>(NULL,&nbsp;mysc);<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(textfont)&nbsp;<font color="#FFFFAA">CloseFont</font>(textfont);<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(<font color="#45FF65">IntuitionBase</font>&nbsp;!=&nbsp;NULL)&nbsp;<font color="#FFFFAA">CloseLibrary</font>((<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Library</font>&nbsp;*)<font color="#45FF65">IntuitionBase</font>);<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(error)<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Fehler:&nbsp;%s\n"</font>,&nbsp;error);<br>
&nbsp;&nbsp;}<br>
&nbsp;&nbsp;<font color="#852608"><b>exit</b></font>(code);<br>
<br>
}<br>
<br>
<br>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Gadget</font>&nbsp;*ErzeugeGadgets(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Gadget</font>&nbsp;**glistptr,&nbsp;<font color="#45FF65">UWORD</font>&nbsp;topborder)<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">NewGadget</font>&nbsp;ng;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Eine&nbsp;NewGadget&nbsp;Struktur<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Gadget</font>&nbsp;*gad;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Ein&nbsp;Zeiger&nbsp;auf&nbsp;die&nbsp;Gadget&nbsp;Liste<br></b></font>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;&nbsp;Der&nbsp;folgende&nbsp;Funktionsaufruf&nbsp;wird&nbsp;bei&nbsp;allen&nbsp;Programmen&nbsp;ben&ouml;tigt,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;welche&nbsp;die&nbsp;GadTools&nbsp;Library&nbsp;benutzen.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;gad&nbsp;=&nbsp;<font color="#FFFFAA">CreateContext</font>(glistptr);<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;NewGadget&nbsp;Struktur&nbsp;ausf&uuml;llen&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_TextAttr&nbsp;=&nbsp;&ta;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Schriftart<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_LeftEdge&nbsp;=&nbsp;(WIDTH/2)-50;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Abstand&nbsp;vom&nbsp;linken&nbsp;Rand<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_TopEdge&nbsp;=&nbsp;20&nbsp;+&nbsp;topborder;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Abstand&nbsp;vom&nbsp;oberen&nbsp;Rand<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_Width&nbsp;=&nbsp;120;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Breite<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_Height&nbsp;=&nbsp;18;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;H&ouml;he<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_GadgetText&nbsp;=&nbsp;<font color="#EEDD05">"Button&nbsp;1"</font>;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Text</b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_GadgetID&nbsp;=&nbsp;KNOPF_1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Nummer&nbsp;zur&nbsp;Identifizierung<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_Flags&nbsp;=&nbsp;0;<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;&nbsp;Jetzt&nbsp;wird&nbsp;das&nbsp;Gadget&nbsp;erzeugt&nbsp;und&nbsp;in&nbsp;die&nbsp;Gadget&nbsp;Liste&nbsp;eingetragen.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;BUTTON_KIND&nbsp;bezeichnet&nbsp;den&nbsp;Typ&nbsp;des&nbsp;Gadgets.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;gad&nbsp;=&nbsp;<font color="#FFFFAA">CreateGadget</font>(BUTTON_KIND,&nbsp;gad,&nbsp;&ng,&nbsp;TAG_DONE);<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;/*&nbsp;Zweiter&nbsp;Button&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_TopEdge&nbsp;+=&nbsp;30;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_GadgetText&nbsp;=&nbsp;<font color="#EEDD05">"Button&nbsp;2"</font>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_GadgetID&nbsp;=&nbsp;KNOPF_2;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;gad&nbsp;=&nbsp;<font color="#FFFFAA">CreateGadget</font>(BUTTON_KIND,&nbsp;gad,&nbsp;&ng,&nbsp;TAG_DONE);<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;/*&nbsp;Dritter&nbsp;Button&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_TopEdge&nbsp;+=&nbsp;30;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_GadgetText&nbsp;=&nbsp;<font color="#EEDD05">"Button&nbsp;3"</font>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ng.ng_GadgetID&nbsp;=&nbsp;KNOPF_3;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;gad&nbsp;=&nbsp;<font color="#FFFFAA">CreateGadget</font>(BUTTON_KIND,&nbsp;gad,&nbsp;&ng,&nbsp;TAG_DONE);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>(gad);<br>
}<br>
<br>
<br>
<font color="#AA00FF"><b>void</b></font>&nbsp;BehandleEvent(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Gadget</font>&nbsp;*gad)<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>switch</b></font>&nbsp;(gad->GadgetID)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>case</b></font>&nbsp;KNOPF_1:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Button&nbsp;1&nbsp;wurde&nbsp;angeklickt.\n"</font>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>break</b></font>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>case</b></font>&nbsp;KNOPF_2:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Button&nbsp;2&nbsp;wurde&nbsp;angeklickt.\n"</font>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>break</b></font>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>case</b></font>&nbsp;KNOPF_3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#852608"><b>printf</b></font>(<font color="#EEDD05">"Button&nbsp;3&nbsp;wurde&nbsp;angeklickt.\n"</font>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>break</b></font>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<font color="#008822"><b>//&nbsp;Ende&nbsp;der&nbsp;switch&nbsp;Verzweigung<br></b></font>
}<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>



</font>
</center>
</TD>
</TABLE>

</body>
</html>
