<html>
<head>
<title>Amiga C Kurs f&uuml;r Einsteiger</title>
<META NAME="description" CONTENT="Amiga C Kurs f&uuml;r Einsteiger">
<META NAME="keywords"    CONTENT="C, Amiga, Programmierung, Kurs, Einsteiger, StormC">
<META NAME="author"      CONTENT="Norman Walter">

<script language="JavaScript" src="JavaScript/C-Kurs_Kapitel.js" type="text/javascript">
</script>

</head>
<body bgcolor="black" link="#DDDDDD" vlink="#BBBBBB">
<center>
<TABLE>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="140">
<CENTER>
<A HREF="index.html" NAME="Home"><IMG SRC="Home.png" ALT="Home" BORDER="0"></A><BR>
<A HREF="download.html" NAME="Downloads"><IMG SRC="Download.png" ALT="Downloads" BORDER="0"></A><BR>
<A HREF="Links.html" NAME="Links"><IMG SRC="Links.png" ALT="Links" BORDER="0"></A><BR>
<a href="cgi-bin/GB_SHOW.cgi" method="POST"><img SRC="guestbook.png" BORDER=0 alt="Guestbook"></a>
<p>
<A HREF="http://www.norman-interactive.com/email_feedback.html">
<IMG SRC="@.png" Border="0" Alt="e-mail"><BR><small>e-mail</small></A><BR>
<p>

<img src="C-Kurs/C-Kurs_sm.png" alt="Amiga C Kurs f&uuml;r Einsteiger" vspace="20"><BR>

<NOSCRIPT>
<font color="red">
Diese Seite ben&ouml;tigt JavaScript.
Entweder Ihr Browser unterst&uuml;tzt kein JavaScript, oder Sie haben es deaktiviert.
</font>
</NOSCRIPT>

<SCRIPT LANGUAGE="JavaScript">
<!--

  erzeuge_Kapitel(8);

//-->
</SCRIPT>

<p>
</CENTER>
</TD>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="400" HEIGHT="600">
<center>
<p>
<BR>
<font color="white">

<img src="C-Kurs/C-Kurs.png" alt="Amiga C Kurs f&uuml;r Einsteiger"><BR>
</center>
<p>
<font color="gray"><H2>Colortables</H2></font><BR>
<p>
Wenn wir die Farbwerte der Pens einses <a href="C-Kurs_7_5.html">Screens</a> einstellen m&ouml;chten, gibt es verschiedene
M&ouml;glichkeiten. Eine davon ist, die <a href="C-Kurs_8_5.html">RGB Werte</a> der einzelnen Pens in ein bestimmtes
Array - eine sogenannte Colortable - zu schreiben. Dieses wird dann beim &Ouml;ffnen des
<a href="C-Kurs_7_5.html">Screens</a> in einem speziellen TagItem an die Funktion <TT>OpenScreenTags</TT> &uuml;bergeben.
Die Pens des neuen <a href="C-Kurs_7_5.html">Screens</a> sind dann automatisch auf die im Colortable angegebenen
Farbwerte eingestellt.
<p>
Man kann die <a href="C-Kurs_8_5.html">RGB Komponenten</a> der Farben entweder als 4 Bit oder 32 Bit Werte angeben.
In dieser Lektion sollen 32 Bit Werte verwendet werden.
<p>
Hier ein Beispiel f&uuml;r eine typische Colormap:

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;/*&nbsp;Die&nbsp;Farbtabelle&nbsp;ist&nbsp;ein&nbsp;Array&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;<font color="#45FF65">ULONG</font>&nbsp;colortable[]&nbsp;=<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16L&lt;&lt;16+0,&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;16&nbsp;Farben<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00000000,&nbsp;0x00000000,&nbsp;0x00000000,&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Schwarz<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xAAAAAAAA,&nbsp;0xAAAAAAAA,&nbsp;0xAAAAAAAA,&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Grau<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xFFFFFFFF,&nbsp;0xFFFFFFFF,&nbsp;0xFFFFFFFF,&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Wei&szlig;<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x66666666,&nbsp;0x88888888,&nbsp;0xBBBBBBBB,&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Blau-Grau<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00000000,&nbsp;0xFFFFFFFF,&nbsp;0xFFFFFFFF,&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;T&uuml;rkis<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xFFFFFFFF,&nbsp;0xFFFFFFFF,&nbsp;0x00000000,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xFFFFFFFF,&nbsp;0x00000000,&nbsp;0x00000000,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00000000,&nbsp;0xFFFFFFFF,&nbsp;0x00000000,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xFFFFFFFF,&nbsp;0x00000000,&nbsp;0xFFFFFFFF,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xAAAAAAAA,&nbsp;0x55555555,&nbsp;0x00000000,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xEEEEEEEE,&nbsp;0x77777777,&nbsp;0x44444444,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x44444444,&nbsp;0x55555555,&nbsp;0xAAAAAAAA,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x77777777,&nbsp;0x44444444,&nbsp;0xFFFFFFFF,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xEEEEEEEE,&nbsp;0x11111111,&nbsp;0x66666666,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x11111111,&nbsp;0x99999999,&nbsp;0x33333333,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x33333333,&nbsp;0xAAAAAAAA,&nbsp;0x66666666,<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00000000,&nbsp;&nbsp;<font color="#008822"><b>///&nbsp;Terminator&nbsp;<br></b></font>
&nbsp;&nbsp;&nbsp;};<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Eine Colortable ist ein Array vom Typ <TT>ULONG</TT> (ein <a href="C-Kurs_3_2.html">Synonym</a> f&uuml;r <a href="C-Kurs_Datentypen.html">unsigned long</a>).
Der erste Eintrag enth&auml;lt die Anzahl der angegebenen Farbwerte.
Dann folgen die Eintr&auml;ge f&uuml;r die Farbwerte der einzelnen Pens, beginnend mit Pen 0.
F&uuml;r jeden Pen werden drei 32 Bit Werte angegeben: <a href="C-Kurs_8_5.html">Die Rot- Gr&uuml;n- und Blaukomponente</a>
der gew&uuml;nschten Farbe. Der letzte Eintrag in einer Colortable ist der sogenannte Terminator
- ein Eintrag mit dem Wert 0, der das Ende der Tabelle markiert.
<p>
Um dem neuen <a href="C-Kurs_7_5.html">Screen</a> beim &Ouml;ffnen unsere Colortable mitzugeben, benutzen wir das TagItem
<TT>SA_Colors32, colortable</TT>. <TT>colortable</TT> ist dabei der Name
der zuvor festgelegten Colortable.

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;&Ouml;ffne&nbsp;neuen&nbsp;Screen&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bildschirm&nbsp;=&nbsp;<font color="#FFFFAA">OpenScreenTags</font>(NULL,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SA_LikeWorkbench,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Soll&nbsp;wie&nbsp;WB&nbsp;Screen&nbsp;sein<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SA_Colors32,&nbsp;colortable,&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Farben&nbsp;aus&nbsp;colortable&nbsp;&uuml;bernehmen<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Das folgende Beispielprogramm &ouml;ffnet einen <a href="C-Kurs_7_5.html">Screen</a> mit einem rahmenlosen, bildschirmf&uuml;llenden
Fenster. Das TagItem <TT>WA_RMBTrap, TRUE</TT> verhindert, da&szlig; die Men&uuml;leiste des <a href="C-Kurs_7_5.html">Screens</a>
erscheint, wenn der Benutzer den rechten Mausknopf dr&uuml;ckt. Der <a href="C-Kurs_7_5.html">Screen</a> ist dabei ein Klon des Workbench Screens.
Die Farben f&uuml;r die Pens werden aus der Colortable &uuml;bernommen.
Es wird eine farbenfrohe Spirale gezeichnet. Damit wir dabei zusehen k&ouml;nnen,
ist in der Funktion <TT>ZeichneSpirale</TT> eine kleine Zeitverz&ouml;gerung eingebaut.
<p>

<center>
<img src="C-Kurs/Spirale.png" alt="Spirale"><BR>
</center>

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
/*&nbsp;&nbsp;Listing&nbsp;8.8.1<br>
&nbsp;*&nbsp;&nbsp;Beispielprogramm&nbsp;f&uuml;r&nbsp;Colortables:<br>
&nbsp;*&nbsp;&nbsp;Eine&nbsp;farbenfrohe&nbsp;Spirale.<br>
&nbsp;*<br>
&nbsp;*/<br></font>
<br>
#include&nbsp;&lt;exec/types.h&gt;<br>
#include&nbsp;&lt;intuition/intuition.h&gt;<br>
#include&nbsp;&lt;graphics/gfx.h&gt;<br>
<br>
#include&nbsp;&lt;proto/intuition.h&gt;<br>
#include&nbsp;&lt;proto/graphics.h&gt;<br>
#include&nbsp;&lt;proto/dos.h&gt;<br>
#include&nbsp;&lt;proto/exec.h&gt;<br>
<br>
<font color="#FFFFFF">
/*&nbsp;Includes&nbsp;aus&nbsp;der&nbsp;Lektion&nbsp;"Polarkoordinaten"&nbsp;*/<br></font>
#include&nbsp;<font color="#EEDD05">"Polar.h"</font><br>
#include&nbsp;<font color="#EEDD05">"Polar.c"</font><br>
<br>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">IntuitionBase</font>&nbsp;&nbsp;*<font color="#45FF65">IntuitionBase</font>&nbsp;=&nbsp;NULL;<br>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">GfxBase</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<font color="#45FF65">GfxBase</font>&nbsp;=&nbsp;NULL;<br>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Screen</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*Bildschirm&nbsp;=&nbsp;NULL;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;Screen&nbsp;Struktur<br></b></font>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Window</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*Fenster&nbsp;=&nbsp;NULL;<br>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">RastPort</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*rp;<br>
<br>
<font color="#FFFFFF">
/*&nbsp;Makros&nbsp;*/<br></font>
#define&nbsp;Box(rp,x,y,r)&nbsp;<font color="#FFFFAA">RectFill</font>(rp,x-r,y-r,x+r,y+r)&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeichnet&nbsp;ein&nbsp;Quadrat<br></b></font>
#define&nbsp;MIN(a,b)&nbsp;((a&nbsp;&lt;&nbsp;b)&nbsp;?&nbsp;a&nbsp;:&nbsp;b)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Minimum&nbsp;von&nbsp;a,b<br></b></font>
<br>
<font color="#AA00FF"><b>void</b></font>&nbsp;ZeichneSpirale(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">RastPort</font>&nbsp;*rp,&nbsp;<font color="#AA00FF"><b>double</b></font>&nbsp;r,&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;xc,&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;yc);<br>
<br>
<font color="#AA00FF"><b>int</b></font>&nbsp;main(<font color="#AA00FF"><b>void</b></font>)<br>
{<br>
&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;width,height;<br>
&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>double</b></font>&nbsp;max_r;<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;/*&nbsp;Die&nbsp;Farbtabelle&nbsp;ist&nbsp;ein&nbsp;Array&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;<font color="#45FF65">ULONG</font>&nbsp;colortable[]&nbsp;=<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16L&lt;&lt;16+0,&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;16&nbsp;Farben<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00000000,&nbsp;0x00000000,&nbsp;0x00000000,&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Schwarz<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xAAAAAAAA,&nbsp;0xAAAAAAAA,&nbsp;0xAAAAAAAA,&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Grau<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xFFFFFFFF,&nbsp;0xFFFFFFFF,&nbsp;0xFFFFFFFF,&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Wei&szlig;<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x66666666,&nbsp;0x88888888,&nbsp;0xBBBBBBBB,&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Blau-Grau<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00000000,&nbsp;0xFFFFFFFF,&nbsp;0xFFFFFFFF,&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;T&uuml;rkis<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xFFFFFFFF,&nbsp;0xFFFFFFFF,&nbsp;0x00000000,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xFFFFFFFF,&nbsp;0x00000000,&nbsp;0x00000000,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00000000,&nbsp;0xFFFFFFFF,&nbsp;0x00000000,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xFFFFFFFF,&nbsp;0x00000000,&nbsp;0xFFFFFFFF,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xAAAAAAAA,&nbsp;0x55555555,&nbsp;0x00000000,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xEEEEEEEE,&nbsp;0x77777777,&nbsp;0x44444444,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x44444444,&nbsp;0x55555555,&nbsp;0xAAAAAAAA,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x77777777,&nbsp;0x44444444,&nbsp;0xFFFFFFFF,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xEEEEEEEE,&nbsp;0x11111111,&nbsp;0x66666666,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x11111111,&nbsp;0x99999999,&nbsp;0x33333333,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x33333333,&nbsp;0xAAAAAAAA,&nbsp;0x66666666,<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00000000,&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;Terminator&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;};<br>
<br>
&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;&Ouml;ffne&nbsp;Intuition&nbsp;Library<br></b></font>
&nbsp;&nbsp;&nbsp;<font color="#45FF65">IntuitionBase</font>&nbsp;=&nbsp;(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">IntuitionBase</font>&nbsp;*)&nbsp;<font color="#FFFFAA">OpenLibrary</font>(<font color="#EEDD05">"intuition.library"</font>,&nbsp;37L);<br>
&nbsp;&nbsp;&nbsp;<font color="#45FF65">GfxBase</font>&nbsp;=&nbsp;(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">GfxBase</font>&nbsp;*)&nbsp;<font color="#FFFFAA">OpenLibrary</font>(<font color="#EEDD05">"graphics.library"</font>,&nbsp;37L);<br>
<br>
&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(<font color="#45FF65">IntuitionBase</font>&nbsp;!=&nbsp;NULL)<br>
&nbsp;&nbsp;&nbsp;{<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;&Ouml;ffne&nbsp;neuen&nbsp;Screen&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bildschirm&nbsp;=&nbsp;<font color="#FFFFAA">OpenScreenTags</font>(NULL,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SA_LikeWorkbench,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Soll&nbsp;wie&nbsp;WB&nbsp;Screen&nbsp;sein<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SA_Colors32,&nbsp;colortable,&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Farben&nbsp;aus&nbsp;colortable&nbsp;&uuml;bernehmen<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(Bildschirm&nbsp;!=&nbsp;NULL)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;&nbsp;Wir&nbsp;&ouml;ffnen&nbsp;ein&nbsp;rahmenloses&nbsp;Fenster,&nbsp;welches&nbsp;den&nbsp;gesammten<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Screen&nbsp;ausf&uuml;llt<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br></font>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;H&ouml;he&nbsp;und&nbsp;Breite&nbsp;vom&nbsp;Screen&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width&nbsp;=&nbsp;Bildschirm->Width;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;=&nbsp;Bildschirm->Height;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fenster&nbsp;=&nbsp;<font color="#FFFFAA">OpenWindowTags</font>(NULL,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Width,&nbsp;width,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Height,&nbsp;height,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Borderless,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Rahmenlos<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_CustomScreen,&nbsp;Bildschirm,&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Auf&nbsp;welchen&nbsp;Screen<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_RMBTrap,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Rechten&nbsp;Maus&nbsp;Knopf&nbsp;abfangen<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Activate,&nbsp;TRUE,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp&nbsp;=&nbsp;Fenster->RPort;<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Maximalen&nbsp;Radius&nbsp;f&uuml;r&nbsp;Spirale&nbsp;ermitteln&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_r&nbsp;=&nbsp;(<font color="#AA00FF"><b>double</b></font>)MIN(width/2,height/2);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetRast</font>(rp,0L);<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Mauszeiger&nbsp;auf&nbsp;busy&nbsp;setzen&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetWindowPointer</font>(Fenster,WA_BusyPointer,TRUE,TAG_DONE);<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Grafik&nbsp;zeichnen&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZeichneSpirale(rp,max_r,&nbsp;width/2,&nbsp;height/2);<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Normaler&nbsp;Mauszeiger&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetWindowPointer</font>(Fenster,TAG_DONE);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<font color="#008822"><b>//&nbsp;end&nbsp;if<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">Delay</font>(250);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Warte&nbsp;5&nbsp;Sekunden<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(Fenster&nbsp;!=&nbsp;NULL)&nbsp;<font color="#FFFFAA">CloseWindow</font>(Fenster);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(Bildschirm&nbsp;!=&nbsp;NULL)&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Falls&nbsp;der&nbsp;Screen&nbsp;ge&ouml;ffnet&nbsp;werden&nbsp;konnte...<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">CloseScreen</font>(Bildschirm);&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Schlie&szlig;e&nbsp;Screen<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;}&nbsp;<font color="#008822"><b>//&nbsp;end&nbsp;if</font><br></b></font>
<br>
&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(<font color="#45FF65">GfxBase</font>&nbsp;!=&nbsp;NULL)&nbsp;<font color="#FFFFAA">CloseLibrary</font>((<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Library</font>&nbsp;*)&nbsp;<font color="#45FF65">GfxBase</font>);<br>
&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(<font color="#45FF65">IntuitionBase</font>&nbsp;!=&nbsp;NULL)&nbsp;<font color="#FFFFAA">CloseLibrary</font>((<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Library</font>&nbsp;*)&nbsp;<font color="#45FF65">IntuitionBase</font>);<br>
<br>
&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;0;<br>
}<br>
<br>
<font color="#FFFFFF">
/*&nbsp;&nbsp;Die&nbsp;Funktion&nbsp;ZeichneSpirale&nbsp;zeichnet&nbsp;eine&nbsp;Spirale&nbsp;um&nbsp;den&nbsp;Punkt<br>
&nbsp;*&nbsp;&nbsp;mit&nbsp;den&nbsp;Koordinaten&nbsp;xc/yc&nbsp;und&nbsp;dem&nbsp;maximalen&nbsp;Radius&nbsp;rmax&nbsp;in<br>
&nbsp;*&nbsp;&nbsp;den&nbsp;RastPort&nbsp;rp.<br>
&nbsp;*/<br></font>
<font color="#AA00FF"><b>void</b></font>&nbsp;ZeichneSpirale(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">RastPort</font>&nbsp;*rp,&nbsp;<font color="#AA00FF"><b>double</b></font>&nbsp;rmax,&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;xc,&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;yc)<br>
{<br>
&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>double</b></font>&nbsp;r,phi,xd,yd,alpha;<br>
&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;x,y;<br>
&nbsp;&nbsp;&nbsp;<font color="#45FF65">LONG</font>&nbsp;p,z;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Variablen&nbsp;f&uuml;r&nbsp;den&nbsp;Pen<br></b></font>
&nbsp;&nbsp;&nbsp;p=0;<br>
&nbsp;&nbsp;&nbsp;z=0;<br>
&nbsp;&nbsp;&nbsp;r=1.0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Startwert&nbsp;f&uuml;r&nbsp;den&nbsp;Radius<br></b></font>
&nbsp;&nbsp;&nbsp;phi=0.0;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Winkel<br></b></font>
&nbsp;&nbsp;&nbsp;alpha=2.0;&nbsp;<font color="#008822"><b>//&nbsp;Schrittweite&nbsp;f&uuml;r&nbsp;den&nbsp;Winkel<br></b></font>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;/*&nbsp;Schleife&nbsp;zum&nbsp;Zeichnen&nbsp;der&nbsp;Spirale&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>for</b></font>&nbsp;(phi=0.0;r&lt;=rmax;phi+=alpha)<br>
&nbsp;&nbsp;&nbsp;{<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Polarkoordinaten&nbsp;in&nbsp;kartesische&nbsp;Koordinaten&nbsp;umrechnen&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PolarKart(r,DEG2RAD(phi),xd,yd);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x=(<font color="#AA00FF"><b>int</b></font>)xd+xc;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y=(<font color="#AA00FF"><b>int</b></font>)yd+yc;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r+=0.25;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Radius&nbsp;vergr&ouml;&szlig;ern<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z++;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Z&auml;hler&nbsp;f&uuml;r&nbsp;den&nbsp;Pen&nbsp;erh&ouml;hen<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p=z%15;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Pen&nbsp;zwischen&nbsp;0&nbsp;und&nbsp;15&nbsp;ausw&auml;hlen<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetAPen</font>(rp,p);&nbsp;<font color="#008822"><b>//&nbsp;Pen&nbsp;ausw&auml;hlen<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Box(rp,x,y,5);&nbsp;<font color="#008822"><b>//&nbsp;Quadrat&nbsp;zeichnen<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">Delay</font>(1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;kurze&nbsp;Verz&ouml;gerung<br></b></font>
&nbsp;&nbsp;&nbsp;}<br>
<br>
}<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Beim Zeichnen der Spirale wird zur Umrechnung von <a href="C-Kurs_8_4.html">Polarkoordinaten</a>
in kartesische Koordinaten die Funktion <TT>PolarKart</TT> aus <TT>Polar.c</TT> verwendet.
Deshalb m&uuml;ssen die beiden Includes <TT>Polar.h</TT> und <TT>Polar.c</TT>
aus der Lektion <a href="C-Kurs_8_4.html">Polarkoordinaten</a> mit eingebunden werden.
Beide Dateien m&uuml;ssen im selben Verzeichnis wie der Quellcode des Programms sein.
<p>
In der Funktion <TT>ZeichneSpirale</TT> wird in jedem Schleifendurchlauf der
<a href="C-Kurs_1_7.html"><TT>for</TT> Schleife</a> ein neuer Pen ausgew&auml;hlt.
Dazu bedienen wir uns folgendem Trick: Die Variable <TT>z</TT> wird in jedem Schleifendurchlauf
um 1 hochgez&auml;hlt. Durch die <a href="C-Kurs_1_4.html">Modulo</a> Rechnung <TT>p=z%15</TT> wird sichergestellt, da&szlig;
die Zahl im Bereich unserer Colormap bleibt, d.h. die <a href="C-Kurs_1_2.html">Variable</a> <TT>p</TT> Werte
im Bereich von 0 bis 15 annimmt. Das funktioniert, weil eine beliebige nat&uuml;rliche
Zahl <a href="C-Kurs_1_4.html">Modulo</a> 15 immer in sogenannten Restklassen landet. Das bedeutet, da&szlig; wenn wir
eine nat&uuml;rliche Zahl durch 15 teilen, immer ein ganzzahliger Rest von mindestens 0 bis maximal 15
&uuml;brigbleibt.
<p>
Wer genau hinschaut, wird sehen, da&szlig; in diesem Beispiel auch die L&ouml;sung zu
<a href="C-Kurs_8_3.html">&Uuml;bung 8.2</a> versteckt ist.
<p>
</font>
</center>
</TD>

</TABLE>

</body>
</html>
