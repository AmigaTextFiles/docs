<html>
<head>
<title>Amiga C Kurs f&uuml;r Einsteiger</title>
<META NAME="description" CONTENT="Amiga C Kurs f&uuml;r Einsteiger">
<META NAME="keywords"    CONTENT="C, Amiga, Programmierung, Kurs, Einsteiger, StormC">
<META NAME="author"      CONTENT="Norman Walter">

<script language="JavaScript" src="JavaScript/C-Kurs_Kapitel.js" type="text/javascript">
</script>

</head>
<body bgcolor="black" link="#DDDDDD" vlink="#BBBBBB">
<center>
<TABLE>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="140">
<CENTER>
<A HREF="index.html" NAME="Home"><IMG SRC="Home.png" ALT="Home" BORDER="0"></A><BR>
<A HREF="download.html" NAME="Downloads"><IMG SRC="Download.png" ALT="Downloads" BORDER="0"></A><BR>
<A HREF="Links.html" NAME="Links"><IMG SRC="Links.png" ALT="Links" BORDER="0"></A><BR>
<a href="cgi-bin/GB_SHOW.cgi" method="POST"><img SRC="guestbook.png" BORDER=0 alt="Guestbook"></a>
<p>
<A HREF="http://www.norman-interactive.com/email_feedback.html">
<IMG SRC="@.png" Border="0" Alt="e-mail"><BR><small>e-mail</small></A><BR>
<p>

<img src="C-Kurs/C-Kurs_sm.png" alt="Amiga C Kurs f&uuml;r Einsteiger" vspace="20"><BR>

<NOSCRIPT>
<font color="red">
Diese Seite ben&ouml;tigt JavaScript.
Entweder Ihr Browser unterst&uuml;tzt kein JavaScript, oder Sie haben es deaktiviert.
</font>
</NOSCRIPT>

<SCRIPT LANGUAGE="JavaScript">
<!--

  erzeuge_Kapitel(8);

//-->
</SCRIPT>

<p>
</CENTER>
</TD>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="400" HEIGHT="600">
<center>
<p>
<BR>
<font color="white">

<img src="C-Kurs/C-Kurs.png" alt="Amiga C Kurs f&uuml;r Einsteiger"><BR>
</center>
<p>
<font color="gray"><H2>Grundlagen der Rastergrafik</H2></font><BR>
Auf CRT, TFT oder Plasma-Displays, wie sie heutzutage verwendet werden,
wird die Grafik auf einer 2-dimensionalen Fl&auml;che, der sogenannten
Pixel-Matrix dargestellt. Stellen Sie sich diese Pixel-Matrix der
Einfachheit halber wie ein karriertes Blatt Papier vor, auf dem Sie
die K&auml;stchen mit verschiedenen Farben ausmalen.
<p>
Die kleinste Einheit einer Rastergrafik (auch Bitmap genannt) ist der Pixel.
Das folgende Bild zeigt die Vergr&ouml;&szlig;erung eines Bildausschnitts einer Rastergrafik.
Das Bild wurde mit einer gew&ouml;hnlichen Fotokammera aufgenommen und anschlie&szlig;end
auf einer Photo CD digital verewigt. Zu Demonstrationszwecken habe ich das
Bild auf eine Web-taugliche Gr&ouml;&szlig;e heruntergerechnet.
<p>
<center>
<img src="C-Kurs/Rastergrafik.png">
</center>
<p>
In der Vergr&ouml;&szlig;erung des Ausschnitts k&ouml;nnen Sie die einzelnen Bildpunkte (Pixel)
erkennen, aus denen sich das Bild zusammensetzt.
<p>
Jetzt k&ouml;nnen Sie sich sicherlich leicht vorstellen, da&szlig; das Bild umso besser
aussieht, aus je mehr socher Bildpunkte sich dieses zusammensetzt.
Die Anzahl der Pixel wird Aufl&ouml;sung genannt. Meistens gibt man diese
Aufl&ouml;sung als Anzahl der Zeilen und Spalten der Pixelmatrix an, also
z.B. 640x480, 800x600, 1024x768, 1280x1024 usw. . Die Aufl&ouml;sung 640x480 hat also
insgesamt 307200 Pixel. Bei Digitalkameras wird die Aufl&ouml;sung auch h&auml;ufig in
Megapixel (= Millionen Pixel) angegeben. So hat z.B. die Aufl&ouml;sung 1280x1024
1310720 Pixel, also rund 1,3 Megapixel.
<p>
Auch bei 3D-Szenen, wie z.B. Raytracing-Bildern oder Ego-Shootern wird
die Grafik auf einer 2-dimensionalen Fl&auml;che dargestellt, da das Display
zur Darstellung auch nur eine 2-dimensionale Pixel-Matrix bietet.
<p>
Der Ursprung des Koordinatensystems ist bei Computergrafiken in der Regel
im oberen, linken Eck des Bildschirms oder Fensters.
<p>
<center>
<img src="C-Kurs/FensterKoordinaten.png"><BR>
</center>
<p>
Das oben gezeigte Fenster kennen Sie schon aus <a href="C-Kurs_7_2.html">Listing 7.2</a>.
Dieses Fenster hat eine Breite und H&ouml;he je von 300 Pixeln (Wertebereich 0-299).
Der Mittelpunkt dieses Fensters hat also die Koordinaten (149/149),
also X=149 und Y=149.
<p>
Manche Grafiksysteme, wie z.B. OpenGL weichen von dieser Regel ab und
nutzen ein Koordinatensystem, dessen Ursprung - wie von der Mathematik
gewohnt - unten links bzw. an einer frei w&auml;hlbaren Position liegt.
<p>
Fenster haben jeweils ein eigenes, vom Screen unabh&auml;ngiges Koordinatensystem.
<p>
Jedem Intuition-Fenster ist eine sogenannte <TT>RastPort</TT>
<a href="C-Kurs_3_3.html">Struktur</a> zugeordnet.
Diese <TT>RastPort</TT> <a href="C-Kurs_3_3.html">Struktur</a>
ist in der Header-Datei <TT>graphics/rastport.h</TT> definiert:

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">RastPort</font><br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>struct</b></font>&nbsp;&nbsp;Layer&nbsp;*Layer;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>struct</b></font>&nbsp;&nbsp;<font color="#45FF65">BitMap</font>&nbsp;&nbsp;&nbsp;*<font color="#45FF65">BitMap</font>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;UWORD&nbsp;&nbsp;*AreaPtrn;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;ptr&nbsp;to&nbsp;areafill&nbsp;pattern&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>struct</b></font>&nbsp;&nbsp;<font color="#45FF65">TmpRas</font>&nbsp;*<font color="#45FF65">TmpRas</font>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>struct</b></font>&nbsp;&nbsp;<font color="#45FF65">AreaInfo</font>&nbsp;*<font color="#45FF65">AreaInfo</font>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>struct</b></font>&nbsp;&nbsp;<font color="#45FF65">GelsInfo</font>&nbsp;*<font color="#45FF65">GelsInfo</font>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;UBYTE&nbsp;&nbsp;&nbsp;Mask;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;write&nbsp;mask&nbsp;for&nbsp;this&nbsp;raster&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;BYTE&nbsp;&nbsp;&nbsp;&nbsp;FgPen;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;foreground&nbsp;pen&nbsp;for&nbsp;this&nbsp;raster&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;BYTE&nbsp;&nbsp;&nbsp;&nbsp;BgPen;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;background&nbsp;pen&nbsp;&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;BYTE&nbsp;&nbsp;&nbsp;&nbsp;AOlPen;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;areafill&nbsp;outline&nbsp;pen&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;BYTE&nbsp;&nbsp;&nbsp;&nbsp;DrawMode;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;drawing&nbsp;mode&nbsp;for&nbsp;fill,&nbsp;lines,&nbsp;and&nbsp;text&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;BYTE&nbsp;&nbsp;&nbsp;&nbsp;AreaPtSz;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;2^n&nbsp;words&nbsp;for&nbsp;areafill&nbsp;pattern&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;BYTE&nbsp;&nbsp;&nbsp;&nbsp;linpatcnt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;current&nbsp;line&nbsp;drawing&nbsp;pattern&nbsp;preshift&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#45FF65">BYTE</font>&nbsp;&nbsp;&nbsp;&nbsp;dummy;<br>
&nbsp;&nbsp;&nbsp;&nbsp;UWORD&nbsp;&nbsp;Flags;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;miscellaneous&nbsp;control&nbsp;bits&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;UWORD&nbsp;&nbsp;LinePtrn;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;16&nbsp;bits&nbsp;for&nbsp;textured&nbsp;lines&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;WORD&nbsp;&nbsp;&nbsp;cp_x,&nbsp;cp_y;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;current&nbsp;pen&nbsp;position&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#45FF65">UBYTE</font>&nbsp;&nbsp;&nbsp;minterms[8];<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#45FF65">WORD</font>&nbsp;&nbsp;&nbsp;PenWidth;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#45FF65">WORD</font>&nbsp;&nbsp;&nbsp;PenHeight;<br>
&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;&nbsp;TextFont&nbsp;*Font;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;current&nbsp;font&nbsp;address&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;UBYTE&nbsp;&nbsp;&nbsp;AlgoStyle;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;the&nbsp;algorithmically&nbsp;generated&nbsp;style&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;UBYTE&nbsp;&nbsp;&nbsp;TxFlags;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;text&nbsp;specific&nbsp;flags&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;UWORD&nbsp;&nbsp;&nbsp;TxHeight;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;text&nbsp;height&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;UWORD&nbsp;&nbsp;&nbsp;TxWidth;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;text&nbsp;nominal&nbsp;width&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;UWORD&nbsp;&nbsp;&nbsp;TxBaseline;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;text&nbsp;baseline&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;WORD&nbsp;&nbsp;&nbsp;&nbsp;TxSpacing;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;text&nbsp;spacing&nbsp;(per&nbsp;character)&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#45FF65">APTR</font>&nbsp;&nbsp;&nbsp;&nbsp;*RP_User;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#45FF65">ULONG</font>&nbsp;&nbsp;&nbsp;longreserved[2];<br>
#ifndef&nbsp;GFX_RASTPORT_1_2<br>
&nbsp;&nbsp;&nbsp;&nbsp;UWORD&nbsp;&nbsp;&nbsp;wordreserved[7];&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;used&nbsp;to&nbsp;be&nbsp;a&nbsp;node&nbsp;*/<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;UBYTE&nbsp;&nbsp;&nbsp;reserved[8];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;for&nbsp;future&nbsp;use&nbsp;*/<br></font>
#endif<br>
};<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Stellen Sie sich die <TT>RastPort</TT> Struktur einfach wie eine rechteckige
Zeichenfl&auml;che vor.
<p>
Die <TT>Window</TT> Struktur (siehe <TT>intuition/intuition.h</TT>) enth&auml;lt
einen Zeiger, der auf die dem jeweiligen Fenster zugeh&ouml;rige <TT>RastPort</TT>
Struktur zeigt.

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
&nbsp;&nbsp;struct&nbsp;RastPort&nbsp;*RPort;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFFF">/*&nbsp;this&nbsp;Window's&nbsp;very&nbsp;own&nbsp;RastPort&nbsp;*/<br></font>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Um etwas in den <TT>RastPort</TT> eines Fensters zu zeichnen, verwendet
man sogenannte Grafikprimitiven. Die einfachste Grafikprimitive ist ein
Punkt, also ein Pixel. Die <TT>graphics.library</TT> enth&auml;lt die Funktion
<TT>WritePixel</TT>, die es erm&ouml;glicht, die Farbwerte einzelner Pixel
in einem bestimmten <TT>RastPort</TT> zu &auml;ndern.
<p>
Der Syntax der Funktion <TT>WritePixel</TT> ist:<BR>
<pre>
  <i>Fehler</i> = WritePixel([<i>rp</i>], [<i>x</i>], [<i>y</i>] );
</pre>
<BR>
<p>
Diese Funktion erwartet als ersten Eingabeparameter einen
<a href="C-Kurs_4_2.html">Zeiger auf eine Struktur</a> vom Typ <TT>RastPort</TT>
und dann die <i>x</i> und <i>y</i> Koordinaten (vom Typ <TT>SHORT</TT>) des Pixels, dessen
Farbwert ge&auml;ndert werden soll.
Der entsprechende Pixel wird dann auf dem Farbwert des zuvor mit
<TT>SetAPen</TT> eingestellten Pens ge&auml;ndert.
Falls der Pixel nicht ge&auml;ndert werden konnte, weil er zum Beispiel
au&szlig;erhalb des angegebenen <TT>RastPort</TT> liegt, gibt die Funktion
<TT>WritePixel</TT> den <TT>LONG</TT> Wert <TT>-1</TT> zur&uuml;ck,
sonst (d.h. im Erfolgsfall) <TT>0</TT>.
Die Verwendung von Pens (= Stiften) werden wir noch in einer anderen Lektion n&auml;her betrachten.
Stellen Sie sich einen Pen vorerst wie einen Buntstift vor, der eine
Bestimmte Farbe hat.
<p>
Die Funktion <TT>SetRast</TT> f&auml;rbt den gesammten <TT>RastPort</TT> im
Farbwert der angegebenen Pennummer. Diese Funktion k&ouml;nnen Sie z.B. zum
L&ouml;schen des Fensterinhalts verwenden.
<p>
Listing 8.1 zeigt die Verwendung der Funktion <TT>WritePixel</TT> anhand
des Sierpinski-Fraktals:

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
/*&nbsp;&nbsp;&nbsp;Listing&nbsp;8.1<br>
&nbsp;*&nbsp;&nbsp;&nbsp;Sierpinski-Fraktal<br>
&nbsp;*/<br></font>
<br>
#include&nbsp;&lt;exec/types.h&gt;<br>
#include&nbsp;&lt;exec/exec.h&gt;<br>
#include&nbsp;&lt;intuition/intuition.h&gt;<br>
#include&nbsp;&lt;graphics/gfx.h&gt;<br>
#include&nbsp;&lt;dos/dos.h&gt;<br>
#include&nbsp;&lt;stdlib.h&gt;<br>
<br>
#include&nbsp;&lt;proto/intuition.h&gt;<br>
#include&nbsp;&lt;proto/graphics.h&gt;<br>
#include&nbsp;&lt;proto/exec.h&gt;<br>
<br>
<font color="#FFFFFF">
/*&nbsp;&nbsp;Makro&nbsp;zur&nbsp;Erzeugung&nbsp;einer&nbsp;Zufallszahl<br>
&nbsp;*&nbsp;&nbsp;im&nbsp;Bereich&nbsp;min..max<br>
&nbsp;*/<br></font>
#define&nbsp;random(min,max)&nbsp;((<font color="#852608"><b>rand</b></font>()&nbsp;%&nbsp;((max+1)-min))+min)<br>
<br>
<font color="#008822"><b>//&nbsp;Symbolische&nbsp;Konstanten<br></b></font>
#define&nbsp;WIDTH&nbsp;400&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Breite&nbsp;des&nbsp;Fensters<br></b></font>
#define&nbsp;HEIGHT&nbsp;300&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;H&ouml;he&nbsp;des&nbsp;Fensters<br></b></font>
<br>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Window</font>&nbsp;*Fenster;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;Window-Struktur<br></b></font>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">IntuitionBase</font>&nbsp;*<font color="#45FF65">IntuitionBase</font>;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;IntuitionBase-Struktur<br></b></font>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">GfxBase</font>&nbsp;*<font color="#45FF65">GfxBase</font>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;GfxBase-Struktur<br></b></font>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">RastPort</font>&nbsp;*rp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;RastPort-Struktur<br></b></font>
<br>
<font color="#008822"><b>//&nbsp;Funktionsprototypen<br></b></font>
<font color="#AA00FF"><b>void</b></font>&nbsp;DrawSierpinski(<font color="#AA00FF"><b>void</b></font>);<br>
<br>
<font color="#AA00FF"><b>int</b></font>&nbsp;main(<font color="#AA00FF"><b>void</b></font>)<br>
{<br>
&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Intuition&nbsp;Library&nbsp;&ouml;ffnen<br></b></font>
&nbsp;&nbsp;<font color="#45FF65">IntuitionBase</font>&nbsp;=&nbsp;(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">IntuitionBase</font>&nbsp;*)&nbsp;<font color="#FFFFAA">OpenLibrary</font>(<font color="#EEDD05">"intuition.library"</font>,36L);<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(<font color="#45FF65">IntuitionBase</font>&nbsp;!=&nbsp;NULL)<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Graphics&nbsp;Library&nbsp;&ouml;ffnen<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#45FF65">GfxBase</font>&nbsp;=&nbsp;(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">GfxBase</font>&nbsp;*)&nbsp;<font color="#FFFFAA">OpenLibrary</font>(<font color="#EEDD05">"graphics.library"</font>,0L);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(<font color="#45FF65">GfxBase</font>&nbsp;!=&nbsp;NULL)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fenster&nbsp;mittels&nbsp;Tags&nbsp;&ouml;ffnen<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fenster&nbsp;=&nbsp;<font color="#FFFFAA">OpenWindowTags</font>(NULL,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Left,&nbsp;100,&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Abstand&nbsp;vom&nbsp;linken&nbsp;Rand<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Top,&nbsp;100,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Abstand&nbsp;vom&nbsp;oberen&nbsp;Rand<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Width,&nbsp;WIDTH,&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Breite<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Height,&nbsp;HEIGHT,&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;H&ouml;he<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Title,&nbsp;<font color="#EEDD05">"Sierpinski"</font>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fenstertitel<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_CloseGadget,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Close-Gadget<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_DragBar,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Ziehleiste<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_DepthGadget,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Depth-Gadgetn<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_GimmeZeroZero,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Ursprung&nbsp;0/0<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_IDCMP,&nbsp;IDCMP_CLOSEWINDOW,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Activate,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fenster&nbsp;aktivieren<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(Fenster&nbsp;!=&nbsp;NULL)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp&nbsp;=&nbsp;Fenster->RPort;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;rp&nbsp;zeigt&nbsp;auf&nbsp;RastPort&nbsp;des&nbsp;Fensters<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetRast</font>(rp,&nbsp;1L);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fensterinhalt&nbsp;l&ouml;schen<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetAPen</font>(rp,&nbsp;2L);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Farbe&nbsp;setzen<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DrawSierpinski();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fraktal&nbsp;zeichnen<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Auf&nbsp;Close-Gadget&nbsp;warten<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">Wait</font>(1L&nbsp;&lt;&lt;&nbsp;Fenster-&gt;UserPort-&gt;mp_SigBit);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">CloseWindow</font>(Fenster);&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fenster&nbsp;schlie&szlig;en<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<font color="#008822"><b>//&nbsp;end&nbsp;if<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<font color="#008822"><b>//&nbsp;end&nbsp;if<br></b></font>
<br>
&nbsp;&nbsp;}&nbsp;<font color="#008822"><b>//&nbsp;end&nbsp;if<br></b></font>
<br>
&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Libraries&nbsp;schlie&szlig;en<br></b></font>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(<font color="#45FF65">GfxBase</font>&nbsp;!=&nbsp;NULL)&nbsp;<font color="#FFFFAA">CloseLibrary</font>((<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Library</font>&nbsp;*)<font color="#45FF65">GfxBase</font>);<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(<font color="#45FF65">IntuitionBase</font>&nbsp;!=&nbsp;NULL)&nbsp;<font color="#FFFFAA">CloseLibrary</font>((<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Library</font>&nbsp;*)<font color="#45FF65">IntuitionBase</font>);<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;0;<br>
<br>
}<br>
<br>
<font color="#008822"><b>//&nbsp;Funktion&nbsp;zum&nbsp;Zeichnen&nbsp;des&nbsp;Sierpinski-Fraktals<br></b></font>
<font color="#AA00FF"><b>void</b></font>&nbsp;DrawSierpinski(<font color="#AA00FF"><b>void</b></font>)<br>
{<br>
&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;iterate;<br>
&nbsp;&nbsp;&nbsp;SHORT&nbsp;x1,&nbsp;y1,&nbsp;x2,&nbsp;y2;<br>
<br>
&nbsp;&nbsp;&nbsp;x1&nbsp;=&nbsp;x2&nbsp;=&nbsp;WIDTH/2;<br>
&nbsp;&nbsp;&nbsp;y1&nbsp;=&nbsp;y2&nbsp;=&nbsp;0;<br>
<br>
&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Schleife&nbsp;zum&nbsp;Iterieren&nbsp;und&nbsp;Zeichnen&nbsp;der&nbsp;Pixel<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>for</b></font>(iterate&nbsp;=&nbsp;0;&nbsp;iterate&nbsp;&lt;&nbsp;10000;&nbsp;iterate++)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zufallswerte&nbsp;erzeugen/<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>switch</b></font>&nbsp;(random(0,2))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>case</b></font>&nbsp;0:&nbsp;&nbsp;x1&nbsp;=&nbsp;(x2&nbsp;+&nbsp;WIDTH/2)&nbsp;/&nbsp;2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y1&nbsp;=&nbsp;y2&nbsp;/&nbsp;2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>break</b></font>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>case</b></font>&nbsp;1:&nbsp;&nbsp;x1&nbsp;=&nbsp;x2&nbsp;/&nbsp;2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y1&nbsp;=&nbsp;(y2&nbsp;+&nbsp;HEIGHT)&nbsp;/&nbsp;2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>break</b></font>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>case</b></font>&nbsp;2:&nbsp;&nbsp;x1&nbsp;=&nbsp;(x2&nbsp;+&nbsp;WIDTH)&nbsp;/&nbsp;2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y1&nbsp;=&nbsp;(y2&nbsp;+&nbsp;HEIGHT)&nbsp;/&nbsp;2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>break</b></font>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Amiga&nbsp;Graphik-Primitive<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">WritePixel</font>&nbsp;(rp,x1,&nbsp;y1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x2&nbsp;=&nbsp;x1;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y2&nbsp;=&nbsp;y1;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
}<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Wenn Sie die vorherigen Lektionen aufmerksam gelesen haben, werden
Sie das obige Programm sicherlich gr&ouml;&szlig;tenteils ohne weitere Erkl&auml;rung verstehen.
Die Funktion <TT>rand</TT> aus der <a href="C-Kurs_6_1.html">Standard-Definitionsdatei</a>
<TT>stdlib.h</TT> erzeugt eine Zufallszahl im Bereich von <TT>0</TT> bis <TT>RAND_MAX</TT>.
Unser kleines Makro dient dazu, den Bereich der erzeugten Zufallszahlen entsprechend
unseren Bed&uuml;rfnissen einzuschr&auml;nken.
<p>
Beachten Sie das <TT>TagItem</TT> <TT>WA_GimmeZeroZero, TRUE</TT>,
welches wir der Funktion <a href="C-Kurs_7_2.html"><TT>OpenWindowTags</TT></a>
übergeben. Es sorgt dafür, daß der Ursprung des Koordinatensystems des Fensters
im linken, oberen Eck des Fensters, direkt unter der Titelleiste beginnt.
Wenn man <TT>WA_GimmeZeroZero</TT> nicht angibt, ist der Ursprung des
Koordinatensystems (0/0) direkt am linken,oberen Eck innerhalb der
Titelleiste. Probieren Sie ruhig einmal aus, was passiert,
wenn Sie im obigen Code dieses <TT>TagItem</TT> weglassen.
<p>
<center>
<img src="C-Kurs/Sierpinski.png" alt="Sierpinski Fraktal">
</center>
<p>
</font>
</center>
</TD>
</TABLE>

</body>
</html>
