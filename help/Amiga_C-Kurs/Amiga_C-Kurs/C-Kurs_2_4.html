<html>
<head>
<title>Amiga C Kurs f&uuml;r Einsteiger</title>
<META NAME="description" CONTENT="Amiga C Kurs f&uuml;r Einsteiger">
<META NAME="keywords"    CONTENT="C, Amiga, Programmierung, Kurs, Einsteiger, StormC">
<META NAME="author"      CONTENT="Norman Walter">

<script language="JavaScript" src="JavaScript/C-Kurs_Kapitel.js" type="text/javascript">
</script>

</head>
<body bgcolor="black" link="#DDDDDD" vlink="#BBBBBB">
<center>
<TABLE>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="140">
<CENTER>
<A HREF="index.html" NAME="Home"><IMG SRC="Home.png" ALT="Home" BORDER="0"></A><BR>
<A HREF="download.html" NAME="Downloads"><IMG SRC="Download.png" ALT="Downloads" BORDER="0"></A><BR>
<A HREF="Links.html" NAME="Links"><IMG SRC="Links.png" ALT="Links" BORDER="0"></A><BR>
<a href="cgi-bin/GB_SHOW.cgi" method="POST"><img SRC="guestbook.png" BORDER=0 alt="Guestbook"></a>
<p>
<A HREF="http://www.norman-interactive.com/email_feedback.html">
<IMG SRC="@.png" Border="0" Alt="e-mail"><BR><small>e-mail</small></A><BR>
<p>

<img src="C-Kurs/C-Kurs_sm.png" alt="Amiga C Kurs f&uuml;r Einsteiger" vspace="20"><BR>

<NOSCRIPT>
<font color="red">
Diese Seite ben&ouml;tigt JavaScript.
Entweder Ihr Browser unterst&uuml;tzt kein JavaScript, oder Sie haben es deaktiviert.
</font>
</NOSCRIPT>

<SCRIPT LANGUAGE="JavaScript">
<!--

  erzeuge_Kapitel(2);

//-->
</SCRIPT>

<p>
</CENTER>
</TD>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="400" HEIGHT="600">
<center>
<p>
<BR>
<font color="white">

<img src="C-Kurs/C-Kurs.png" alt="Amiga C Kurs f&uul,r Einsteiger"><BR>
</center>
<p>
<font color="gray"><H2>Bedingte Compilierung</H2></font><BR>
<p>           
Mit dem Pr&auml;prozessor-Operator <TT>defined</TT> und den Pr&auml;prozessor-Direktiven <TT>#ifdef</TT> und <TT>#ifndef</TT>
k&ouml;nnen wir &uuml;berpr&uuml;fen, ob ein Makro bereits definiert wurde oder nicht.
<p>
Die Syntax des Operators <TT>defined</TT> ist:
<pre>
defined <i>(name)</i>
</pre>
<BR>
Der defined-Operator liefert den Wert 1 (wahr), falls f&uuml;r <i>name</i>
ein Makro mit <TT>#define</TT> definiert wurde. Dies kann auch in einer
anderen Datei geschehen sein, die mittels <TT>#include</TT> eingebunden
wurde. Eine Definition ist ebenfalls g&uuml;ltig, falls kein Ersatztext angegeben
wurde.
<p>
Meistens wird der defined-Operator zusammen mit der #if-Direktive verwendet.
<p>
Die allgemeine Syntax der #if-Direktive ist:
<pre>
#if <i>Ausdruck1</i>
   <i>[text1]</i>
[#elif <i>Ausdruck2</i>
   <i>text2]</i>

     ...
[#elif <i>Ausdruck(n)</i>
   <i>text(n)]</i>
[#else
   <i> text(n+1)]</i>
#endif
</pre>
<BR>
Die #if-Direktive wird f&uuml;r sogenannte bedingte Compilierung eingesetzt.
Dies erm&ouml;glicht z.B. auch die Anpassung an verschiedene Zielsysteme oder
Compiler ohne den Quelltext &auml;ndern zu m&uuml;ssen.
<p>
Die #if-Direktive funktioniert &auml;hnlich, wie wir es von der if-Verzweigung
schon kennen. Jede #if Direktive mu&szlig; mit einem #endif enden. Der Text
dazwischen geh&ouml;rt zur jeweiligen #if-Direktive. Das #else darf nur einmal
vorkommen. Davor k&ouml;nnen belibige #elif-Direktiven (<TT>#elif</TT> steht f&uuml;r "else if")
vorkommen.
<p>
Die Formulierung
<pre>
#if defined <i>name</i>
</pre>
<BR>
ist &auml;quivalent mit
<pre>
#ifdef <i>name</i>
</pre>
<BR>
Das Gegenteil davon ist <TT>#ifndef</TT>.
Die Syntax lautet hier:
<pre>
#ifndef <i>name</i>
</pre>
<BR>
Die Direktive <TT>#ifndef</TT> (= "if not defined") liefert den Wert 1 (= wahr),
wenn das Makro <i>name</i> nicht definiert wurde.
<p>
Ein klassisches Beispiel hierf&uuml;r finden wir z.B. in der Header-Datei
<TT>math.h</TT>:

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
#ifndef&nbsp;PI<br>
#define&nbsp;PI&nbsp;3.14159265358979323846<br>
#endif<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Das bedeutet folgendes: Falls die symbolische Kostante PI nicht bereits
vorher definiert wurde, dann definiere eine <a href="C-Kurs_2_1.html">symbolische Konstante</a> Namens
PI mit dem Ersatztext 3.14159265358979323846.
<p>
Dieses Prinzip k&ouml;nnen wir uns auch bei der <a href="C-Kurs_2_3.html">Modularisierung</a> zu Nutze machen.
Vor allem bei gr&ouml;&szlig;eren Projekten h&auml;ngen verschiedene Include-Dateien gegenseitig voneinander ab. Da kann
es schon einmal passieren, da&szlig; wir vergessen, eine bestimmte Datei mittels <TT>#include</TT> einzubinden,
oder wir binden Sie versehentlich mehrmals ein. Um dies zu vermeiden, k&ouml;nnen wir <a href="C-Kurs_2_1.html">symbolische Konstanten</a>
ohne Ersatztext verwenden, um uns zu merken, da&szlig; eine bestimmte Datei schon eingebunden wurde.
Als Beispiel ziehen wir wieder einmal unser Definitions- und Implementierungsmodul f&uuml;r Potenzen heran:

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
/*&nbsp;&nbsp;Potenzen.h<br>
&nbsp;*&nbsp;&nbsp;Funktionen&nbsp;zur&nbsp;Berechnung&nbsp;von&nbsp;Potenzen<br>
&nbsp;*&nbsp;&nbsp;Definitionsmodul:&nbsp;Enth&auml;lt&nbsp;die&nbsp;Funktionsprototypen<br>
&nbsp;*/<br></font>
<br>
<br>
#ifndef&nbsp;POTENZEN_H<br>
#define&nbsp;POTENZEN_H<br>
<br>
<font color="#FFFFFF">
/*&nbsp;&nbsp;Funktion&nbsp;zur&nbsp;Berechnung&nbsp;der&nbsp;Potenz<br>
&nbsp;*&nbsp;&nbsp;Parameter:&nbsp;basis&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Ganzzahl)<br>
&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exponent&nbsp;&nbsp;(Ganzzahl)<br>
&nbsp;*&nbsp;&nbsp;R&uuml;ckgabe:&nbsp;&nbsp;basis&nbsp;hoch&nbsp;exponent&nbsp;(Ganzzahl)<br>
&nbsp;*<br>
&nbsp;*&nbsp;&nbsp;Beispiel:&nbsp;&nbsp;2&nbsp;hoch&nbsp;3&nbsp;ergibt&nbsp;8<br>
&nbsp;*<br>
&nbsp;*/<br></font>
<font color="#AA00FF"><b>int</b></font>&nbsp;potenz(<font color="#AA00FF"><b>int</b></font>&nbsp;basis,&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;exponent);<br>
<br>
<font color="#FFFFFF">
/*&nbsp;&nbsp;Funktion&nbsp;zur&nbsp;Berechnung&nbsp;der&nbsp;Potenz<br>
&nbsp;*&nbsp;&nbsp;Parameter:&nbsp;basis&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Flie&szlig;kommazahl)<br>
&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exponent&nbsp;&nbsp;(Ganzzahl)<br>
&nbsp;*&nbsp;&nbsp;R&uuml;ckgabe:&nbsp;&nbsp;basis&nbsp;hoch&nbsp;exponent&nbsp;(Flie&szlig;kommazahl)<br>
&nbsp;*<br>
&nbsp;*&nbsp;&nbsp;Beispiel:&nbsp;&nbsp;0.5&nbsp;hoch&nbsp;3&nbsp;ergibt&nbsp;0.125<br>
&nbsp;*<br>
&nbsp;*/<br></font>
<font color="#AA00FF"><b>float</b></font>&nbsp;f_potenz(<font color="#AA00FF"><b>float</b></font>&nbsp;basis,&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;exponent);<br>
<br>
#endif<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

In unserer Header-Datei "Potenzen.h" fragen wir zuerst ab, ob bereits
eine <a href="C-Kurs_2_1.html">symbolische Konstante</a> Namens "POTENZEN_H" definiert wurde. Falls
nicht, definieren wir diese Konstante mit <TT>#define</TT>.
Beachten Sie bitte, da&szlig; das zur if-Direktive zugeh&ouml;rige <TT>#endif</TT>
hier erst am Ende der Datei vorkommt. Wenn die Datei "Potenzen.h" schon
irgendwo vorher mit <TT>#include</TT> eingef&uuml;gt wurde, dann wurde auch
die <a href="C-Kurs_2_1.html">symbolische Konstante</a> "POTENZEN_H" definiert. In diesem Fall wird
dann der gesamte Text (also auch alle Funktionsprototypen) nicht noch einmal
eingebunden.
<p>
In unserem Implementierungsmodul "Potenzen.c" k&ouml;nnen wir ebenfalls abfragen,
ob die <a href="C-Kurs_2_1.html">symbolische Konstante</a> "POTENZEN_H" schon definiert wurde. Falls nicht
(d.h. <TT>#ifndef POTENZEN_H</TT> liefert "wahr"), wurde das Definitionsmodul
"Potenzen.h", welches unsere Funktionsprototypen enth&auml;lt noch nicht eingebunden.
Dies w&auml;re z.B. der Fall, wenn wir in unserem Hauptprogramm die Zeile
<pre>
#include "Potenzen.h"
</pre>
<BR>
vergessen oder absichtlich weggelassen h&auml;tten.
In diesem Fall f&uuml;gen wir die Datei "Potenzen.h" mittels <TT>#include</TT> ein.

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
/*&nbsp;&nbsp;Potenzen.c<br>
&nbsp;*&nbsp;&nbsp;Funktionen&nbsp;zur&nbsp;Berechnung&nbsp;von&nbsp;Potenzen<br>
&nbsp;*&nbsp;&nbsp;Implementierungsmodul<br>
&nbsp;*/<br></font>
<br>
<br>
#ifndef&nbsp;POTENZEN_H<br>
#include&nbsp;<font color="#EEDD05">"Potenzen.h"</font><br>
#endif<br>
<br>
<font color="#FFFFFF">
/*&nbsp;&nbsp;Funktion&nbsp;zur&nbsp;Berechnung&nbsp;der&nbsp;Potenz<br>
&nbsp;*&nbsp;&nbsp;Parameter:&nbsp;basis&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Ganzzahl)<br>
&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exponent&nbsp;&nbsp;(Ganzzahl)<br>
&nbsp;*&nbsp;&nbsp;R&uuml;ckgabe:&nbsp;&nbsp;basis&nbsp;hoch&nbsp;exponent&nbsp;(Ganzzahl)<br>
&nbsp;*<br>
&nbsp;*&nbsp;&nbsp;Beispiel:&nbsp;&nbsp;2&nbsp;hoch&nbsp;3&nbsp;ergibt&nbsp;8<br>
&nbsp;*<br>
&nbsp;*/<br></font>
<font color="#AA00FF"><b>int</b></font>&nbsp;potenz(<font color="#AA00FF"><b>int</b></font>&nbsp;basis,&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;exponent)<br>
{<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;i,ergebnis;<br>
<br>
&nbsp;&nbsp;ergebnis&nbsp;=&nbsp;1;<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>for</b></font>&nbsp;(i=0;i&lt;exponent;i++)<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;ergebnis&nbsp;=&nbsp;ergebnis&nbsp;*&nbsp;basis;<br>
&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;ergebnis;<br>
<br>
}<br>
<br>
<font color="#FFFFFF">
/*&nbsp;&nbsp;Funktion&nbsp;zur&nbsp;Berechnung&nbsp;der&nbsp;Potenz<br>
&nbsp;*&nbsp;&nbsp;Parameter:&nbsp;basis&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Flie&szlig;kommazahl)<br>
&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exponent&nbsp;&nbsp;(Ganzzahl)<br>
&nbsp;*&nbsp;&nbsp;R&uuml;ckgabe:&nbsp;&nbsp;basis&nbsp;hoch&nbsp;exponent&nbsp;(Flie&szlig;kommazahl)<br>
&nbsp;*<br>
&nbsp;*&nbsp;&nbsp;Beispiel:&nbsp;&nbsp;0.5&nbsp;hoch&nbsp;3&nbsp;ergibt&nbsp;0.125<br>
&nbsp;*<br>
&nbsp;*/<br></font>
<font color="#AA00FF"><b>float</b></font>&nbsp;f_potenz(<font color="#AA00FF"><b>float</b></font>&nbsp;basis,&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;exponent)<br>
{<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>int</b></font>&nbsp;i;<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>float</b></font>&nbsp;ergebnis&nbsp;=&nbsp;1.0;<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>for</b></font>&nbsp;(i=0;i&lt;exponent;i++)<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;ergebnis&nbsp;=&nbsp;ergebnis&nbsp;*&nbsp;basis;<br>
&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;ergebnis;<br>
<br>
}<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>
Das hier beschriebene Verfahren werden Sie in den Header-Dateien der
Amiga System-Bibliotheken h&auml;ufig vorfinden.
<p>
</font>
</center>
</TD>
</TABLE>

</body>
</html>
