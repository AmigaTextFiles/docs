<html>
<head>
<title>Amiga C Kurs f&uuml;r Einsteiger</title>
<META NAME="description" CONTENT="Amiga C Kurs f&uuml;r Einsteiger">
<META NAME="keywords"    CONTENT="C, Amiga, Programmierung, Kurs, Einsteiger, StormC">
<META NAME="author"      CONTENT="Norman Walter">

<script language="JavaScript" src="JavaScript/C-Kurs_Kapitel.js" type="text/javascript">
</script>

</head>
<body bgcolor="black" link="#DDDDDD" vlink="#BBBBBB">
<center>
<TABLE>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="140">
<CENTER>
<A HREF="index.html" NAME="Home"><IMG SRC="Home.png" ALT="Home" BORDER="0"></A><BR>
<A HREF="download.html" NAME="Downloads"><IMG SRC="Download.png" ALT="Downloads" BORDER="0"></A><BR>
<A HREF="Links.html" NAME="Links"><IMG SRC="Links.png" ALT="Links" BORDER="0"></A><BR>
<a href="cgi-bin/GB_SHOW.cgi" method="POST"><img SRC="guestbook.png" BORDER=0 alt="Guestbook"></a>
<p>
<A HREF="http://www.norman-interactive.com/email_feedback.html">
<IMG SRC="@.png" Border="0" Alt="e-mail"><BR><small>e-mail</small></A><BR>
<p>

<img src="C-Kurs/C-Kurs_sm.png" alt="Amiga C Kurs f&uuml;r Einsteiger" vspace="20"><BR>

<NOSCRIPT>
<font color="red">
Diese Seite ben&ouml;tigt JavaScript.
Entweder Ihr Browser unterst&uuml;tzt kein JavaScript, oder Sie haben es deaktiviert.
</font>
</NOSCRIPT>

<SCRIPT LANGUAGE="JavaScript">
<!--

  erzeuge_Kapitel(8);

//-->
</SCRIPT>

<p>
</CENTER>
</TD>
<TD VALIGN="TOP" ALIGN="TOP" WIDTH="400" HEIGHT="600">
<center>
<p>
<BR>
<font color="white">

<img src="C-Kurs/C-Kurs.png" alt="Amiga C Kurs f&uuml;r Einsteiger"><BR>
</center>
<p>
<font color="gray"><H2>Licht, Farben und Pen-Sharing</H2></font><BR>
<p>

F&uuml;r die physikalische Beschreibung des Lichts gibt es zwei unterschiedliche Theorien:
Die <i>Lichtquantentheorie</i>, die das Licht als Teilchen (Lichtquanten) beschreibt und
die Beschreibung des Lichts als <i>elektromagnetische Welle</i>.
Diese Zweigleisigkeit wurde mit dem Begriff <i>Welle-Teilchen-Dualismus</i> belegt.
Je nach Anwendung kann man das Licht also als Teilchenstrom oder als elektromagnetische
Welle interpretieren.
<p>
F&uuml;r diese Lektion wollen wir die Interpretation des Lichts als elektromagnetische Welle
heranziehen. Hierzu f&uuml;hren wir den Begriff der Wellenl&auml;nge (mit dem griechischen Buchstaben Lambda bezeichnet)
ein. Im Bild unten ist eine Sinusschwingung abgebildet. Die Wellenl&auml;nge Lambda ist der Abstand
zweier aufeinanderfolgender gleichartiger Zust&auml;nde. In unserem Beispiel haben wir den Abstand
zweier aufeinanderfolgender Maxima markiert.
<p>
<center>
<img src="C-Kurs/Lambda.png" alt="Wellenl&auml;nge"><BR>
</center>

<p>
Wenn wir von sichtbarem Licht reden meinen wir damit den vom menschlichen Auge wahrnehmbaren
Bereich des elektromagnetischen Spektrums. Dieser Bereich beginnt bei einer Wellenl&auml;nge von
380 Nanometer (violett) und endet bei 780 Nanometer (rot).
<p>

<center>
<img src="C-Kurs/Farbspektrum.png" alt="Farbspektrum"><BR>
</center>

<p>
In der Netzhaut des menschlichen Auges sind Sinneszellen - die sogenannte St&auml;bchen und Zapfen -
eingebettet. Diese Sinneszellen reagieren auf Licht und produzieren elektrische Signale,
die zun&auml;chst von einem sich direkt im Auge befindlichen bioneuralen Netzwerk
(also einem kleinen Biocomputer) vorverarbeitet und dann &uuml;ber den Sehnerv zum Gehirn
weitergeleitet werden. Es gibt drei unterschiedliche Typen von Zapfen,
die f&uuml;r rot, gr&uuml;n oder blau empfindlich sind. Die St&auml;bchen sind farbunt&uuml;chtig, daf&uuml;r aber
wesentlich lichtempfindlicher. Dies ist auch der Grund, warum wir Nachts keine Farben wahrnehmen k&ouml;nnen.
<p>
Die technische Umsetzung der Farbwahrnehmung im menschlichen Auge f&uuml;hrt uns direkt zum
sogenannten RGB-Farbschema. Danach wird ein Farbwert mittels seiner Rot- Gr&uuml;n- und Blauanteile
angegeben. Um das RGB-Farbschema zu verdeutlichen, stellen Sie sich einmal folgendes Experiment vor:
Eine rote, eine gr&uuml;ne und eine blaue Lampe strahlen gleichzeitig auf eine Leinwand, so da&szlig; sich
die Lichtkegel &uuml;berlagern. An den Stellen, an denen sich die Lichtkegel &uuml;berdecken werden
Mischfarben erzeugt, wie das folgende Bild schematisch zeigt:

<p>

<center>
<img src="C-Kurs/RGB.png" alt="RGB Farbschema"><BR>
</center>

<p>

An der Stelle, an der sich alle drei Lichtkegel &uuml;berdecken wird wei&szlig;es Licht von der Leinwand zur&uuml;ckgeworfen.

<p>

Computermonitore und Fernseher arbeiten ebenfalls nach dem RGB-Prinzip. Sie besitzen winzige
Leuchtpunkte in den drei Grundfarben Rot, Gr&uuml;n und Blau. Aus ausreichendem Abstand betrachtet
kann das menschliche Auge diese Bildpunkte nicht mehr unterscheiden. Dadurch k&ouml;nnen dann auch
die entsprechenden Mischfarben wahrgenommen werden.

<p>

Wie in den vorherigen Lektionen bereits erw&auml;hnt wurde, benutzt Intuition sogenannte Pens (= Stifte),
die man sich wie einen Satz Buntstifte vorstellen kann. Je nach Farbtiefe des Screens werden bis zu 256
Stifte zur Verf&uuml;gung gestellt. Mit AmigaOS 3.0 wurde das Konzept des Pen-Sharing eingef&uuml;hrt.
Das bedeutet, da&szlig; sich verschiedene Anwendungen, die auf dem selben Screen laufen, einen
Satz von Pens teilen k&ouml;nnen.

<p>

Die Funktion <TT>ObtainBestPen</TT> sucht den am besten zum angegebenen Farbwert passenden
Pen des Screens heraus. Die Funktion erwartet als Eingabeparameter ein <TT>TagItem</TT>,
welches aus den Komponenten Colormap, Rotanteil, Gr&uuml;nanteil, Blauanteil und Pr&auml;zision
besteht. Der R&uuml;ckgabewert ist die Nummer passenden Stiftes in der angegebenen Colormap
als <TT>LONG</TT> Wert. Dabei ver&auml;ndert die Funktion <TT>ObtainBestPen</TT> die Farbpalette
des Screens nicht.

<p>

Hier ein kleines Beispiel f&uuml;r die Farbe Magenta:

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;magenta_pen&nbsp;=&nbsp;<font color="#FFFFAA">ObtainBestPen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xFFFFFFFF,0x00000000,0xFFFFFFFF,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OBP_Precision,PRECISION_EXACT,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>
<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

In diesem Beispiel ist <TT>Fenster</TT> ein <a href="C-Kurs_4_2.html">Zeiger</a> auf ein Fenster,
<TT>-&gt;WScreen-&gt;ViewPort.ColorMap</TT> bezeichnet dabei einen Zeiger auf
die <TT>ColorMap</TT> (die Farbpalette) des Workbenchscreens.
F&uuml;r die Farbe Magenta setzen wir den Rot- und Blauanteil jeweils auf das Maximum
(32 Bit hexadezimal 0xFFFFFFFF), der Gr&uuml;nanteil wird auf Null gesetzt.
Die angegebenen Werte sind auch aus dem oben abgebildeten Schema der &uuml;berlagerten Lichtkegel
ersichtlich: Dort wo sich nur der rote und der blaue Lichtkegel &uuml;berlagern entsteht die
Mischfarbe Magenta.
Als Pr&auml;zision sind <TT>PRECISION_GUI</TT>, <TT>PRECISION_ICON</TT>, <TT>PRECISION_IMAGE</TT>
und <TT>PRECISION_EXACT</TT> erlaubt. Die Qualit&auml;t des Ergebnises h&auml;ngt nat&uuml;rlich auch stark
davon ab, wieviele Pens auf dem angegebenen Screen frei sind.

<p>

Es folgt ein einfaches Beispielprogramm, in dem wir das RGB-Farbschema und Pen-Sharing anwenden:

<p>
<center>
<TABLE border="0" cellpadding="5" cellspacing="0" bgcolor="#AAAAAA"><TR>
<TD>
<!-- begin of C code -->
<font color="#FFFFFF">
/*&nbsp;&nbsp;Listing&nbsp;8.5.1<br>
&nbsp;*&nbsp;&nbsp;RGB-Demo<br>
&nbsp;*<br>
&nbsp;*/<br></font>
<br>
#include&nbsp;&lt;exec/types.h&gt;<br>
#include&nbsp;&lt;exec/exec.h&gt;<br>
#include&nbsp;&lt;intuition/intuition.h&gt;<br>
#include&nbsp;&lt;graphics/gfx.h&gt;<br>
#include&nbsp;&lt;dos/dos.h&gt;<br>
<br>
#include&nbsp;&lt;proto/intuition.h&gt;<br>
#include&nbsp;&lt;proto/graphics.h&gt;<br>
#include&nbsp;&lt;proto/dos.h&gt;<br>
#include&nbsp;&lt;proto/exec.h&gt;<br>
<br>
<font color="#008822"><b>//&nbsp;Symbolische&nbsp;Konstanten<br></b></font>
#define&nbsp;WIDTH&nbsp;300&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Breite&nbsp;des&nbsp;Fensters<br></b></font>
#define&nbsp;HEIGHT&nbsp;200&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;H&ouml;he&nbsp;des&nbsp;Fensters<br></b></font>
<br>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Window</font>&nbsp;*Fenster;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;Window-Struktur<br></b></font>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">IntuitionBase</font>&nbsp;*<font color="#45FF65">IntuitionBase</font>;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;IntuitionBase-Struktur<br></b></font>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">GfxBase</font>&nbsp;*<font color="#45FF65">GfxBase</font>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;GfxBase-Struktur<br></b></font>
<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">RastPort</font>&nbsp;*rp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Zeiger&nbsp;auf&nbsp;RastPort-Struktur<br></b></font>
<br>
<font color="#008822"><b>//&nbsp;Variablen&nbsp;f&uuml;r&nbsp;die&nbsp;verschiedenen&nbsp;Pens<br></b></font>
<font color="#45FF65">LONG</font>&nbsp;red_pen,green_pen,blue_pen,white_pen,yellow_pen,magenta_pen,cyan_pen;<br>
<br>
<font color="#AA00FF"><b>int</b></font>&nbsp;main(<font color="#AA00FF"><b>void</b></font>)<br>
{<br>
<br>
&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Intuition&nbsp;Library&nbsp;&ouml;ffnen<br></b></font>
&nbsp;&nbsp;<font color="#45FF65">IntuitionBase</font>&nbsp;=&nbsp;(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">IntuitionBase</font>&nbsp;*)&nbsp;<font color="#FFFFAA">OpenLibrary</font>(<font color="#EEDD05">"intuition.library"</font>,36L);<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(<font color="#45FF65">IntuitionBase</font>&nbsp;!=&nbsp;NULL)<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Graphics&nbsp;Library&nbsp;&ouml;ffnen<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#45FF65">GfxBase</font>&nbsp;=&nbsp;(<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">GfxBase</font>&nbsp;*)&nbsp;<font color="#FFFFAA">OpenLibrary</font>(<font color="#EEDD05">"graphics.library"</font>,37L);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fenster&nbsp;mittels&nbsp;Tags&nbsp;&ouml;ffnen<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;Fenster&nbsp;=&nbsp;<font color="#FFFFAA">OpenWindowTags</font>(NULL,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Left,&nbsp;100,&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Abstand&nbsp;vom&nbsp;linken&nbsp;Rand<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Top,&nbsp;100,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Abstand&nbsp;vom&nbsp;oberen&nbsp;Rand<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Width,&nbsp;WIDTH,&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Breite<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Height,&nbsp;HEIGHT,&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;H&ouml;he<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Title,&nbsp;<font color="#EEDD05">"RGB-Demo"</font>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fenstertitel<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_ScreenTitle,&nbsp;<font color="#EEDD05">"RGB-Demo"</font>,&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Screen-Titel<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_CloseGadget,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Close-Gadget<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_DragBar,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Ziehleiste<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_DepthGadget,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Depth-Gadget<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_GimmeZeroZero,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Ursprung&nbsp;0/0<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_IDCMP,&nbsp;IDCMP_CLOSEWINDOW,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_Activate,&nbsp;TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fenster&nbsp;aktivieren<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(Fenster&nbsp;!=&nbsp;NULL)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp&nbsp;=&nbsp;Fenster->RPort;<br>
<br>
<font color="#FFFFFF">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;&nbsp;Hier&nbsp;suchen&nbsp;wir&nbsp;mittels&nbsp;ObtainBestPen&nbsp;den&nbsp;jeweils&nbsp;am&nbsp;besten<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;zum&nbsp;angegebenen&nbsp;RGB-Wert&nbsp;passenden&nbsp;Pen&nbsp;aus&nbsp;den&nbsp;Stiften&nbsp;des<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;aktuellen&nbsp;Screens&nbsp;aus.&nbsp;Die&nbsp;Werte&nbsp;f&uuml;r&nbsp;den&nbsp;Rot-&nbsp;Gr&uuml;n-&nbsp;und<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Blauanteil&nbsp;geben&nbsp;wir&nbsp;dabei&nbsp;in&nbsp;Hexadezimaldarstellung&nbsp;an.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;red_pen&nbsp;=&nbsp;<font color="#FFFFAA">ObtainBestPen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xFFFFFFFF,0x00000000,0x00000000,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OBP_Precision,PRECISION_EXACT,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;green_pen&nbsp;=&nbsp;<font color="#FFFFAA">ObtainBestPen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00000000,0xFFFFFFFF,0x00000000,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OBP_Precision,PRECISION_EXACT,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blue_pen&nbsp;=&nbsp;<font color="#FFFFAA">ObtainBestPen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00000000,0x00000000,0xFFFFFFFF,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OBP_Precision,PRECISION_EXACT,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;white_pen&nbsp;=&nbsp;<font color="#FFFFAA">ObtainBestPen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OBP_Precision,PRECISION_EXACT,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yellow_pen&nbsp;=&nbsp;<font color="#FFFFAA">ObtainBestPen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xFFFFFFFF,0xFFFFFFFF,0x00000000,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OBP_Precision,PRECISION_EXACT,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;magenta_pen&nbsp;=&nbsp;<font color="#FFFFAA">ObtainBestPen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0xFFFFFFFF,0x00000000,0xFFFFFFFF,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OBP_Precision,PRECISION_EXACT,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cyan_pen&nbsp;=&nbsp;<font color="#FFFFAA">ObtainBestPen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00000000,0xFFFFFFFF,0xFFFFFFFF,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OBP_Precision,PRECISION_EXACT,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG_DONE);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetRast</font>(rp,&nbsp;1L);&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fensterinhalt&nbsp;l&ouml;schen<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Farbbalken&nbsp;zeichnen<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetAPen</font>(rp,red_pen);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">RectFill</font>(rp,10,10,WIDTH-20,20);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetAPen</font>(rp,green_pen);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">RectFill</font>(rp,10,30,WIDTH-20,40);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetAPen</font>(rp,blue_pen);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">RectFill</font>(rp,10,50,WIDTH-20,60);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetAPen</font>(rp,white_pen);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">RectFill</font>(rp,10,70,WIDTH-20,80);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetAPen</font>(rp,yellow_pen);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">RectFill</font>(rp,10,90,WIDTH-20,100);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetAPen</font>(rp,magenta_pen);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">RectFill</font>(rp,10,110,WIDTH-20,120);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">SetAPen</font>(rp,cyan_pen);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">RectFill</font>(rp,10,130,WIDTH-20,140);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Auf&nbsp;Close-Gadget&nbsp;warten<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">Wait</font>(1L&nbsp;&lt;&lt;&nbsp;Fenster-&gt;UserPort-&gt;mp_SigBit);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Die&nbsp;Pens&nbsp;wieder&nbsp;freigeben<br></b></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">ReleasePen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,red_pen);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">ReleasePen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,green_pen);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">ReleasePen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,blue_pen);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">ReleasePen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,white_pen);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">ReleasePen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,yellow_pen);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">ReleasePen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,magenta_pen);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">ReleasePen</font>(Fenster->WScreen-><font color="#45FF65">ViewPort</font>.<font color="#45FF65">ColorMap</font>,cyan_pen);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#FFFFAA">CloseWindow</font>(Fenster);&nbsp;&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Fenster&nbsp;schlie&szlig;en<br></b></font>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<font color="#008822"><b>//&nbsp;end&nbsp;if<br></b></font>
<br>
&nbsp;&nbsp;}&nbsp;<font color="#008822"><b>//&nbsp;end&nbsp;if<br></b></font>
<br>
&nbsp;&nbsp;<font color="#008822"><b>//&nbsp;Libraries&nbsp;schlie&szlig;en<br></b></font>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(<font color="#45FF65">GfxBase</font>&nbsp;!=&nbsp;NULL)&nbsp;<font color="#FFFFAA">CloseLibrary</font>((<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Library</font>&nbsp;*)<font color="#45FF65">GfxBase</font>);<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>if</b></font>&nbsp;(<font color="#45FF65">IntuitionBase</font>&nbsp;!=&nbsp;NULL)&nbsp;<font color="#FFFFAA">CloseLibrary</font>((<font color="#AA00FF"><b>struct</b></font>&nbsp;<font color="#45FF65">Library</font>&nbsp;*)<font color="#45FF65">IntuitionBase</font>);<br>
<br>
&nbsp;&nbsp;<font color="#AA00FF"><b>return</b></font>&nbsp;0;<br>
<br>
}<br>

<!-- end of C code -->

</TD>
</TR>
</TABLE>
</center>
<BR>
<p>

Wie bei unseren vorherigen Beispielprogrammen nutzen wir auch hier die Funktion
<TT>SetAPen</TT> um die Zeichenfarbe einzustellen. Diesmal &uuml;bergeben wir den
zuvor von <TT>ObtainBestPen</TT> ermittelten <TT>LONG</TT> Wert als Parameter.
Alle folgenden <a href="C-Kurs_8_2.html">Grafikprimitiven</a> werden dann mit
dem Farbwert der angegebenen Stiftnummer gezeichnet, bis mit <TT>SetAPen</TT>
wieder ein anderer Pen gesetzt wird.

<p>

Vergessen Sie nicht, vor dem Beenden eines Programms die angeforderten Pens wieder
mittels <TT>ReleasePen</TT> freizugeben.

<p>

Listing 8.6 zeichnet mittels <a href="C-Kurs_8_2.html"><TT>RectFill</TT></a> Balken in verschiedenen Farben:

<p>

<center>
<img src="C-Kurs/RGB-Demo.png" alt="RGB-Demo"><BR>
</center>

<p>

Neben RGB gibt es auch noch das vor allem bei Farbdruckern
verwendete CMY-Farbschema, sowie das HSF-Farbschema.
Darauf wollen wir aber hier nicht weiter eingehen.

<p>

</font>
</center>
</TD>

</TABLE>

</body>
</html>
