@DATABASE "ADB13"
@INDEX "ADB:Misc/Index.Text/Main"
@HELP "ADB:Misc/Help/Main"
@NODE "Main" "AmigaDOS For Beginners - Part 13 - The LIST Command"

@{B}@{U}@{JCENTER}AMIGADOS FOR BEGINNERS

BY FRANK BUNTON

@{" COPYRIGHT © FRANK P. BUNTON 1993-1998 " LINK "ADB:Misc/Read_Me_First!!/Copyright"}

PART 13 - THE LIST COMMAND@{UB}@{UU}
@{JLEFT}

@{B}Location@{UB}     - "c" directory (all versions)

@{B}Purpose@{UB}      - To list files and directories with more information than
               is available form the "DIR" command.

@{B}Availability@{UB} - All AmigaDOS Versions
@{JCENTER}

@{" General Usage                     " LINK "General"}
@{" Options for LIST                  " LINK "Options"}
@{" The LFORMAT Option                " LINK "LFormat"}
@{" Options Used With LFORMAT         " LINK "LFOptions"}
@{"   Comparison of %f and %p Options " LINK "Paths"}
@{"   Display given by %s Option      " LINK "%s"}


@{JCENTER}=== End of Text ===
@{JLEFT}
@ENDNODE

@NODE "General" "Part 13 - The LIST Command - General Usage"

@{B}@{U}General Comments on LIST@{UB}@{UU}

The LIST command is somewhat similar to DIR but has the following
differences:-

* "DIR" shows:-
   - all directories first
   - all files in alphabetical order
* "LIST":-
   - does not give directories first
   - does not sort alphabetically
     (but see "Alphabetising the list" in the article @{"SORT" LINK "ADB:Parts_11-20/14.Sort/Alpha"}).
   - gives a lot more information about the contents of the directory.
   - allows far more options than does "DIR".

To see the contents of the current directory you enter:-

  > LIST

(There are also some @{"options" LINK "Options"} that can be used with LIST.)

To see the contents of a particular directory, you enter one of:-

  > LIST dirname
  > LIST path/dirname

to see to see the details about a particular file, you enter one of:-

  > LIST filename
  > LIST path/filename

For example, to see the contents of the directory "letters" on the disk
in "df1:", enter:-

  > LIST df1:letters

To see details of a file "letter-1" in the sub directory "personal" within
the "letters" directory, enter:-

  > LIST df1:letters/personal/letter-1

The output of "LIST" may look something like this:

  Directory "df1:" on Thursday 18-Feb-96
  letters                     Dir ----rwed  13-May-96  18:06:03
  letters.info                894 ----rwed  13-May-96  18:16:15
  c                           Dir ----rwed  Yesterday  18:16:10
  Filename-1                22345 ----rwed  Today      19:22:44
  :this is a file note or comment for Filename-1
  Filename-2                 1429 ----rwed  Friday     08:09:03
  Filename-3                Empty ----rwed  22-Feb-96  23:59:59
  03 files - 2 directories - 139 blocks used

(Note - v1.2 and earlier users will see "rwed" instead of "----rwed")

If you enter "LIST" on its own to look at the current directory then the
first line (Directory "df1:" etc.) is not shown. If you specify the path,
then this top line is included.

The final line, which shows the number of files and directories and @{"blocks" LINK "ADB:Misc/Glossary/FileSystem"19}
is given for the use of LIST with and without the directory name.

If a file has a @{"`comment' or `filenote'" LINK "ADB:Misc/Glossary/filenotes"} attached then that comment is
displayed immediately below the file name as in "filename-1" above.

In the various columns, first comes the name of the file or directory
followed by "DIR" for directories or, for files, its size in bytes.
Occasionally a file may have "empty" here indicating that there is a file
name with no contents.

Next comes the @{"protection bits" LINK "ADB:Misc/Glossary/ProtBits"}. The files shown above all have protection
bits indicating that the items are readable (r), writable (w), executable
(e) or deletable (d). These will be explained in the article @{"PROTECT" LINK "ADB:Parts_21-30/23.Protect/Bits"}.

Finally comes the date and time the item was written to disk. Note that, if
it was within the last week, this will show the actual day. It can also
show "tomorrow" or "future" if your clock is set to an old date!

@{JCENTER}=== End of Text ===
@{JLEFT}








@ENDNODE

@NODE "Options" "Part 13 - The LIST Command - Options"

@{B}@{U}LIST Options@{UB}@{UU}

There are a number of options available with LIST. I have set them out
in the order in which they became available in various versions of
AmigaDOS.

@{B}Options in ALL versions of AmigaDOS from v1.2 onwards:-@{UB}

@{B}QUICK@{UB}    - lists names of file only

@{B}DATES@{UB}    - shows actual dates instead of Today, Monday, etc.

@{B}NODATES@{UB}  - no dates at all shown

@{B}SINCE@{UB}    - only lists files with a date on or after the specified date.
           E.g.:-

            > LIST SINCE 01-Dec-95

           would only show files with a date stamp @{B}on or after@{UB} 01-Dec-95

@{B}UPTO @{UB}    - only gives files with a date stamp up to or including specified
           date. E.g.:-

            > LIST UPTO 30-Nov-95

          would only show files with a date stamp @{B}on or before@{UB} 3-Nov-95

@{B}Options available from v1.3 onwards@{UB} (not in v1.2):-

@{B}BLOCK@{UB}   - file size in blocks, not bytes

@{B}NOHEAD@{UB}  - prevents the display of the header (top) line and the footer
          (bottom) line. For example, these two lines from the example
          listing shown @{"earlier" LINK "General"42} would @{B}not@{UB} shown:-

            Directory "df1:" on Thursday 18-Feb-96
            03 files - 2 directories - 139 blocks used

@{B}FILES@{UB}   - shows files only

@{B}DIRS@{UB}    - shows directories only

@{B}LFORMAT@{UB} - See @{"LFORMAT" LINK "lformat"} option

For example, if you entered:-

  > LIST BLOCK FILES

you would be shown only the files with the number of disk blocks for each
one.

@{JCENTER}=== End of Text ===
@{JLEFT}























@ENDNODE

@NODE "LFormat" "Part 13 - The LIST Command - LFORMAT Option"

@{B}@{U}The LFORMAT Option@{UU} (v1.3 onwards)@{UB}

LFORMAT is for more advanced users so skip the rest of this article if
you like and come back to it later.

It is of most use in script files. Examples of its use are given in these
articles at the end of this series:-

  @{"STARTUP-SEQUENCE_FILES" LINK "ADB:Parts_71-80/71.Startup-Sequence_Files/2.1"92}
  @{"SPAT_SCRIPT           " LINK "ADB:Parts_71-80/74.SPat_Script/How"36}
  @{"DPAT_SCRIPT           " LINK "ADB:Parts_71-80/75.DPat_Script/How"40}

In order to allow you to put some extra information into the LIST command's
output, the LFORMAT option was added from @{B}v1.3 onwards.@{UB} It is used like
this:-

  LIST dir/file LFORMAT = string

or it can be used without the = sign:-

   LIST dir/file LFORMAT string

LFORMAT automatically uses the @{"QUICK" LINK "Options"9} and @{"NOHEAD" LINK "Options"33} options so that just the
directory and/or the file names are displayed.

The @{"string" LINK "ADB:Misc/Glossary/Strings"} can contain any text that you like plus an @{B}option@{UB} consisting
of @{B}%@{UB} plus a @{B}letter@{UB}. For example   %n  or  %f

To illustrate the usage of these options I will use only use the %N and
%F options here. @{"Click here" LINK "LFOptions"} to read the full list of options which can
be used with LFORMAT.

@{B}Note v1.3 Users@{UB} - You will need to substitute %S for both the %N and the
%F in the following examples. @{"Click Here" LINK "%s"} to read why.

Let's say that you have:-

- a disk in df0: called "MyDisk"
- a directory on it called "SpaceGames"
- a file in the directory called "AlienAdventure"

The path for the file is:-

  Mydisk:SpaceGames/AlienAdventure

If you enter:-

  > LIST  Mydisk:SpaceGames/AlienAdventure LFORMAT="The file is %n"

The output would be:-

  The file is AlienAdventure

The file name "AlienAdventure" has been substituted for the "%n".

If there were more than one file in the directory "SpaceGames" then, by
using the directory name instead of the file name, as in:-

  > LIST Mydisk:SpaceGames LFORMAT="The directory %f holds the file %n"

the output would be something like:-

  The directory Mydisk:SpaceGames/ holds the file AlienAdventure
  The directory Mydisk:SpaceGames/ holds the file AnotherFile
  The directory Mydisk:SpaceGames/ holds the file AndAnotherFile

The use of LFORMAT on directory names rather than file names will result
in all files in that directory being displayed with the LFORMAT
string.

If you want part of the output to be in quotes you can use:-

  > LIST  Mydisk:SpaceGames/AlienAdventure LFORMAT="The directory
          *"%f*" holds the file *"%n*""

(The above is all one command line.)

This will display:-

  The directory "Mydisk:SpaceGames/" holds the file "AlienAdventure"

We will learn more about the use of the * symbol in output strings when
we look at the @{"ECHO" LINK "ADB:Parts_21-30/21.Echo/Inverted"} command. Most of what we say about * under ECHO can
apply here.

@{JCENTER}=== End of Text ===
@{JLEFT}
@ENDNODE

@NODE "LFOptions" "Part 13 - The LIST Command - LFORMAT's Options"

@{B}@{U}Options Used With LFORMAT@{UB}@{UU}

In the @{"examples of LFORMAT" LINK "LFormat"46} we used only %N and %F and mentioned %S.

In @{B}v1.3@{UB} @{"%S" LINK "%s"} was the only LFORMAT option.

From @{B}v2@{UB} onwards, quite a few other LFORMAT options were introduced. These
are explained below together with an indication of the AmigaDOS version
in which they first became available.

@{U}%A   Attributes    v 2.0 onwards@{UU}

Displays the attributes or protection bits for the file.

@{U}%B   Size in blocks    v  2.0 onwards@{UU}

Displays the size of the file in @{"blocks" LINK "ADB:Misc/Glossary/FileSystem"19} instead of in bytes.

@{U}%C   Comments (file note)    v 2.0 onwards@{UU}

Displays any filenote or comment that has been attached to a file.

@{U}%D   Date of file    v 2.0 onwards@{UU}

Displays the date stamp for the file.

@{U}%E   File extension    v 2.1 onwards@{UU}

Displays the extension of the file name that appears after a "." as
illustrated by:-

  Filename   =  myfile.txt
  %e output  =  txt

If there is no "." in the file name then nothing is returned. For example:-

  Filename   =  myfile
  %e output  =

@{U}%F   Path to the file    v 2.0 onwards@{UU}

Displays the full path name to the file regardless of name used in the
command line.

For examples and comparisons to the similar %p @{"click here" LINK "Paths"}

@{U}%K   Key Block    v 2.0 onwards@{UU}

The "key block" is the block number on the disk that holds the @{"header block" LINK "ADB:Misc/Glossary/HeaderBlock"}
of the directory or file.

@{U}%L   Length in bytes    v 2.0 onwards@{UU}

Displays the length of the file in bytes.

@{U}%M   File name without any extension   v 2.1 onwards@{UU}

Displays the file name without any extension. For example:-

  Filename   -  myfile.txt
  %m output  -  myfile

If there is no "." then the whole file name is shown:-

  Filename   =  myfile
  %m output  =  myfile

If there is more than one "." then everything up to the last "." is shown.
For example:-

  Filename   -  my.file.txt
  %m output  -  my.file

@{U}%N   Name of file   v  2.0 onwards@{UU}

Displays the name of the file. This is the same as %s for the 1st use
of %s but %n does @{B}not@{UB} display path name on subsequent uses as does @{"%s" LINK "%s"}.

@{U}%P   Path name    v 2.0 onwards@{UU}

Displays the name of the path used in the command line. If no path is
given then there is no display.

For examples and comparisons to the similar %f @{"click here" LINK "Paths"}

@{U}%S   File and/or Path name  1.3 onwards@{UU}

Displays either the file name or the path name depending on how many times
it is used in the string. @{"Click here" LINK "%s"} for details.

%S is really a hang over from AmigaDOS version 1.3 and its usage can be
@{B}very confusing@{UB}. Users of AmigaDOS 2 onwards should only use it if they
wish their scripts to be compatible with v1.3

The use of %n for file name and %f for path name is the way to go for
AmigaDOS version 2 onwards.

@{U}%T   Time of file    v 2.0 onwards@{UU}

Displays the time stamp for the file.


@{JCENTER}=== End of Text ===
@{JLEFT}
@ENDNODE

@NODE "Paths" "Part 13 - The LIST Command - LFORMAT's Options - Comparison %p %f"

@{B}@{U}Comparison of %f and %p Options in LFORMAT@{UB}@{UU}

In order to compare the output from %f and %p let's assume that we have:-

- a disk in df0: called "MyDisk"
- a directory on it called "SpaceGames"
- a file in the directory called "AlienAdventure"

Thus the full path/filename would be:-

  MyDisk:SpaceGames/AlienAdventure

We will also assume that an @{"assignment" LINK "ADB:Misc/Glossary/LogicalDevices"} has been made as follows:-

  Assign Aliens: MyDisk:SpaceGames

Command lines using %f and %p will produce the results indicated:-

  LIST df0:SpaceGames/AlienAdventure LFORMAT "Path=%f  File=%n"
  --> Path=MyDisk:SpaceGames/  File=AlienAdventure

  LIST df0:SpaceGames/AlienAdventure LFORMAT "Path=%p  File=%n"
  --> Path=df0:SpaceGames/  File=AlienAdventure

  LIST Aliens:AlienAdventure LFORMAT "Path=%f  File=%n"
  --> Path=MyDisk:SpaceGames/  File=AlienAdventure

  LIST Aliens:AlienAdventure LFORMAT "Path=%p  File=%n"
  --> Path=Aliens:  File=AlienAdventure

  @{B}Note@{UB} that - %f gives the proper disk name and directory name
            - %p gives the path name used in the command line

Now let's change the current directory to that holding the file:-

  CD df0:spaceGames

and use LIST commands without any path names before the file name:-

  LIST AlienAdventure LFORMAT "Path=%f  File=%n"
  --> Path=MyDisk:SpaceGames/  File=AlienAdventure

  LIST AlienAdventure LFORMAT "Path=%p  File=%n"
  --> Path=  File=AlienAdventure

Once again the %f option has shown the full path name but this time %p
gives @{B}no@{UB} display as no path name has been used in the command file.

@{JCENTER}=== End of Text ===
@{JLEFT}










@ENDNODE

@NODE "%s" "Part 13 - The LIST Command - LFORMAT's Options - The %s Display"

@{B}@{U}Display given by %s in LFORMAT string@{UB}@{UU}

%S was the only option available in AmigaDOS v 1.3. It has been retained
in its original form to enable compatibility with older scripts.

The output from %s depends on how many times it is used in the
string.

              @{U}1st Time@{UU}    @{U}2nd Time@{UU}    @{U}3rd Time@{UU}    @{U}4th Time@{UU}

@{U}Once only  @{UU} - File name

@{U}Two times  @{UU} - Path Name   File Name

@{U}Three times@{UU} - Path Name   File Name   File Name

@{U}Four times @{UU} - Path Name   File Name   Path Name   File Name

If %S is used more than 4 times, then all subsequent occurrences show
file name only.

Note that the path shown is that of the directory specified in the command
line. If there is no directory used in the command line (i.e. the listing
is to be of the current directory) then no path name is given in the
output.

This is the same as @{"%P but different to %F" LINK "Paths"17}.


@{JCENTER}=== End of Text ===
@{JLEFT}
@ENDNODE

