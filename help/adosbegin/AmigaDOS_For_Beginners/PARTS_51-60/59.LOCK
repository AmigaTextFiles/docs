@DATABASE "ADB59"
@INDEX "ADB:Misc/Index.Text/Main"
@HELP "ADB:Misc/Help/Main"
@NODE "Main" "AmigaDOS For Beginners - Part 59 - The LOCK Command"

@{B}@{U}@{JCENTER}AMIGADOS FOR BEGINNERS

BY FRANK BUNTON

@{" COPYRIGHT © FRANK P. BUNTON 1993-1998 " LINK "ADB:Misc/Read_Me_First!!/Copyright"}

BY FRANK BUNTON

PART 59 - THE LOCK COMMAND@{UB}@{UU}
@{JLEFT}

@{B}Location@{UB}     - C directory (Version 1.3 Onwards)

@{B}Purpose@{UB}      - To lock a drive so that it cannot be written to
               or deleted from.

@{B}Availability@{UB} - AmigaDOS Versions 1.3 Onwards
@{JCENTER}

@{" Usage of LOCK      " LINK "Usage"} Version 1.3 Onwards
@{" Password Notes     " LINK "Password"} Version 1.3 Onwards
@{" Floppy Drive Notes " LINK "Floppy"} Version 1.3 Onwards
@{" Hard Drive Notes   " LINK "Hard"} Version 1.3 Onwards


@{JCENTER}=== End of Text ===
@{JLEFT}
@ENDNODE

@NODE "Usage" "Part 59 - The LOCK Command - Usage"

@{B}@{U}Usage of LOCK@{UB}@{UU}

This command is mostly used on hard drive partitions which, of course,
do not have a write protect tabs.

Its usage can be one of the following:-

  LOCK DriveName ON
  LOCK DriveName OFF
  LOCK DriveName ON password
  LOCK DriveName OFF password

Examples are:-

  > LOCK dh0: ON
  > LOCK dh1: ON mickeymouse
  > LOCK dh0: OFF
  > LOCK dh1: OFF mickeymouse

After using it with "ON", the nominated drive cannot be written to and
files cannot be deleted from it.

If a @{"password" LINK "Password"} is used with "ON" then that same password must be used with
"OFF" before the drive will be unlocked.

Locked drives are automatically unlocked after a reset or after the power
is turned off. Thus, if you restart your computer and stop the startup
with CTRL-D before any lock commands in the start up files are reached
(see @{"Hard Drive Notes" LINK "Hard"}), then the drives will NOT be locked.


@{JCENTER}=== End of Text ===
@{JLEFT}
@ENDNODE

@NODE "Password" "Part 59 - The LOCK Command - Password Notes

@{B}@{U}Password Notes@{UB}@{UU}

The password can be any characters that you enter from the keyboard. However,
remember that, for alpha characters (a-z and A-Z), it is @{B}case sensitive@{UB}.

In @{B}v1.3,@{UB} the password can be up to 4 characters long. If a longer password
is used, it will appear to have worked but only its first four characters
need be used to unlock the drive.

In @{B}v2+,@{UB} the password can be of any length and the password used to unlock
must be identical in length as well as characters.


@{JCENTER}=== End of Text ===
@{JLEFT}
@ENDNODE

@NODE "Floppy" "Part 59 - The LOCK Command - Floppy Drive Notes"

@{B}@{U}Floppy Drive Notes@{UB}@{UU}

With FLOPPY drives it is important to note that it is the DRIVE and NOT
the disk that is locked! If a drive is locked with a disk in it and that
disk is moved to another drive then the disk is NOT locked. If its write
protect tab is in the write position it can still be written to or deleted
from in the other drive!

Also, a new disk placed in a locked floppy drive cannot be written to
even though that disk was not in the drive when the drive was locked.


@{JCENTER}=== End of Text ===
@{JLEFT}
@ENDNODE

@NODE "Hard" "Part 59 - The LOCK Command - Hard Drive Notes"

@{B}@{U}Hard Drive Notes@{UB}@{UU}

If you want to have your hard drive locked at all times except when you
actually want to write to them, then you can add these lines to your
Startup-Sequence, StartupII, or User-Startup file:-

  LOCK dh0: ON password
  LOCK dh1: ON password
  LOCK dh2: ON password

Now there can be no accidental deletions from the drive and it reduces
the possibility of viruses being written to your disk.

The password is not of much use in preventing humans unlocking as they
can just read your startup files to see the password. However, it may
be of use in virus protection.

I am sure that it would be possible for a virus to be written that could
detect a lock on a hard drive and use the LOCK command to unlock the drive.
Using a password may make it a bit more difficult for the virus. I am
not saying that it would be impossible for a virus to overcome a password
lock. Only that it would be more unlikely that it could do so.

Entering the full command line to unlock a hard drive partition each time
you want to write to it or delete from it could be a bug bear.

I put a lock only on the partitions in which programs and workbench are
kept. I keep all documents on a separate partition that is not locked.

I have aliases set up as follows:-

  ALIAS lof0 LOCK dh0: OFF password
  ALIAS lon0 LOCK dh0: ON password

and similar ones for dh1: and dh2:

Now, to unlock, I just enter:-

  > lof0

and do my work on the disk, then enter:-

  > lon0

to relock it.


@{JCENTER}=== End of Text ===
@{JLEFT}
@ENDNODE

