#COLORS=64

Statement FadePals {sour,dest,delay}
SHARED palsr(),palsg(),palsb()
For a=0 To #COLORS-1
  PaletteInfo sour
  begr=AGAPalRed(a)
  begg=AGAPalGreen(a)
  begb=AGAPalBlue(a)
  PaletteInfo dest
  finr=AGAPalRed(a)
  fing=AGAPalGreen(a)
  finb=AGAPalBlue(a)
  palsr(a)=(finr-begr)/delay
  palsg(a)=(fing-begg)/delay
  palsb(a)=(finb-begb)/delay
Next a
PaletteInfo sour
For a=1 To delay
  For b=0 To #COLORS-1
    AGAPalRGB dest,b,AGAPalRed(b)+palsr(b)*a,AGAPalGreen(b)+palsg(b)*a,AGAPalBlue(b)+palsb(b)*a
  Next b
  VWait
  ShowPalette dest
Next a
End Statement